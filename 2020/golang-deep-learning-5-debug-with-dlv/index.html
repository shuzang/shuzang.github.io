<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>Golang深入学习5-使用dlv调试程序 - Shuzang's Blog</title><meta name=author content><meta name=author-link content><meta name=description content="在C/C++中，使用 GDB 调试程序，但在Go中，看过网上的一些文章后，发现 dlv 是个更好的选择，本文进行介绍。"><meta name=keywords content="Golang"><meta itemprop=name content="Golang深入学习5-使用dlv调试程序"><meta itemprop=description content="在C/C++中，使用 GDB 调试程序，但在Go中，看过网上的一些文章后，发现 dlv 是个更好的选择，本文进行介绍。"><meta itemprop=datePublished content="2020-07-26T09:43:00+08:00"><meta itemprop=dateModified content="2020-07-26T00:00:00+00:00"><meta itemprop=wordCount content="1909"><meta itemprop=image content="https://shuzang.github.io/logo.png"><meta itemprop=keywords content="Golang,"><meta property="og:title" content="Golang深入学习5-使用dlv调试程序"><meta property="og:description" content="在C/C++中，使用 GDB 调试程序，但在Go中，看过网上的一些文章后，发现 dlv 是个更好的选择，本文进行介绍。"><meta property="og:type" content="article"><meta property="og:url" content="https://shuzang.github.io/2020/golang-deep-learning-5-debug-with-dlv/"><meta property="og:image" content="https://shuzang.github.io/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-07-26T09:43:00+08:00"><meta property="article:modified_time" content="2020-07-26T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://shuzang.github.io/logo.png"><meta name=twitter:title content="Golang深入学习5-使用dlv调试程序"><meta name=twitter:description content="在C/C++中，使用 GDB 调试程序，但在Go中，看过网上的一些文章后，发现 dlv 是个更好的选择，本文进行介绍。"><meta name=application-name content="Shuzang's Blog"><meta name=apple-mobile-web-app-title content="Shuzang's Blog"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=https://shuzang.github.io/2020/golang-deep-learning-5-debug-with-dlv/><link rel=prev href=https://shuzang.github.io/2020/golang-deep-learning-4-map/><link rel=next href=https://shuzang.github.io/2020/golang-deep-learning-6-performance-analysis-pprof/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://unpkg.com/@fortawesome/fontawesome-free@6.2.0/css/all.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://unpkg.com/@fortawesome/fontawesome-free@6.2.0/css/all.min.css></noscript><link rel=preload href=https://unpkg.com/animate.css@4.1.1/animate.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://unpkg.com/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Golang深入学习5-使用dlv调试程序","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/shuzang.github.io\/2020\/golang-deep-learning-5-debug-with-dlv\/"},"genre":"posts","keywords":"Golang","wordcount":1909,"url":"https:\/\/shuzang.github.io\/2020\/golang-deep-learning-5-debug-with-dlv\/","datePublished":"2020-07-26T09:43:00+08:00","dateModified":"2020-07-26T00:00:00+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"作者"},"description":""}</script></head><body data-header-desktop=sticky data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper data-page-style=normal><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper data-github-corner=right><div class=header-title><a href=/ title="Shuzang's Blog"><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/avatar.png data-title="Shuzang's Blog" data-alt="Shuzang's Blog" class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>Shuzang's Blog</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 文章</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li><li class=menu-item><a class=menu-link href=/collection/><i class="fa-solid fa-bookmark fa-fw fa-sm" aria-hidden=true></i> 集子</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> 关于</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder=搜索文章标题或内容…… id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Shuzang's Blog"><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/avatar.png data-title=https://picped-1301226557.cos.ap-beijing.myqcloud.com/avatar.png data-alt=https://picped-1301226557.cos.ap-beijing.myqcloud.com/avatar.png class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>Shuzang's Blog</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容…… id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></li><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 文章</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li><li class=menu-item><a class=menu-link href=/collection/><i class="fa-solid fa-bookmark fa-fw fa-sm" aria-hidden=true></i> 集子</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> 关于</a></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=container><aside class=toc id=toc-auto><h2 class=toc-title>目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>Golang深入学习5-使用dlv调试程序</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><span class=author><i class="fa-solid fa-user-circle" aria-hidden=true></i></span></span>
<span class=post-category>收录于 <a href=/categories/%E7%88%B1%E7%BC%96%E7%A8%8B%E7%88%B1%E6%8A%80%E6%9C%AF%E7%9A%84%E5%AD%A9%E5%AD%90/><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> 爱编程爱技术的孩子</a></span></div><div class=post-meta-line><span title="发布于 2020-07-26 09:43:00"><i class="fa-regular fa-calendar-alt fa-fw me-1" aria-hidden=true></i><time datetime=2020-07-26>2020-07-26</time></span>&nbsp;<span title="更新于 2020-07-26 00:00:00"><i class="fa-regular fa-edit fa-fw me-1" aria-hidden=true></i><time datetime=2020-07-26>2020-07-26</time></span>&nbsp;<span title="1909 字"><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden=true></i>约 2000 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden=true></i>预计阅读 4 分钟</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#1-基本命令>1. 基本命令</a></li><li><a href=#2-命令使用>2. 命令使用</a><ul><li><a href=#21-断点设置>2.1 断点设置</a></li><li><a href=#22-打印断点信息>2.2 打印断点信息</a></li><li><a href=#23-运行直到断点处>2.3 运行直到断点处</a></li><li><a href=#24-下一步>2.4 下一步</a></li><li><a href=#25-查看局部变量>2.5 查看局部变量</a></li><li><a href=#26-查看当前调用栈>2.6 查看当前调用栈</a></li><li><a href=#27-打印源代码>2.7 打印源代码</a></li><li><a href=#28-运行到断点处执行某个命令>2.8 运行到断点处执行某个命令</a></li></ul></li><li><a href=#3-goroutine-调试>3. Goroutine 调试</a></li><li><a href=#4-后记>4. 后记</a></li></ul></nav></div></div><div class=content id=content><div class="details admonition warning open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-exclamation-triangle fa-fw" aria-hidden=true></i>警告<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>本文最后更新于 2020-07-26，文中内容可能已过时。</div></div></div><p>在C/C++中，使用 GDB 调试程序，但在Go中，看过网上的一些文章后，发现 dlv 是个更好的选择，本文进行介绍。</p><p>实际上，<a href=https://github.com/go-delve/delve target=_blank rel="external nofollow noopener noreferrer">delve</a> 才是全称，dlv 只是启动命令，如果使用 VScode，默认使用的调试器就是基于 delve 的。</p><h2 id=1-基本命令>1. 基本命令</h2><p>使用如下命令安装</p><div class=highlight id=id-1><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=k>go</span> <span class=nx>get</span> <span class=nx>github</span><span class=p>.</span><span class=nx>com</span><span class=o>/</span><span class=k>go</span><span class=o>-</span><span class=nx>delve</span><span class=o>/</span><span class=nx>delve</span><span class=o>/</span><span class=nx>cmd</span><span class=o>/</span><span class=nx>dlv</span></span></span></code></pre></td></tr></table></div></div><p>安装后执行 <code>dlv</code> 命令查看基本信息</p><div class=highlight id=id-2><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ dlv
</span></span><span class=line><span class=cl>Delve is a <span class=nb>source</span> level debugger <span class=k>for</span> Go programs.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Delve enables you to interact with your program by controlling the execution of the process,
</span></span><span class=line><span class=cl>evaluating variables, and providing information of thread / goroutine state, CPU register state and more.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>The goal of this tool is to provide a simple yet powerful interface <span class=k>for</span> debugging Go programs.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Pass flags to the program you are debugging using <span class=sb>`</span>--<span class=sb>`</span>, <span class=k>for</span> example:
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=sb>`</span>dlv <span class=nb>exec</span> ./hello -- server --config conf/config.toml<span class=sb>`</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Usage:
</span></span><span class=line><span class=cl>  dlv <span class=o>[</span>command<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Available Commands:
</span></span><span class=line><span class=cl>  attach      Attach to running process and begin debugging.
</span></span><span class=line><span class=cl>  connect     Connect to a headless debug server.
</span></span><span class=line><span class=cl>  core        Examine a core dump.
</span></span><span class=line><span class=cl>  debug       Compile and begin debugging main package in current directory, or the package specified.
</span></span><span class=line><span class=cl>  <span class=nb>exec</span>        Execute a precompiled binary, and begin a debug session.
</span></span><span class=line><span class=cl>  <span class=nb>help</span>        Help about any <span class=nb>command</span>
</span></span><span class=line><span class=cl>  run         Deprecated command. Use <span class=s1>&#39;debug&#39;</span> instead.
</span></span><span class=line><span class=cl>  <span class=nb>test</span>        Compile <span class=nb>test</span> binary and begin debugging program.
</span></span><span class=line><span class=cl>  trace       Compile and begin tracing program.
</span></span><span class=line><span class=cl>  version     Prints version.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Flags:
</span></span><span class=line><span class=cl>      --accept-multiclient   Allows a headless server to accept multiple client connections.
</span></span><span class=line><span class=cl>      --api-version int      Selects API version when headless. <span class=o>(</span>default 1<span class=o>)</span>
</span></span><span class=line><span class=cl>      --backend string       Backend selection <span class=o>(</span>see <span class=s1>&#39;dlv help backend&#39;</span><span class=o>)</span>. <span class=o>(</span>default <span class=s2>&#34;default&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>      --build-flags string   Build flags, to be passed to the compiler.
</span></span><span class=line><span class=cl>      --check-go-version     Checks that the version of Go in use is compatible with Delve. <span class=o>(</span>default <span class=nb>true</span><span class=o>)</span>
</span></span><span class=line><span class=cl>      --headless             Run debug server only, in headless mode.
</span></span><span class=line><span class=cl>      --init string          Init file, executed by the terminal client.
</span></span><span class=line><span class=cl>  -l, --listen string        Debugging server listen address. <span class=o>(</span>default <span class=s2>&#34;127.0.0.1:0&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>      --log                  Enable debugging server logging.
</span></span><span class=line><span class=cl>      --log-dest string      Writes logs to the specified file or file descriptor <span class=o>(</span>see <span class=s1>&#39;dlv help log&#39;</span><span class=o>)</span>.
</span></span><span class=line><span class=cl>      --log-output string    Comma separated list of components that should produce debug output <span class=o>(</span>see <span class=s1>&#39;dlv help log&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>      --only-same-user       Only connections from the same user that started this instance of Delve are allowed to connect. <span class=o>(</span>default <span class=nb>true</span><span class=o>)</span>
</span></span><span class=line><span class=cl>      --wd string            Working directory <span class=k>for</span> running the program. <span class=o>(</span>default <span class=s2>&#34;.&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Additional <span class=nb>help</span> topics:
</span></span><span class=line><span class=cl>  dlv backend Help about the --backend flag.
</span></span><span class=line><span class=cl>  dlv log     Help about logging flags.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Use <span class=s2>&#34;dlv [command] --help&#34;</span> <span class=k>for</span> more information about a command.</span></span></code></pre></td></tr></table></div></div><p>进入调试模式有以下几种办法</p><ol><li>dlv attach pid：对正在运行的进程直接进行调试（pid 为进程id）；</li><li>dlv debug：编译源文件并开始调试，这里应和 main 函数位于同一目录，或者指定完整的 main 函数路径</li><li>dlv exec filename：从二进制文件启动调试</li></ol><p>我们以下面的程序为例进行说明，使用 dlv debug 进入调试</p><div class=highlight id=id-3><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>a</span> <span class=o>:=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>a</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div><p>进入调试，使用 help 可以查看所有可用命令</p><div class=highlight id=id-4><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ dlv debug main.go
</span></span><span class=line><span class=cl>Type <span class=s1>&#39;help&#39;</span> <span class=k>for</span> list of commands.
</span></span><span class=line><span class=cl><span class=o>(</span>dlv<span class=o>)</span> <span class=nb>help</span>
</span></span><span class=line><span class=cl>The following commands are available:
</span></span><span class=line><span class=cl>    args ------------------------ Print <span class=k>function</span> arguments.
</span></span><span class=line><span class=cl>    <span class=nb>break</span> <span class=o>(</span>alias: b<span class=o>)</span> ------------ Sets a breakpoint.
</span></span><span class=line><span class=cl>    breakpoints <span class=o>(</span>alias: bp<span class=o>)</span> ----- Print out info <span class=k>for</span> active breakpoints.
</span></span><span class=line><span class=cl>    call ------------------------ Resumes process, injecting a <span class=k>function</span> call <span class=o>(</span>EXPERIMENTAL!!!<span class=o>)</span>
</span></span><span class=line><span class=cl>    clear ----------------------- Deletes breakpoint.
</span></span><span class=line><span class=cl>    clearall -------------------- Deletes multiple breakpoints.
</span></span><span class=line><span class=cl>    condition <span class=o>(</span>alias: cond<span class=o>)</span> ----- Set breakpoint condition.
</span></span><span class=line><span class=cl>    config ---------------------- Changes configuration parameters.
</span></span><span class=line><span class=cl>    <span class=k>continue</span> <span class=o>(</span>alias: c<span class=o>)</span> --------- Run <span class=k>until</span> breakpoint or program termination.
</span></span><span class=line><span class=cl>    deferred -------------------- Executes <span class=nb>command</span> in the context of a deferred call.
</span></span><span class=line><span class=cl>    disassemble <span class=o>(</span>alias: disass<span class=o>)</span> - Disassembler.
</span></span><span class=line><span class=cl>    down ------------------------ Move the current frame down.
</span></span><span class=line><span class=cl>    edit <span class=o>(</span>alias: ed<span class=o>)</span> ------------ Open where you are in <span class=nv>$DELVE_EDITOR</span> or <span class=nv>$EDITOR</span>
</span></span><span class=line><span class=cl>    <span class=nb>exit</span> <span class=o>(</span>alias: quit <span class=p>|</span> q<span class=o>)</span> ------ Exit the debugger.
</span></span><span class=line><span class=cl>    frame ----------------------- Set the current frame, or execute <span class=nb>command</span> on a different frame.
</span></span><span class=line><span class=cl>    funcs ----------------------- Print list of functions.
</span></span><span class=line><span class=cl>    goroutine <span class=o>(</span>alias: gr<span class=o>)</span> ------- Shows or changes current goroutine
</span></span><span class=line><span class=cl>    goroutines <span class=o>(</span>alias: grs<span class=o>)</span> ----- List program goroutines.
</span></span><span class=line><span class=cl>    <span class=nb>help</span> <span class=o>(</span>alias: h<span class=o>)</span> ------------- Prints the <span class=nb>help</span> message.
</span></span><span class=line><span class=cl>    libraries ------------------- List loaded dynamic libraries
</span></span><span class=line><span class=cl>    list <span class=o>(</span>alias: ls <span class=p>|</span> l<span class=o>)</span> -------- Show <span class=nb>source</span> code.
</span></span><span class=line><span class=cl>    locals ---------------------- Print <span class=nb>local</span> variables.
</span></span><span class=line><span class=cl>    next <span class=o>(</span>alias: n<span class=o>)</span> ------------- Step over to next <span class=nb>source</span> line.
</span></span><span class=line><span class=cl>    on -------------------------- Executes a <span class=nb>command</span> when a breakpoint is hit.
</span></span><span class=line><span class=cl>    print <span class=o>(</span>alias: p<span class=o>)</span> ------------ Evaluate an expression.
</span></span><span class=line><span class=cl>    regs ------------------------ Print contents of CPU registers.
</span></span><span class=line><span class=cl>    restart <span class=o>(</span>alias: r<span class=o>)</span> ---------- Restart process.
</span></span><span class=line><span class=cl>    <span class=nb>set</span> ------------------------- Changes the value of a variable.
</span></span><span class=line><span class=cl>    <span class=nb>source</span> ---------------------- Executes a file containing a list of delve commands
</span></span><span class=line><span class=cl>    sources --------------------- Print list of <span class=nb>source</span> files.
</span></span><span class=line><span class=cl>    stack <span class=o>(</span>alias: bt<span class=o>)</span> ----------- Print stack trace.
</span></span><span class=line><span class=cl>    step <span class=o>(</span>alias: s<span class=o>)</span> ------------- Single step through program.
</span></span><span class=line><span class=cl>    step-instruction <span class=o>(</span>alias: si<span class=o>)</span>  Single step a single cpu instruction.
</span></span><span class=line><span class=cl>    stepout <span class=o>(</span>alias: so<span class=o>)</span> --------- Step out of the current <span class=k>function</span>.
</span></span><span class=line><span class=cl>    thread <span class=o>(</span>alias: tr<span class=o>)</span> ---------- Switch to the specified thread.
</span></span><span class=line><span class=cl>    threads --------------------- Print out info <span class=k>for</span> every traced thread.
</span></span><span class=line><span class=cl>    trace <span class=o>(</span>alias: t<span class=o>)</span> ------------ Set tracepoint.
</span></span><span class=line><span class=cl>    types ----------------------- Print list of types
</span></span><span class=line><span class=cl>    up -------------------------- Move the current frame up.
</span></span><span class=line><span class=cl>    vars ------------------------ Print package variables.
</span></span><span class=line><span class=cl>    whatis ---------------------- Prints <span class=nb>type</span> of an expression.
</span></span><span class=line><span class=cl>Type <span class=nb>help</span> followed by a <span class=nb>command</span> <span class=k>for</span> full documentation.</span></span></code></pre></td></tr></table></div></div><p>常用的命令总结如下：</p><table><thead><tr><th>命令</th><th>含义</th></tr></thead><tbody><tr><td>b</td><td>设置断点</td></tr><tr><td>bp</td><td>打印正活动的断点信息</td></tr><tr><td>clear</td><td>删除断点</td></tr><tr><td>clearall</td><td>删除所有断点</td></tr><tr><td>c</td><td>运行直到断点处或程序终止</td></tr><tr><td>n</td><td>下一步，不会进入函数</td></tr><tr><td>s</td><td>下一步，会进入函数</td></tr><tr><td>so</td><td>跳出当前函数</td></tr><tr><td>args</td><td>查看函数参数</td></tr><tr><td>locals</td><td>查看所有局部变量</td></tr><tr><td>list</td><td>打印当前源代码</td></tr><tr><td>on</td><td>运行到某断点然后执行相应的命令，比如 on 2 list</td></tr><tr><td>bt</td><td>打印当前调用栈</td></tr><tr><td>exit</td><td>退出</td></tr></tbody></table><h2 id=2-命令使用>2. 命令使用</h2><p>下面通过实践说明这些简单命令的使用</p><h3 id=21-断点设置>2.1 断点设置</h3><div class=highlight id=id-5><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>(</span>dlv<span class=o>)</span> b main.go:6
</span></span><span class=line><span class=cl>Breakpoint <span class=m>1</span> <span class=nb>set</span> at 0x4bd2f8 <span class=k>for</span> main.main<span class=o>()</span> F:/Gotest/main.go:6</span></span></code></pre></td></tr></table></div></div><h3 id=22-打印断点信息>2.2 打印断点信息</h3><div class=highlight id=id-6><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>(</span>dlv<span class=o>)</span> bp
</span></span><span class=line><span class=cl>Breakpoint runtime-fatal-throw at 0x4377e0 <span class=k>for</span> runtime.fatalthrow<span class=o>()</span> c:/go/src/runtime/panic.go:1162 <span class=o>(</span>0<span class=o>)</span>
</span></span><span class=line><span class=cl>Breakpoint unrecovered-panic at 0x437860 <span class=k>for</span> runtime.fatalpanic<span class=o>()</span> c:/go/src/runtime/panic.go:1189 <span class=o>(</span>0<span class=o>)</span>  
</span></span><span class=line><span class=cl>        print runtime.curg._panic.arg
</span></span><span class=line><span class=cl>Breakpoint <span class=m>1</span> at 0x4bd2f8 <span class=k>for</span> main.main<span class=o>()</span> F:/Gotest/main.go:6 <span class=o>(</span>0<span class=o>)</span></span></span></code></pre></td></tr></table></div></div><h3 id=23-运行直到断点处>2.3 运行直到断点处</h3><div class=highlight id=id-7><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>(</span>dlv<span class=o>)</span> c
</span></span><span class=line><span class=cl>&gt; main.main<span class=o>()</span> F:/Gotest/main.go:6 <span class=o>(</span>hits goroutine<span class=o>(</span>1<span class=o>)</span>:1 total:1<span class=o>)</span> <span class=o>(</span>PC: 0x4bd2f8<span class=o>)</span>
</span></span><span class=line><span class=cl>     1: package main
</span></span><span class=line><span class=cl>     2: 
</span></span><span class=line><span class=cl>     3: import <span class=s2>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>     4: 
</span></span><span class=line><span class=cl>     5: func main<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl><span class=o>=</span>&gt;   6:         a :<span class=o>=</span> <span class=m>10</span>       
</span></span><span class=line><span class=cl>     7:         fmt.Println<span class=o>(</span>a<span class=o>)</span>
</span></span><span class=line><span class=cl>     8: <span class=o>}</span></span></span></code></pre></td></tr></table></div></div><h3 id=24-下一步>2.4 下一步</h3><div class=highlight id=id-8><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>(</span>dlv<span class=o>)</span> n
</span></span><span class=line><span class=cl>&gt; main.main<span class=o>()</span> F:/Gotest/main.go:7 <span class=o>(</span>PC: 0x4bd301<span class=o>)</span>
</span></span><span class=line><span class=cl>     2: 
</span></span><span class=line><span class=cl>     3: import <span class=s2>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>     4: 
</span></span><span class=line><span class=cl>     5: func main<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>     6:         a :<span class=o>=</span> <span class=nv>10</span>
</span></span><span class=line><span class=cl><span class=o>=</span>&gt;   7:         fmt.Println<span class=o>(</span>a<span class=o>)</span>
</span></span><span class=line><span class=cl>     8: <span class=o>}</span></span></span></code></pre></td></tr></table></div></div><h3 id=25-查看局部变量>2.5 查看局部变量</h3><div class=highlight id=id-9><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>(</span>dlv<span class=o>)</span> locals
</span></span><span class=line><span class=cl><span class=nv>a</span> <span class=o>=</span> <span class=m>10</span></span></span></code></pre></td></tr></table></div></div><h3 id=26-查看当前调用栈>2.6 查看当前调用栈</h3><div class=highlight id=id-10><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>(</span>dlv<span class=o>)</span> bt
</span></span><span class=line><span class=cl><span class=m>0</span>  0x00000000004bd301 in main.main
</span></span><span class=line><span class=cl>   at F:/Gotest/main.go:7
</span></span><span class=line><span class=cl><span class=m>1</span>  0x0000000000439cfa in runtime.main
</span></span><span class=line><span class=cl>   at c:/go/src/runtime/proc.go:203
</span></span><span class=line><span class=cl><span class=m>2</span>  0x00000000004643d1 in runtime.goexit
</span></span><span class=line><span class=cl>   at c:/go/src/runtime/asm_amd64.s:1373</span></span></code></pre></td></tr></table></div></div><h3 id=27-打印源代码>2.7 打印源代码</h3><div class=highlight id=id-11><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>(</span>dlv<span class=o>)</span> list
</span></span><span class=line><span class=cl>&gt; main.main<span class=o>()</span> F:/Gotest/main.go:7 <span class=o>(</span>PC: 0x4bd301<span class=o>)</span>
</span></span><span class=line><span class=cl>     2: 
</span></span><span class=line><span class=cl>     3: import <span class=s2>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>     4: 
</span></span><span class=line><span class=cl>     5: func main<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>     6:         a :<span class=o>=</span> <span class=nv>10</span>
</span></span><span class=line><span class=cl><span class=o>=</span>&gt;   7:         fmt.Println<span class=o>(</span>a<span class=o>)</span>
</span></span><span class=line><span class=cl>     8: <span class=o>}</span></span></span></code></pre></td></tr></table></div></div><h3 id=28-运行到断点处执行某个命令>2.8 运行到断点处执行某个命令</h3><p>1 是断点ID，p a 代表指定到断点处打印变量 a 的值</p><div class=highlight id=id-12><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>(</span>dlv<span class=o>)</span> on <span class=m>1</span> p a
</span></span><span class=line><span class=cl><span class=o>(</span>dlv<span class=o>)</span> c
</span></span><span class=line><span class=cl><span class=m>10</span>
</span></span><span class=line><span class=cl>Process <span class=m>6540</span> has exited with status <span class=m>0</span></span></span></code></pre></td></tr></table></div></div><h2 id=3-goroutine-调试>3. Goroutine 调试</h2><p>Go 的优势在协程，dlv 相比 GDB 的优点也在于对协程调试的支持，我们以下面的程序为例，给出示例</p><div class=highlight id=id-13><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>main</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>	<span class=s>&#34;time&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>a</span> <span class=o>:=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl>	<span class=k>go</span> <span class=nf>printA</span><span class=p>(</span><span class=nx>a</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=nx>time</span><span class=p>.</span><span class=nf>Sleep</span><span class=p>(</span><span class=mf>1e9</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>printA</span><span class=p>(</span><span class=nx>a</span> <span class=kt>int</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>a</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div><p>设置断点并启动运行</p><div class=highlight id=id-14><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>&gt; b main.go:12
</span></span><span class=line><span class=cl>Breakpoint <span class=m>1</span> <span class=nb>set</span> at 0x4bd5be <span class=k>for</span> main.main<span class=o>()</span> F:/Gotest/main.go:12
</span></span><span class=line><span class=cl><span class=o>(</span>dlv<span class=o>)</span> c
</span></span><span class=line><span class=cl>&gt; main.main<span class=o>()</span> F:/Gotest/main.go:12 <span class=o>(</span>hits goroutine<span class=o>(</span>1<span class=o>)</span>:1 total:1<span class=o>)</span> <span class=o>(</span>PC: 0x4bd5be<span class=o>)</span>
</span></span><span class=line><span class=cl>     7: 
</span></span><span class=line><span class=cl>     8: func main<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>     9:         a :<span class=o>=</span> <span class=m>10</span>
</span></span><span class=line><span class=cl>    10:         go printA<span class=o>(</span>a<span class=o>)</span>
</span></span><span class=line><span class=cl>    11: 
</span></span><span class=line><span class=cl><span class=o>=</span>&gt;  12:         time.Sleep<span class=o>(</span>1e9<span class=o>)</span>
</span></span><span class=line><span class=cl>    13: <span class=o>}</span>
</span></span><span class=line><span class=cl>    14: 
</span></span><span class=line><span class=cl>    15: func printA<span class=o>(</span>a int<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    16:         fmt.Println<span class=o>(</span>a<span class=o>)</span>
</span></span><span class=line><span class=cl>    17: <span class=o>}</span></span></span></code></pre></td></tr></table></div></div><p>查看当前启动的协程，其中 Goroutine 1 是主协程，Goroutine 6 是自行启动的子协程</p><div class=highlight id=id-15><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>(</span>dlv<span class=o>)</span> goroutines
</span></span><span class=line><span class=cl>* Goroutine <span class=m>1</span> - User: F:/Gotest/main.go:12 main.main <span class=o>(</span>0x4bd5be<span class=o>)</span> <span class=o>(</span>thread 11412<span class=o>)</span>
</span></span><span class=line><span class=cl>  Goroutine <span class=m>2</span> - User: c:/go/src/runtime/proc.go:305 runtime.gopark <span class=o>(</span>0x43a092<span class=o>)</span>
</span></span><span class=line><span class=cl>  Goroutine <span class=m>3</span> - User: c:/go/src/runtime/proc.go:305 runtime.gopark <span class=o>(</span>0x43a092<span class=o>)</span>
</span></span><span class=line><span class=cl>  Goroutine <span class=m>4</span> - User: c:/go/src/runtime/proc.go:305 runtime.gopark <span class=o>(</span>0x43a092<span class=o>)</span>
</span></span><span class=line><span class=cl>  Goroutine <span class=m>5</span> - User: c:/go/src/runtime/proc.go:305 runtime.gopark <span class=o>(</span>0x43a092<span class=o>)</span>
</span></span><span class=line><span class=cl>  Goroutine <span class=m>6</span> - User: F:/Gotest/main.go:15 main.printA <span class=o>(</span>0x4bd5e0<span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>[</span><span class=m>6</span> goroutines<span class=o>]</span></span></span></code></pre></td></tr></table></div></div><p>打印主协程当前的变量</p><div class=highlight id=id-16><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>(</span>dlv<span class=o>)</span> locals
</span></span><span class=line><span class=cl><span class=nv>a</span> <span class=o>=</span> <span class=m>10</span></span></span></code></pre></td></tr></table></div></div><p>如果要查看子协程的情况，需要先切换到子协程</p><div class=highlight id=id-17><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>(</span>dlv<span class=o>)</span> goroutine <span class=m>6</span>
</span></span><span class=line><span class=cl>Switched from <span class=m>1</span> to <span class=m>6</span> <span class=o>(</span>thread 11412<span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>(</span>dlv<span class=o>)</span> bt
</span></span><span class=line><span class=cl><span class=m>0</span>  0x00000000004bd5e0 in main.printA
</span></span><span class=line><span class=cl>   at F:/Gotest/main.go:15
</span></span><span class=line><span class=cl><span class=m>1</span>  0x0000000000464621 in runtime.goexit
</span></span><span class=line><span class=cl>   at c:/go/src/runtime/asm_amd64.s:1373
</span></span><span class=line><span class=cl><span class=o>(</span>dlv<span class=o>)</span> args
</span></span><span class=line><span class=cl><span class=nv>a</span> <span class=o>=</span> <span class=m>10</span></span></span></code></pre></td></tr></table></div></div><h2 id=4-后记>4. 后记</h2><p>写到这里好像没发现直接使用 dlv 有什么优势，VScode 在 delve 基础上完成的调试功能更方便，比自己使用命令逐步执行好多了。</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="更新于 2020-07-26 00:00:00">更新于 2020-07-26&nbsp;</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md><span><a href=/2020/golang-deep-learning-5-debug-with-dlv/index.md title=阅读原始文档 class=link-to-markdown>阅读原始文档</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Pocket" data-sharer=pocket data-url=https://shuzang.github.io/2020/golang-deep-learning-5-debug-with-dlv/><i class="fa-brands fa-get-pocket fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://shuzang.github.io/2020/golang-deep-learning-5-debug-with-dlv/ data-title=Golang深入学习5-使用dlv调试程序><i class="fa-brands fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/tags/golang/ class=post-tag>Golang</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/2020/golang-deep-learning-4-map/ class=post-nav-item rel=prev title=Golang深入学习4-map><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>Golang深入学习4-map</a>
<a href=/2020/golang-deep-learning-6-performance-analysis-pprof/ class=post-nav-item rel=next title=Golang深入学习6-使用pprof进行性能分析>Golang深入学习6-使用pprof进行性能分析<i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div class=post-reward><div class=comment></div><input type=checkbox class=reward-input name=reward id=fi-reward hidden>
<label class=reward-button for=fi-reward>赞赏</label><div class=reward-ways data-mode=static><div><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/alipay.png data-title=" 支付宝" data-alt=" 支付宝" style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span>支付宝</span></div><div><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/wechatpay.png data-title=" 微信" data-alt=" 微信" style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span>微信</span></div></div></div></article></main><footer class=footer><div class=footer-container><div class="footer-line custom">Hava a great day !</div><div class="footer-line copyright" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2018 - 2024</span><span class=author itemprop=copyrightHolder>
<a href=/></a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label=回到顶部><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class="variant-numeric d-none">0%</span></div></div><a href=https://github.com/shuzang/shuzang.github.io title="View source on GitHub" target=_blank rel="external nofollow" class="github-corner right d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div id=mask></div><div class=reading-progress-bar style=left:0;top:0></div><noscript><div class=noscript-warning>FixIt 主题在启用 JavaScript 的情况下效果最佳。</div></noscript></div><link rel=stylesheet href=https://unpkg.com/lightgallery@2.6.1/css/lightgallery-bundle.min.css><link rel=preload href=https://unpkg.com/katex@0.16.2/dist/katex.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://unpkg.com/katex@0.16.2/dist/katex.min.css></noscript><link rel=stylesheet href=https://unpkg.com/pace-js@1.2.4/themes/blue/pace-theme-minimal.css><script src=https://unpkg.com/autocomplete.js@0.38.1/dist/autocomplete.min.js defer></script><script src=https://unpkg.com/fuse.js@6.6.2/dist/fuse.min.js defer></script><script src=https://unpkg.com/twemoji@14.0.2/dist/twemoji.min.js defer></script><script src=https://unpkg.com/lightgallery@2.6.1/lightgallery.min.js defer></script><script src=https://unpkg.com/lightgallery@2.6.1/plugins/thumbnail/lg-thumbnail.min.js defer></script><script src=https://unpkg.com/lightgallery@2.6.1/plugins/zoom/lg-zoom.min.js defer></script><script src=https://unpkg.com/sharer.js@0.5.1/sharer.min.js async defer></script><script src=https://unpkg.com/katex@0.16.2/dist/katex.min.js defer></script><script src=https://unpkg.com/katex@0.16.2/dist/contrib/auto-render.min.js defer></script><script src=https://unpkg.com/katex@0.16.2/dist/contrib/copy-tex.min.js defer></script><script src=https://unpkg.com/katex@0.16.2/dist/contrib/mhchem.min.js defer></script><script src=https://unpkg.com/pangu@4.0.7/dist/browser/pangu.min.js defer></script><script src=https://unpkg.com/pace-js@1.2.4/pace.min.js async defer></script><script>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:10},comment:{enable:!1},lightgallery:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},pangu:{enable:!0,selector:"article"},search:{distance:100,findAllMatches:!1,fuseIndexURL:"/index.json",highlightTag:"em",ignoreFieldNorm:!1,ignoreLocation:!1,isCaseSensitive:!1,location:0,maxResultLength:10,minMatchCharLength:2,noResultsFound:"没有找到结果",snippetLength:30,threshold:.3,type:"fuse",useExtendedSearch:!1},twemoji:!0}</script><script src=/js/theme.min.js defer></script></body></html>