<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>Bash脚本语法1 - Shuzang's Blog</title><meta name=author content="Shuzang"><meta name=author-link content><meta name=description content="很多时候都要求能使用 Shell 脚本进行编程，本文是根据阮一峰大神的 系列教程 总结的基本知识。"><meta name=keywords content="linux"><meta itemprop=name content="Bash脚本语法1"><meta itemprop=description content="很多时候都要求能使用 Shell 脚本进行编程，本文是根据阮一峰大神的 系列教程 总结的基本知识。"><meta itemprop=datePublished content="2020-08-18T11:37:00+08:00"><meta itemprop=dateModified content="2020-08-18T00:00:00+00:00"><meta itemprop=wordCount content="4270"><meta itemprop=image content="https://shuzang.github.io/logo.png"><meta itemprop=keywords content="linux,"><meta property="og:title" content="Bash脚本语法1"><meta property="og:description" content="很多时候都要求能使用 Shell 脚本进行编程，本文是根据阮一峰大神的 系列教程 总结的基本知识。"><meta property="og:type" content="article"><meta property="og:url" content="https://shuzang.github.io/2020/bash-script-grammer-1/"><meta property="og:image" content="https://shuzang.github.io/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-08-18T11:37:00+08:00"><meta property="article:modified_time" content="2020-08-18T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://shuzang.github.io/logo.png"><meta name=twitter:title content="Bash脚本语法1"><meta name=twitter:description content="很多时候都要求能使用 Shell 脚本进行编程，本文是根据阮一峰大神的 系列教程 总结的基本知识。"><meta name=application-name content="Shuzang's Blog"><meta name=apple-mobile-web-app-title content="Shuzang's Blog"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=https://shuzang.github.io/2020/bash-script-grammer-1/><link rel=prev href=https://shuzang.github.io/2020/operate-system-6-file-management/><link rel=next href=https://shuzang.github.io/2020/bash-script-grammer-2/><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=https://unpkg.com/@fortawesome/fontawesome-free@6.2.0/css/all.min.css><link rel=stylesheet href=https://unpkg.com/animate.css@4.1.1/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Bash脚本语法1","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/shuzang.github.io\/2020\/bash-script-grammer-1\/"},"genre":"posts","keywords":"linux","wordcount":4270,"url":"https:\/\/shuzang.github.io\/2020\/bash-script-grammer-1\/","datePublished":"2020-08-18T11:37:00+08:00","dateModified":"2020-08-18T00:00:00+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Shuzang"},"description":""}</script></head><body data-header-desktop=sticky data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper data-page-style=normal><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper data-github-corner=right><div class=header-title><a href=/ title="Shuzang's Blog"><img loading=lazy src=/images/avatar.png srcset="/images/avatar.png, /images/avatar.png 1.5x, /images/avatar.png 2x" sizes=auto data-title="Shuzang's Blog" data-alt="Shuzang's Blog" class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>Shuzang's Blog</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 文章</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li><li class=menu-item><a class=menu-link href=/collection/><i class="fa-solid fa-bookmark fa-fw fa-sm" aria-hidden=true></i> 集子</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> 关于</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder=搜索文章标题或内容…… id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Shuzang's Blog"><img loading=lazy src=/images/avatar.png srcset="/images/avatar.png, /images/avatar.png 1.5x, /images/avatar.png 2x" sizes=auto data-title=/images/avatar.png data-alt=/images/avatar.png class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>Shuzang's Blog</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容…… id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></li><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 文章</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li><li class=menu-item><a class=menu-link href=/collection/><i class="fa-solid fa-bookmark fa-fw fa-sm" aria-hidden=true></i> 集子</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> 关于</a></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=container><aside class=toc id=toc-auto><h2 class=toc-title>目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>Bash脚本语法1</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><span class=author><i class="fa-solid fa-user-circle" aria-hidden=true></i>
Shuzang</span></span>
<span class=post-category>收录于 <a href=/categories/%E7%88%B1%E7%BC%96%E7%A8%8B%E7%88%B1%E6%8A%80%E6%9C%AF%E7%9A%84%E5%AD%A9%E5%AD%90/><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> 爱编程爱技术的孩子</a></span></div><div class=post-meta-line><span title="发布于 2020-08-18 11:37:00"><i class="fa-regular fa-calendar-alt fa-fw me-1" aria-hidden=true></i><time datetime=2020-08-18>2020-08-18</time></span>&nbsp;<span title="更新于 2020-08-18 00:00:00"><i class="fa-regular fa-edit fa-fw me-1" aria-hidden=true></i><time datetime=2020-08-18>2020-08-18</time></span>&nbsp;<span><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden=true></i>约 4270 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden=true></i>预计阅读 9 分钟</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#1-shell-和-bash>1. Shell 和 Bash</a></li><li><a href=#2-预备知识>2. 预备知识</a></li><li><a href=#3-模式扩展>3. 模式扩展</a></li><li><a href=#4-变量>4. 变量</a><ul><li><a href=#41-创建变量>4.1 创建变量</a></li><li><a href=#42-读取变量>4.2 读取变量</a></li><li><a href=#43-删除变量>4.3 删除变量</a></li><li><a href=#44-输出变量>4.4 输出变量</a></li></ul></li><li><a href=#5-脚本>5. 脚本</a><ul><li><a href=#51-shebang行>5.1 Shebang行</a></li><li><a href=#52-执行权限和路径>5.2 执行权限和路径</a></li><li><a href=#53-脚本参数>5.3 脚本参数</a></li><li><a href=#54-命令执行>5.4 命令执行</a></li><li><a href=#55-别名>5.5 别名</a></li></ul></li><li><a href=#6-用户输入>6. 用户输入</a></li></ul></nav></div></div><div class=content id=content><div class="details admonition warning open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-exclamation-triangle fa-fw" aria-hidden=true></i>警告<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>本文最后更新于 2020-08-18，文中内容可能已过时。</div></div></div><p>很多时候都要求能使用 Shell 脚本进行编程，本文是根据阮一峰大神的 <a href=https://wangdoc.com/bash/intro.html target=_blank rel="external nofollow noopener noreferrer">系列教程</a> 总结的基本知识。</p><h2 id=1-shell-和-bash>1. Shell 和 Bash</h2><p>Shell 是一个程序，为用户提供和内核的交互界面，一般由用户从键盘输入命令，然后送给操作系统指向，执行完毕将结果返回给用户，因此又称为命令行环境。</p><p>只要能给用户提供命令行界面用于和内核交互，就叫 Shell，因此 Shell 有很多种，比如</p><ul><li>Bourne Shell（sh）</li><li>Bourne Again shell（bash）</li><li>C Shell（csh）</li></ul><p>Bash 是目前最常用的 Shell，一般也是默认的 Shell。</p><p>具有图形界面的 Linux 打开的命令行一般是终端模拟器，顾名思义，就是模拟命令行环境的，不是真正的命令行，但使用和直接使用非图形界面的命令行没有区别。因此我们随后不区分终端和命令行，全部使用命令行这个称呼。</p><p>图形界面下使用 <code>Ctrl + Alt + T</code> 打开命令行，默认位于用户主目录 <code>~</code>，提示符为美元符号 <code>$</code>，输入 <code>exit</code> 命令或使用快捷键 <code>Ctrl + D</code> 退出当前命令行。</p><h2 id=2-预备知识>2. 预备知识</h2><p>使用 <code>echo</code> 命令可以在屏幕上输入文本，添加引号可以输出多行文本，添加 <code>-e</code> 参数会解释引号中的特殊字符。该命令经常使用。</p><div class=highlight id=id-1><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>echo</span> hello world
</span></span><span class=line><span class=cl>hello world
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ <span class=nb>echo</span> <span class=s2>&#34;hello
</span></span></span><span class=line><span class=cl><span class=s2>world&#34;</span>
</span></span><span class=line><span class=cl>hello
</span></span><span class=line><span class=cl>world
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ <span class=nb>echo</span> -e <span class=s2>&#34;hello\nworld&#34;</span>
</span></span><span class=line><span class=cl>hello
</span></span><span class=line><span class=cl>world</span></span></code></pre></td></tr></table></div></div><p>Bash 单个命令一般都是一行，按下回车开始执行，比较长的命令可以写成多行，只需要在每一行的末尾加上反斜杠即可</p><div class=highlight id=id-2><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>echo</span> foo <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>bar
</span></span><span class=line><span class=cl>foo bar</span></span></code></pre></td></tr></table></div></div><p><code>&&</code> 和 <code>||</code> 用于连接两个命令，前者的含义是如果第一个命令执行成功，执行第二个命令；后者的含义是如果第一个命令执行失败，执行第二个命令，第一个命令执行成功就不会执行第二个命令了。</p><div class=highlight id=id-3><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ mkdir foo <span class=o>&amp;&amp;</span> ls foo
</span></span><span class=line><span class=cl>$ mkdir foo <span class=o>||</span> mkdir bar
</span></span><span class=line><span class=cl>mkdir: 无法创建目录 “foo”: 文件已存在
</span></span><span class=line><span class=cl>$ ls 
</span></span><span class=line><span class=cl>foo bar</span></span></code></pre></td></tr></table></div></div><p>Bash 只有一种数据类型，就是字符串。不管用户输入什么数据，Bash 都视为字符串。</p><p>还有一些实用的快捷键</p><ul><li><code>Ctrl + L</code>：清除屏幕并将当前行移到页面顶部。</li><li><code>Ctrl + C</code>：中止当前正在执行的命令。</li><li><code>Shift + PageUp</code>：向上滚动。</li><li><code>Shift + PageDown</code>：向下滚动。</li><li><code>Ctrl + U</code>：从光标位置删除到行首。</li><li><code>Ctrl + K</code>：从光标位置删除到行尾。</li><li><code>↑</code>，<code>↓</code>：浏览已执行命令的历史记录。</li><li><code>Tab</code>：补全未完全输入的命令或路径</li></ul><h2 id=3-模式扩展>3. 模式扩展</h2><p>用户输入的命令中有时包括一些特殊的字符，Shell 会先对这些字符进行替换，然后才开始执行，这个过程叫做模式扩展。Shell 提供 8 种模式扩展。</p><ol><li><p><code>~</code>：用户主目录</p></li><li><p><code>?</code>：单个字符，但不包括空字符</p></li><li><p><code>*</code>：任意数量的任意字符，包括 0 个</p></li><li><p><code>[...]</code>：匹配方括号中出现的任意字符，如果前面加了 <code>^</code> 或 <code>!</code> 表示匹配方括号中没有出现的字符</p><div class=highlight id=id-4><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 只存在文件 a.txt</span>
</span></span><span class=line><span class=cl>$ ls <span class=o>[</span>ab<span class=o>]</span>.txt
</span></span><span class=line><span class=cl>a.txt
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 存在 aaa、bbb、aba 三个文件</span>
</span></span><span class=line><span class=cl>$ ls ?<span class=o>[</span>!a<span class=o>]</span>?
</span></span><span class=line><span class=cl>aba bbb</span></span></code></pre></td></tr></table></div></div><p><code>[start-end]</code>：匹配一个连续的范围，同样，实用 <code>!</code> 可以匹配不属于该范围的字符</p><div class=highlight id=id-5><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 存在文件 a.txt、b.txt 和 c.txt</span>
</span></span><span class=line><span class=cl>$ ls <span class=o>[</span>a-c<span class=o>]</span>.txt
</span></span><span class=line><span class=cl>a.txt
</span></span><span class=line><span class=cl>b.txt
</span></span><span class=line><span class=cl>c.txt</span></span></code></pre></td></tr></table></div></div></li><li><p><code>{...}</code>：匹配大括号中的所有字符</p><div class=highlight id=id-6><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>echo</span> d<span class=o>{</span>a,e,i,u,o<span class=o>}</span>g
</span></span><span class=line><span class=cl>dag deg dig dug dog</span></span></code></pre></td></tr></table></div></div><p><code>{start...end}</code>：扩展成一个连续序列</p><div class=highlight id=id-7><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>echo</span> <span class=o>{</span>1..4<span class=o>}</span>
</span></span><span class=line><span class=cl><span class=m>1</span> <span class=m>2</span> <span class=m>3</span> <span class=m>4</span></span></span></code></pre></td></tr></table></div></div></li><li><p><code>$</code>：将 <code>$</code> 开头的变量替换为变量的值</p><div class=highlight id=id-8><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>echo</span> <span class=nv>$SHELL</span>
</span></span><span class=line><span class=cl>/bin/bash</span></span></code></pre></td></tr></table></div></div></li><li><p><code>$(...)</code>：扩展成另一个命令的运行结果，该命令所有输出都作为返回值</p><div class=highlight id=id-9><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>echo</span> <span class=k>$(</span>date<span class=k>)</span>
</span></span><span class=line><span class=cl>Tue Jan <span class=m>28</span> 00:01:13 CST <span class=m>2020</span></span></span></code></pre></td></tr></table></div></div></li><li><p><code>$((...))</code>：扩展成整数运算的结果</p><div class=highlight id=id-10><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>echo</span> <span class=k>$((</span><span class=m>2</span> <span class=o>+</span> <span class=m>2</span><span class=k>))</span>
</span></span><span class=line><span class=cl><span class=m>4</span></span></span></code></pre></td></tr></table></div></div></li></ol><p>模式扩展先于正则表达式出现，可以看作原始的正则表达式，但没有正则表达式灵活。</p><h2 id=4-变量>4. 变量</h2><p>用<code>env</code>命令显示所有环境变量，<code>echo</code>命令查看单个环境变量的值</p><div class=highlight id=id-11><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ env
</span></span><span class=line><span class=cl>$ <span class=nb>echo</span> <span class=nv>$PATH</span></span></span></code></pre></td></tr></table></div></div><p>BASH 的变量名区分大小写，由于环境变量一般使用全大写，用户自定义变量一般也使用全大写。</p><h3 id=41-创建变量>4.1 创建变量</h3><p>变量声明语法如下，等号两边不可有空格</p><div class=highlight id=id-12><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>variable</span><span class=o>=</span>value</span></span></code></pre></td></tr></table></div></div><p>如果变量的值中有空格，使用引号包围</p><div class=highlight id=id-13><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>myvar</span><span class=o>=</span><span class=s2>&#34;hello world&#34;</span></span></span></code></pre></td></tr></table></div></div><p>BASH 没有数据类型的概念，所有变量都是字符串。</p><p>下面是一些自定义变量的例子。</p><div class=highlight id=id-14><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>a</span><span class=o>=</span>z                     <span class=c1># 变量 a 赋值为字符串 z</span>
</span></span><span class=line><span class=cl><span class=nv>b</span><span class=o>=</span><span class=s2>&#34;a string&#34;</span>            <span class=c1># 变量值包含空格，就必须放在引号里面</span>
</span></span><span class=line><span class=cl><span class=nv>c</span><span class=o>=</span><span class=s2>&#34;a string and </span><span class=nv>$b</span><span class=s2>&#34;</span>     <span class=c1># 变量值可以引用其他变量的值</span>
</span></span><span class=line><span class=cl><span class=nv>d</span><span class=o>=</span><span class=s2>&#34;\t\ta string\n&#34;</span>      <span class=c1># 变量值可以使用转义字符，echo 输出要加 -e 参数</span>
</span></span><span class=line><span class=cl><span class=nv>e</span><span class=o>=</span><span class=k>$(</span>ls -l foo.txt<span class=k>)</span>      <span class=c1># 变量值可以是命令的执行结果</span>
</span></span><span class=line><span class=cl><span class=nv>f</span><span class=o>=</span><span class=k>$((</span><span class=m>5</span> <span class=o>*</span> <span class=m>7</span><span class=k>))</span>            <span class=c1># 变量值可以是数学运算的结果</span></span></span></code></pre></td></tr></table></div></div><p>变量可以重复赋值，后面的赋值会覆盖前面的赋值。</p><div class=highlight id=id-15><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nv>foo</span><span class=o>=</span><span class=m>1</span>
</span></span><span class=line><span class=cl>$ <span class=nv>foo</span><span class=o>=</span><span class=m>2</span>
</span></span><span class=line><span class=cl>$ <span class=nb>echo</span> <span class=nv>$foo</span>
</span></span><span class=line><span class=cl><span class=m>2</span></span></span></code></pre></td></tr></table></div></div><p>上面例子中，变量<code>foo</code>的第二次赋值会覆盖第一次赋值。</p><h3 id=42-读取变量>4.2 读取变量</h3><p>读取变量的时候，直接在变量名前加上<code>$</code>就可以了。</p><div class=highlight id=id-16><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nv>foo</span><span class=o>=</span>bar
</span></span><span class=line><span class=cl>$ <span class=nb>echo</span> <span class=nv>$foo</span>
</span></span><span class=line><span class=cl>bar</span></span></code></pre></td></tr></table></div></div><p>如果变量不存在，Bash 不会报错，而会输出空字符。</p><p>读取变量的时候，变量名也可以使用花括号<code>{}</code>包围，比如<code>$a</code>也可以写成<code>${a}</code>。这种写法可以用于变量名与其他字符连用的情况。</p><div class=highlight id=id-17><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nv>a</span><span class=o>=</span>foo
</span></span><span class=line><span class=cl>$ <span class=nb>echo</span> <span class=nv>$a_file</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ <span class=nb>echo</span> <span class=si>${</span><span class=nv>a</span><span class=si>}</span>_file
</span></span><span class=line><span class=cl>foo_file</span></span></code></pre></td></tr></table></div></div><h3 id=43-删除变量>4.3 删除变量</h3><p><code>unset</code>命令用来删除一个变量。</p><div class=highlight id=id-18><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>unset</span> NAME</span></span></code></pre></td></tr></table></div></div><p>这个命令不是很有用。因为不存在的 Bash 变量一律等于空字符串，所以即使<code>unset</code>命令删除了变量，还是可以读取这个变量，值为空字符串。</p><p>所以，删除一个变量，也可以将这个变量设成空字符串。</p><div class=highlight id=id-19><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nv>foo</span><span class=o>=</span><span class=s1>&#39;&#39;</span>
</span></span><span class=line><span class=cl>$ <span class=nv>foo</span><span class=o>=</span></span></span></code></pre></td></tr></table></div></div><h3 id=44-输出变量>4.4 输出变量</h3><p>用户创建的变量仅可用于当前 Shell，子 Shell 默认读取不到父 Shell 定义的变量。为了把变量传递给子 Shell，需要使用<code>export</code>命令。这样输出的变量，对于子 Shell 来说就是环境变量。</p><p><code>export</code>命令用来向子 Shell 输出变量。</p><div class=highlight id=id-20><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>NAME</span><span class=o>=</span>foo
</span></span><span class=line><span class=cl><span class=nb>export</span> NAME</span></span></code></pre></td></tr></table></div></div><p>上面命令输出了变量<code>NAME</code>。变量的赋值和输出也可以在一个步骤中完成。</p><div class=highlight id=id-21><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>export</span> <span class=nv>NAME</span><span class=o>=</span>value</span></span></code></pre></td></tr></table></div></div><p>上面命令执行后，当前 Shell 及随后新建的子 Shell，都可以读取变量<code>$NAME</code>。</p><p>子 Shell 如果修改继承的变量，不会影响父 Shell。</p><div class=highlight id=id-22><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 输出变量 $foo</span>
</span></span><span class=line><span class=cl>$ <span class=nb>export</span> <span class=nv>foo</span><span class=o>=</span>bar
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 新建子 Shell</span>
</span></span><span class=line><span class=cl>$ bash
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 读取 $foo</span>
</span></span><span class=line><span class=cl>$ <span class=nb>echo</span> <span class=nv>$foo</span>
</span></span><span class=line><span class=cl>bar
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 修改继承的变量</span>
</span></span><span class=line><span class=cl>$ <span class=nv>foo</span><span class=o>=</span>baz
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 退出子 Shell</span>
</span></span><span class=line><span class=cl>$ <span class=nb>exit</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 读取 $foo</span>
</span></span><span class=line><span class=cl>$ <span class=nb>echo</span> <span class=nv>$foo</span>
</span></span><span class=line><span class=cl>bar</span></span></code></pre></td></tr></table></div></div><h2 id=5-脚本>5. 脚本</h2><p>脚本（script）就是包含一系列命令的一个文本文件。Shell 读取这个文件，依次执行里面的所有命令，就好像这些命令直接输入到命令行一样。所有能够在命令行完成的任务，都能够用脚本完成。</p><p>Bash 脚本使用 <code>#</code> 声明注释</p><h3 id=51-shebang行>5.1 Shebang行</h3><p>脚本的第一行通常是指定解释器，即这个脚本必须通过什么解释器执行。这一行以<code>#!</code>字符开头，这个字符称为 Shebang，所以这一行就叫做 Shebang 行。</p><p><code>#!</code>后面就是脚本解释器的位置，Bash 脚本的解释器一般是<code>/bin/sh</code>或<code>/bin/bash</code>。</p><div class=highlight id=id-23><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/sh
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1># 或者</span>
</span></span><span class=line><span class=cl><span class=c1>#!/bin/bash</span></span></span></code></pre></td></tr></table></div></div><h3 id=52-执行权限和路径>5.2 执行权限和路径</h3><p>指定了 Shebang 行的脚本，需要赋予执行权限才可以直接执行。</p><p>权限的设定有两种格式，一种是字母格式，（r, w, x）分别表示读、写、执行，（u, g, o）分别表示脚本所有者、同组用户、其它用户，（+, -, =）分别表示增加权限、取消权限和设置唯一权限。所有的权限设定命令都是这些参数的组合，举例</p><div class=highlight id=id-24><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 给所有用户执行权限</span>
</span></span><span class=line><span class=cl>$ chmod +x script.sh
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 只给脚本拥有者读权限和执行权限</span>
</span></span><span class=line><span class=cl>$ chmod u+rx script.sh</span></span></code></pre></td></tr></table></div></div><p>权限还可以以数字方式设定，我们令 r=4, w=2, x=1，权限的组合就是这些操作权重的组合，权限授予的用户就是数字的位置，举例</p><div class=highlight id=id-25><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 给脚本所有者全部权限，给同组和其它用户读权限和执行权限</span>
</span></span><span class=line><span class=cl>$ chmod <span class=m>755</span> script.sh</span></span></code></pre></td></tr></table></div></div><h3 id=53-脚本参数>5.3 脚本参数</h3><p>调用脚本的时候，脚本文件名后面可以带有参数。</p><div class=highlight id=id-26><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>$ script.sh word1 word2 word3</span></span></code></pre></td></tr></table></div></div><p>脚本文件内部，可以使用特殊变量，引用这些参数。</p><ul><li><code>$0</code>：脚本文件名，即<code>script.sh</code>。</li><li><code>$1</code>~<code>$9</code>：对应脚本的第一个参数到第九个参数。</li><li><code>$#</code>：参数的总数。</li><li><code>$@</code>：全部的参数，参数之间使用空格分隔。</li><li><code>$*</code>：全部的参数，参数之间使用变量<code>$IFS</code>值的第一个字符分隔，默认为空格，但是可以自定义。</li></ul><p>如果脚本的参数多于9个，那么第10个参数可以用<code>${10}</code>的形式引用，以此类推。</p><p>用户可以输入任意数量的参数，利用<code>for</code>循环，可以读取每一个参数。</p><div class=highlight id=id-27><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=k>for</span> i in <span class=s2>&#34;</span><span class=nv>$@</span><span class=s2>&#34;</span><span class=p>;</span> <span class=k>do</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=nv>$i</span>
</span></span><span class=line><span class=cl><span class=k>done</span></span></span></code></pre></td></tr></table></div></div><p>注1，如果命令是<code>command -o foo bar</code>，那么<code>-o</code>是<code>$1</code>，<code>foo</code>是<code>$2</code>，<code>bar</code>是<code>$3</code>。</p><p>注2，如果命令是<code>./script.sh "a b"</code>，即多个参数放在双引号里面，视为一个参数。</p><h3 id=54-命令执行>5.4 命令执行</h3><p><code>exit</code>命令用于终止当前脚本的执行，并向 Shell 返回一个退出值。</p><div class=highlight id=id-28><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ exit</span></span></code></pre></td></tr></table></div></div><p>上面命令中止当前脚本，将最后一条命令的退出状态，作为整个脚本的退出状态。</p><p><code>exit</code>命令后面可以跟参数，该参数就是退出状态。</p><div class=highlight id=id-29><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 退出值为0（成功）</span>
</span></span><span class=line><span class=cl>$ <span class=nb>exit</span> <span class=m>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 退出值为1（失败）</span>
</span></span><span class=line><span class=cl>$ <span class=nb>exit</span> <span class=m>1</span></span></span></code></pre></td></tr></table></div></div><p>可以使用 <code>$?</code> 判断上一条命令的执行结果控制脚本的执行</p><div class=highlight id=id-30><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> <span class=nv>$some_directory</span>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=o>[</span> <span class=s2>&#34;</span><span class=nv>$?</span><span class=s2>&#34;</span> <span class=o>=</span> <span class=s2>&#34;0&#34;</span> <span class=o>]</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>  rm *
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;无法切换目录！&#34;</span> 1&gt;<span class=p>&amp;</span><span class=m>2</span>
</span></span><span class=line><span class=cl>  <span class=nb>exit</span> <span class=m>1</span>
</span></span><span class=line><span class=cl><span class=k>fi</span></span></span></code></pre></td></tr></table></div></div><p>使用 <code>if</code> 命令可以直接判断</p><div class=highlight id=id-31><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=k>if</span> <span class=nb>cd</span> <span class=nv>$some_directory</span><span class=p>;</span> <span class=k>then</span>
</span></span><span class=line><span class=cl>  rm *
</span></span><span class=line><span class=cl><span class=k>else</span>
</span></span><span class=line><span class=cl>  <span class=nb>echo</span> <span class=s2>&#34;Could not change directory! Aborting.&#34;</span> 1&gt;<span class=p>&amp;</span><span class=m>2</span>
</span></span><span class=line><span class=cl>  <span class=nb>exit</span> <span class=m>1</span>
</span></span><span class=line><span class=cl><span class=k>fi</span></span></span></code></pre></td></tr></table></div></div><p>最简便的方法是使用逻辑连接符</p><div class=highlight id=id-32><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># 第一步执行成功，才会执行第二步</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> <span class=nv>$some_directory</span> <span class=o>&amp;&amp;</span> rm *
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># 第一步执行失败，才会执行第二步</span>
</span></span><span class=line><span class=cl><span class=nb>cd</span> <span class=nv>$some_directory</span> <span class=o>||</span> <span class=nb>exit</span> <span class=m>1</span></span></span></code></pre></td></tr></table></div></div><p><code>source</code>命令用于执行一个脚本，通常用于重新加载一个配置文件。</p><div class=highlight id=id-33><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>source</span> .bashrc</span></span></code></pre></td></tr></table></div></div><p><code>source</code>命令最大的特点是在当前 Shell 执行脚本，不像直接执行脚本时，会新建一个子 Shell。所以，<code>source</code>命令执行脚本时，不需要<code>export</code>变量。</p><div class=highlight id=id-34><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1># test.sh</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=nv>$foo</span></span></span></code></pre></td></tr></table></div></div><p><code>source</code>有一个简写形式，可以使用一个点（<code>.</code>）来表示。</p><div class=highlight id=id-35><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ . script.sh</span></span></code></pre></td></tr></table></div></div><p>注意，要区分 <code>. script.sh</code> 和 <code>./script.sh</code></p><h3 id=55-别名>5.5 别名</h3><p><code>alias</code>命令用来为一个命令指定别名，这样更便于记忆。下面是<code>alias</code>的格式。</p><div class=highlight id=id-36><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>alias</span> <span class=nv>NAME</span><span class=o>=</span>DEFINITION</span></span></code></pre></td></tr></table></div></div><p>上面命令中，<code>NAME</code>是别名的名称，<code>DEFINITION</code>是别名对应的原始命令。注意，等号两侧不能有空格，否则会报错。</p><p>一个常见的例子是为<code>grep</code>命令起一个<code>search</code>的别名。</p><div class=highlight id=id-37><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>alias</span> <span class=nv>search</span><span class=o>=</span>grep</span></span></code></pre></td></tr></table></div></div><p><code>alias</code>也可以用来为长命令指定一个更短的别名。下面是通过别名定义一个<code>today</code>的命令。</p><div class=highlight id=id-38><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>alias</span> <span class=nv>today</span><span class=o>=</span><span class=s1>&#39;date +&#34;%A, %B %-d, %Y&#34;&#39;</span>
</span></span><span class=line><span class=cl>$ today
</span></span><span class=line><span class=cl>星期一, 一月 6, <span class=m>2020</span></span></span></code></pre></td></tr></table></div></div><p>有时为了防止误删除文件，可以指定<code>rm</code>命令的别名。</p><div class=highlight id=id-39><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>alias</span> <span class=nv>rm</span><span class=o>=</span><span class=s1>&#39;rm -i&#39;</span></span></span></code></pre></td></tr></table></div></div><p>上面命令指定<code>rm</code>命令是<code>rm -i</code>，每次删除文件之前，都会让用户确认。</p><h2 id=6-用户输入>6. 用户输入</h2><p>有时，脚本需要在执行过程中，由用户提供一部分数据，这时可以使用<code>read</code>命令。它将用户的输入存入一个变量，方便后面的代码使用。用户按下回车键，就表示输入结束。</p><p><code>read</code>命令的格式如下。</p><div class=highlight id=id-40><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>read</span> <span class=o>[</span>-options<span class=o>]</span> <span class=o>[</span>variable...<span class=o>]</span></span></span></code></pre></td></tr></table></div></div><p>上面语法中，<code>options</code>是参数选项，<code>variable</code>是用来保存输入数值的一个或多个变量名。如果没有提供变量名，环境变量<code>REPLY</code>会包含用户输入的一整行数据。</p><p>下面是一个例子<code>demo.sh</code>。</p><div class=highlight id=id-41><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> -n <span class=s2>&#34;输入一些文本 &gt; &#34;</span>
</span></span><span class=line><span class=cl><span class=nb>read</span> text
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;你的输入：</span><span class=nv>$text</span><span class=s2>&#34;</span></span></span></code></pre></td></tr></table></div></div><p>上面例子中，先显示一行提示文本，然后会等待用户输入文本。用户输入的文本，存入变量<code>text</code>，在下一行显示出来。</p><div class=highlight id=id-42><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ bash demo.sh
</span></span><span class=line><span class=cl>输入一些文本 &gt; 你好，世界
</span></span><span class=line><span class=cl>你的输入：你好，世界</span></span></code></pre></td></tr></table></div></div><p><code>read</code>可以接受用户输入的多个值。</p><div class=highlight id=id-43><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=nb>echo</span> Please, enter your firstname and lastname
</span></span><span class=line><span class=cl><span class=nb>read</span> FN LN
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;Hi! </span><span class=nv>$LN</span><span class=s2>, </span><span class=nv>$FN</span><span class=s2> !&#34;</span></span></span></code></pre></td></tr></table></div></div><p>上面例子中，<code>read</code>根据用户的输入，同时为两个变量赋值。</p><p>如果用户的输入项少于<code>read</code>命令给出的变量数目，那么额外的变量值为空。如果用户的输入项多于定义的变量，那么多余的输入项会包含到最后一个变量中。</p><p>如果<code>read</code>命令之后没有定义变量名，那么环境变量<code>REPLY</code>会包含所有的输入。</p><div class=highlight id=id-44><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=cp>#!/bin/bash
</span></span></span><span class=line><span class=cl><span class=cp></span><span class=c1># read-single: read multiple values into default variable</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> -n <span class=s2>&#34;Enter one or more values &gt; &#34;</span>
</span></span><span class=line><span class=cl><span class=nb>read</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=s2>&#34;REPLY = &#39;</span><span class=nv>$REPLY</span><span class=s2>&#39;&#34;</span></span></span></code></pre></td></tr></table></div></div><p>上面脚本的运行结果如下。</p><div class=highlight id=id-45><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ read-single
</span></span><span class=line><span class=cl>Enter one or more values &gt; a b c d
</span></span><span class=line><span class=cl><span class=nv>REPLY</span> <span class=o>=</span> <span class=s1>&#39;a b c d&#39;</span></span></span></code></pre></td></tr></table></div></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="更新于 2020-08-18 00:00:00">更新于 2020-08-18&nbsp;</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md><span><a href=/2020/bash-script-grammer-1/index.md title=阅读原始文档 class=link-to-markdown>阅读原始文档</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Pocket" data-sharer=pocket data-url=https://shuzang.github.io/2020/bash-script-grammer-1/><i class="fa-brands fa-get-pocket fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://shuzang.github.io/2020/bash-script-grammer-1/ data-title=Bash脚本语法1><i class="fa-brands fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/tags/linux/ class=post-tag>linux</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/2020/operate-system-6-file-management/ class=post-nav-item rel=prev title=操作系统6-文件管理><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>操作系统6-文件管理</a>
<a href=/2020/bash-script-grammer-2/ class=post-nav-item rel=next title=Bash脚本语法2>Bash脚本语法2<i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div class=post-reward><div class=comment></div><input type=checkbox class=reward-input name=reward id=fi-reward hidden>
<label class=reward-button for=fi-reward>赞赏</label><div class=reward-ways data-mode=static><div><img loading=lazy src=/images/alipay.png srcset="/images/alipay.png, /images/alipay.png 1.5x, /images/alipay.png 2x" sizes=auto data-title="Shuzang 支付宝" data-alt="Shuzang 支付宝" style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span>支付宝</span></div><div><img loading=lazy src=/images/wechatpay.png srcset="/images/wechatpay.png, /images/wechatpay.png 1.5x, /images/wechatpay.png 2x" sizes=auto data-title="Shuzang 微信" data-alt="Shuzang 微信" style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span>微信</span></div></div></div></article></main><footer class=footer><div class=footer-container><div class="footer-line custom">Hava a great day !</div><div class="footer-line copyright" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2018 - 2023</span><span class=author itemprop=copyrightHolder>
<a href=/>Shuzang</a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label=回到顶部><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class="variant-numeric d-none">0%</span></div></div><a href=https://github.com/shuzang/shuzang.github.io title="View source on GitHub" target=_blank rel="external nofollow" class="github-corner right d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div id=mask></div><div class=reading-progress-bar style=left:0;top:0></div><noscript><div class=noscript-warning>FixIt 主题在启用 JavaScript 的情况下效果最佳。</div></noscript></div><link rel=stylesheet href=https://unpkg.com/lightgallery@2.6.1/css/lightgallery-bundle.min.css><link rel=stylesheet href=https://unpkg.com/katex@0.16.2/dist/katex.min.css><link rel=stylesheet href=https://unpkg.com/pace-js@1.2.4/themes/blue/pace-theme-minimal.css><script src=https://unpkg.com/autocomplete.js@0.38.1/dist/autocomplete.min.js defer></script><script src=https://unpkg.com/fuse.js@6.6.2/dist/fuse.min.js defer></script><script src=https://unpkg.com/twemoji@14.0.2/dist/twemoji.min.js defer></script><script src=https://unpkg.com/lightgallery@2.6.1/lightgallery.min.js defer></script><script src=https://unpkg.com/lightgallery@2.6.1/plugins/thumbnail/lg-thumbnail.min.js defer></script><script src=https://unpkg.com/lightgallery@2.6.1/plugins/zoom/lg-zoom.min.js defer></script><script src=https://unpkg.com/sharer.js@0.5.1/sharer.min.js async defer></script><script src=https://unpkg.com/katex@0.16.2/dist/katex.min.js defer></script><script src=https://unpkg.com/katex@0.16.2/dist/contrib/auto-render.min.js defer></script><script src=https://unpkg.com/katex@0.16.2/dist/contrib/copy-tex.min.js defer></script><script src=https://unpkg.com/katex@0.16.2/dist/contrib/mhchem.min.js defer></script><script src=https://unpkg.com/pangu@4.0.7/dist/browser/pangu.min.js defer></script><script src=https://unpkg.com/pace-js@1.2.4/pace.min.js async defer></script><script>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:10},comment:{enable:!1},lightgallery:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},pangu:{enable:!0,selector:"article"},search:{distance:100,findAllMatches:!1,fuseIndexURL:"/index.json",highlightTag:"em",ignoreFieldNorm:!1,ignoreLocation:!1,isCaseSensitive:!1,location:0,maxResultLength:10,minMatchCharLength:2,noResultsFound:"没有找到结果",snippetLength:30,threshold:.3,type:"fuse",useExtendedSearch:!1},twemoji:!0}</script><script src=/js/theme.min.js defer></script></body></html>