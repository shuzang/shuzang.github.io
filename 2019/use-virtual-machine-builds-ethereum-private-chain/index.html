<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>以太坊开发1-虚拟机搭建以太坊私链 | Shuzang's Blog</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta name=Description content="书藏的个人博客，包括Golang、数据结构、算法的学习记录，各类生活技能的学习，每周五发布一期自己的生活周刊"><link rel=prev href=https://shuzang.github.io/2019/blockchain-based-platform-architecture-for-industrial-iot/><link rel=next href=https://shuzang.github.io/2019/%E4%BB%A5%E5%A4%AA%E5%9D%8A%E5%BC%80%E5%8F%912-%E5%88%9B%E4%B8%96%E5%8C%BA%E5%9D%97%E6%96%87%E4%BB%B6genesis.json/><link rel=canonical href=https://shuzang.github.io/2019/use-virtual-machine-builds-ethereum-private-chain/><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><meta name=twitter:card content="summary"><meta name=twitter:title content="以太坊开发1-虚拟机搭建以太坊私链"><meta name=twitter:description content="一、单虚拟机 最简单的方式是使用一个虚拟机，这也是在条件有限的情况下的最好选择。方法是在一台虚拟机上启用多个终端，每个终端使用不同的端口通信。"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"以太坊开发1-虚拟机搭建以太坊私链","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/shuzang.github.io\/2019\/use-virtual-machine-builds-ethereum-private-chain\/"},"image":{"@type":"ImageObject","url":"https:\/\/shuzang.github.io\/cover.png","width":800,"height":600},"genre":"posts","keywords":"区块链","wordcount":5952,"url":"https:\/\/shuzang.github.io\/2019\/use-virtual-machine-builds-ethereum-private-chain\/","datePublished":"2019-03-07T14:53:00\x2b08:00","dateModified":"2020-11-11T00:00:00\x2b00:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"shuzang","logo":{"@type":"ImageObject","url":"https:\/\/shuzang.github.io\/logo.png","width":127,"height":40}},"description":""}</script><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/css/lib/fontawesome-free/all.min.css></head><body><script>window.isDark=(window.localStorage&&window.localStorage.getItem('theme'))==='dark';window.isDark&&document.body.classList.add('dark-theme');</script><div class=wrapper><nav class=navbar><div class=top-scroll-bar></div><div class=navbar-container><div class="navbar-header animated bounceIn"><a href=https://shuzang.github.io>Shuzang's Blog</a></div><div class=navbar-menu><a class=menu-item href=https://shuzang.github.io/posts>Posts</a><a class=menu-item href=https://shuzang.github.io/tags>Tags</a><a class=menu-item href=https://shuzang.github.io/categories>Categories</a><a class=menu-item href=https://shuzang.github.io/about>About</a><a href=javascript:void(0); class=theme-switch><i class="fas fa-adjust fa-rotate-180 fa-fw" title="Switch Theme"></i></a></div></div></nav><nav class=navbar-mobile><div class=top-scroll-bar></div><div class=navbar-container><div class=navbar-header><div class="navbar-header-title animated bounceIn"><a href=https://shuzang.github.io>Shuzang's Blog</a></div><div class=menu-toggle id=menu-toggle><span></span><span></span><span></span></div></div><div class=navbar-menu id=mobile-menu><a class=menu-item href=https://shuzang.github.io/posts>Posts</a><a class=menu-item href=https://shuzang.github.io/tags>Tags</a><a class=menu-item href=https://shuzang.github.io/categories>Categories</a><a class=menu-item href=https://shuzang.github.io/about>About</a><a href=javascript:void(0); class=theme-switch><i class="fas fa-adjust fa-rotate-180 fa-fw" title="Switch Theme"></i></a></div></div></nav><main class=main><div class=container><article class=page><h1 class="post-title animated flipInX">以太坊开发1-虚拟机搭建以太坊私链</h1><div class=post-meta><i class="far fa-calendar-alt fa-fw"></i>published on&nbsp;<time datetime=2019-03-07>2019-03-07</time>&nbsp;
<i class="fas fa-pencil-alt fa-fw"></i>about 5952 words&nbsp;<span class=post-category><i class="far fa-folder fa-fw"></i>included in&nbsp;<a href=https://shuzang.github.io/categories/%E7%A0%94%E7%A9%B6%E7%94%9F%E7%9A%84%E5%8C%BA%E5%9D%97%E9%93%BE%E5%AD%A6%E4%B9%A0%E4%B9%8B%E8%B7%AF/>研究生的区块链学习之路</a>&nbsp;</span></div><div class=post-toc id=post-toc><h2 class=post-toc-title>Contents</h2><div class=post-toc-content><nav id=TableOfContents><ul><li><a href=#一单虚拟机>一、单虚拟机</a><ul><li><a href=#1-创建节点文件>1. 创建节点文件</a></li><li><a href=#2-初始化创世区块>2. 初始化创世区块</a></li><li><a href=#3-分别启动三个节点>3. 分别启动三个节点</a></li><li><a href=#4-连接各节点>4. 连接各节点</a></li></ul></li><li><a href=#二多虚拟机快速搭建>二、多虚拟机快速搭建</a><ul><li><a href=#正式搭建过程>正式搭建过程</a></li><li><a href=#补充说明>补充说明</a></li></ul></li><li><a href=#三多虚拟机详细过程>三、多虚拟机详细过程</a><ul><li><a href=#1-配置操作系统环境>1. 配置操作系统环境</a><ul><li><a href=#11-更新软件源>1.1 更新软件源</a></li><li><a href=#12-安装相关工具>1.2 安装相关工具</a></li><li><a href=#13-配置主机名>1.3 配置主机名</a></li><li><a href=#14-配置地址解析>1.4 配置地址解析</a></li><li><a href=#15-同步时间>1.5 同步时间</a></li></ul></li><li><a href=#2-配置-golang-环境>2. 配置 Golang 环境</a></li><li><a href=#3-安装部署>3. 安装部署</a><ul><li><a href=#31-获取源代码>3.1 获取源代码</a></li><li><a href=#32-创建创世区块>3.2 创建创世区块</a></li><li><a href=#33-启动服务>3.3 启动服务</a></li></ul></li><li><a href=#4-节点通信>4. 节点通信</a><ul><li><a href=#41-查看集群节点>4.1 查看集群节点</a></li><li><a href=#42-获取节点信息>4.2 获取节点信息</a></li><li><a href=#43-将-nodeb-加入-nodea>4.3 将 NodeB 加入 NodeA</a></li><li><a href=#44-查看新加入的节点>4.4 查看新加入的节点</a></li><li><a href=#45-将-nodec-加入-nodea-与-nodeb>4.5 将 NodeC 加入 NodeA 与 NodeB</a></li><li><a href=#46-查看节点加入信息>4.6 查看节点加入信息</a></li></ul></li><li><a href=#5-测试>5. 测试</a><ul><li><a href=#51-转账测试>5.1 转账测试</a></li><li><a href=#52-挖矿测试>5.2 挖矿测试</a></li><li><a href=#53-查询余额>5.3 查询余额</a></li><li><a href=#54-交易转账>5.4 交易转账</a></li></ul></li></ul></li><li><a href=#附录>附录</a><ul><li><a href=#1-创世区块配置文件参数说明>1. 创世区块配置文件参数说明</a></li><li><a href=#2-私链服务启动常见参数说明>2. 私链服务启动常见参数说明</a></li><li><a href=#3-控制台命令说明>3. 控制台命令说明</a></li></ul></li></ul></nav></div></div><div class=post-toc-mobile id=post-toc-mobile><details><summary><div class=post-toc-title><span>Contents</span>
<span><i class="details icon fas fa-angle-down"></i></span></div></summary><div class=post-toc-content><nav id=TableOfContentsMobile><ul><li><a href=#一单虚拟机>一、单虚拟机</a><ul><li><a href=#1-创建节点文件>1. 创建节点文件</a></li><li><a href=#2-初始化创世区块>2. 初始化创世区块</a></li><li><a href=#3-分别启动三个节点>3. 分别启动三个节点</a></li><li><a href=#4-连接各节点>4. 连接各节点</a></li></ul></li><li><a href=#二多虚拟机快速搭建>二、多虚拟机快速搭建</a><ul><li><a href=#正式搭建过程>正式搭建过程</a></li><li><a href=#补充说明>补充说明</a></li></ul></li><li><a href=#三多虚拟机详细过程>三、多虚拟机详细过程</a><ul><li><a href=#1-配置操作系统环境>1. 配置操作系统环境</a><ul><li><a href=#11-更新软件源>1.1 更新软件源</a></li><li><a href=#12-安装相关工具>1.2 安装相关工具</a></li><li><a href=#13-配置主机名>1.3 配置主机名</a></li><li><a href=#14-配置地址解析>1.4 配置地址解析</a></li><li><a href=#15-同步时间>1.5 同步时间</a></li></ul></li><li><a href=#2-配置-golang-环境>2. 配置 Golang 环境</a></li><li><a href=#3-安装部署>3. 安装部署</a><ul><li><a href=#31-获取源代码>3.1 获取源代码</a></li><li><a href=#32-创建创世区块>3.2 创建创世区块</a></li><li><a href=#33-启动服务>3.3 启动服务</a></li></ul></li><li><a href=#4-节点通信>4. 节点通信</a><ul><li><a href=#41-查看集群节点>4.1 查看集群节点</a></li><li><a href=#42-获取节点信息>4.2 获取节点信息</a></li><li><a href=#43-将-nodeb-加入-nodea>4.3 将 NodeB 加入 NodeA</a></li><li><a href=#44-查看新加入的节点>4.4 查看新加入的节点</a></li><li><a href=#45-将-nodec-加入-nodea-与-nodeb>4.5 将 NodeC 加入 NodeA 与 NodeB</a></li><li><a href=#46-查看节点加入信息>4.6 查看节点加入信息</a></li></ul></li><li><a href=#5-测试>5. 测试</a><ul><li><a href=#51-转账测试>5.1 转账测试</a></li><li><a href=#52-挖矿测试>5.2 挖矿测试</a></li><li><a href=#53-查询余额>5.3 查询余额</a></li><li><a href=#54-交易转账>5.4 交易转账</a></li></ul></li></ul></li><li><a href=#附录>附录</a><ul><li><a href=#1-创世区块配置文件参数说明>1. 创世区块配置文件参数说明</a></li><li><a href=#2-私链服务启动常见参数说明>2. 私链服务启动常见参数说明</a></li><li><a href=#3-控制台命令说明>3. 控制台命令说明</a></li></ul></li></ul></nav></div></details></div><div class=post-content><a class=post-dummy-target id=一单虚拟机></a><h2>一、单虚拟机</h2><p>最简单的方式是使用一个虚拟机，这也是在条件有限的情况下的最好选择。方法是在一台虚拟机上启用多个终端，每个终端使用不同的端口通信。步骤如下</p><a class=post-dummy-target id=1-创建节点文件></a><h3>1. 创建节点文件</h3><p>在<code>~Desktop</code>路径下创建NodeA、NodeB和NodeC三个文件夹，代表三个节点。在三个文件夹中分别创建<code>genesis.json</code>文件</p><a class=post-dummy-target id=2-初始化创世区块></a><h3>2. 初始化创世区块</h3><p>分别执行<code>geth init</code>命令初始化创世区块</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ geth --datadir ~/Desktop/NodeA/dataA init genesis.json
$ geth --datadir ~/Desktop/NodeB/dataB init genesis.json
$ geth --datadir ~/Desktip/NodeC/dataC init genesis.json
</code></pre></td></tr></table></div></div><a class=post-dummy-target id=3-分别启动三个节点></a><h3>3. 分别启动三个节点</h3><p>启动NodeA</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ geth --datadir ~/Desktop/NodeA/dataA --networkid <span class=m>22</span> --nodiscover console
</code></pre></td></tr></table></div></div><p>默认的端口是30303，因为三个节点在同一个操作系统中，所以接下来启动其它两个节点时我们要指定使用其它的接口</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ geth --datadir ~/Desktop/NodeA/dataB --port <span class=m>30304</span> --networkid <span class=m>22</span> --nodiscover console
$ geth --datadir ~/Desktop/NodeA/dataC --port <span class=m>30305</span> --networkid <span class=m>22</span> --nodiscover console
</code></pre></td></tr></table></div></div><a class=post-dummy-target id=4-连接各节点></a><h3>4. 连接各节点</h3><p>这里就使用<code>admin.addPeers</code>连接各节点就可以了。</p><a class=post-dummy-target id=二多虚拟机快速搭建></a><h2>二、多虚拟机快速搭建</h2><p>最理想的方式是使用多台电脑，但是一般情况下实验条件不足，不过在电脑性能足够的情况下，可以开启多台虚拟机模拟这样的环境，这里的示例使用三台Ubuntu18.04 LTS系统的虚拟机。</p><p>在走了一遍完整搭建流程后，精简不需要的步骤，将快速搭建的过程总结如下，如果想要查看详细的步骤和描述信息，请看第三部分。省略的步骤包括</p><ul><li>更新软件源</li><li>配置主机名</li><li>配置地址解析</li><li>同步时间</li><li>配置Golang环境</li><li>下载编译以太坊源码</li></ul><a class=post-dummy-target id=正式搭建过程></a><h3>正式搭建过程</h3><ol><li><p>安装网络工具</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ sudo apt-get install -y net-tools
</code></pre></td></tr></table></div></div></li><li><p>安装geth</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ sudo add-apt-repository -y ppa:ethereum/ethereum
$ sudo apt-get update
$ sudo apt-get install ethereum
$ geth --help
</code></pre></td></tr></table></div></div><p>详细过程可以查看<a href=https://ethereum.github.io/go-ethereum/install/ target=_blank>Installing Go Ethereum</a></p></li><li><p>创建创世区块文件</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ mkdir ~/nodeA
$ <span class=nb>cd</span> ~/nodeA
$ touch genesis.json
</code></pre></td></tr></table></div></div></li><li><p>编辑<code>genesis.json</code>文件内容如下</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=o>{</span>
<span class=s2>&#34;config&#34;</span>: <span class=o>{</span>
       <span class=s2>&#34;chainId&#34;</span>: 72,
       <span class=s2>&#34;homesteadBlock&#34;</span>: 0,
       <span class=s2>&#34;eip155Block&#34;</span>: 0,
       <span class=s2>&#34;eip158Block&#34;</span>: <span class=m>0</span>
   <span class=o>}</span>,
 <span class=s2>&#34;alloc&#34;</span>      : <span class=o>{</span><span class=o>}</span>,
 <span class=s2>&#34;coinbase&#34;</span>   : <span class=s2>&#34;0x0000000000000000000000000000000000000000&#34;</span>,
 <span class=s2>&#34;difficulty&#34;</span> : <span class=s2>&#34;0x40&#34;</span>,
 <span class=s2>&#34;extraData&#34;</span>  : <span class=s2>&#34;&#34;</span>,
 <span class=s2>&#34;gasLimit&#34;</span>   : <span class=s2>&#34;0x2fefd8&#34;</span>,
 <span class=s2>&#34;nonce&#34;</span>      : <span class=s2>&#34;0x0000000000000000&#34;</span>,
 <span class=s2>&#34;mixhash&#34;</span>    : <span class=s2>&#34;0x0000000000000000000000000000000000000000000000000000000000000000&#34;</span>,
 <span class=s2>&#34;parentHash&#34;</span> :<span class=s2>&#34;0x0000000000000000000000000000000000000000000000000000000000000000&#34;</span>,
 <span class=s2>&#34;timestamp&#34;</span>  : <span class=s2>&#34;0x00&#34;</span>
<span class=o>}</span>
</code></pre></td></tr></table></div></div><p>之后克隆得到三个虚拟机，作为区块链的三个节点</p></li><li><p>创建data文件夹供存储区块链数据</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ mkdir ~/nodeA/data <span class=p>&amp;</span> <span class=nb>cd</span> ~/nodeA
</code></pre></td></tr></table></div></div></li><li><p>初始化创世区块</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>geth --datadir data/ init genesis.json
</code></pre></td></tr></table></div></div></li><li><p>启动网络</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ geth --datadir data/ --networkid <span class=m>72</span> --nodiscover console
...
Welcome to the Geth JavaScript console!
</code></pre></td></tr></table></div></div></li><li><p>获取节点信息</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>&gt; admin.nodeInfo.enode
</code></pre></td></tr></table></div></div><p>分别在三个节点执行上述命令，得到的三个节点的信息为：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>NodeA: <span class=s2>&#34;enode://d0d6a32cacb349c8f8c92372dc3a1e118384720636519a46c14067a3b62f6cfa8549a8766ade0f91790ebdadfb44341e03c50a171b714070527be96ed037707e@[::]:30303?discport=0&#34;</span>
NodeB: <span class=s2>&#34;enode://d9fc148c9808fbfee7954bd3324bfdff42777de7d2545ac3c2357f05939dbd8ee153cd32320a05f4dbf18138007f743f3a2097b62e71c3c47bb3cf1559dd1328@[::]:30303?discport=0&#34;</span>
NodeC: <span class=s2>&#34;enode://246782d2429f4697e18009505989ed82c2c0a664aab96ed80b96e28be42b6d9e2d11b27806ea43e46fddfcb3e9a41e9df4889636f51e3dadc0c937b0735d0bdc@[::]:30303?discport=0&#34;</span>
</code></pre></td></tr></table></div></div></li><li><p>在NodeA执行下列命令，将NodeB加入网络，NodeC同理</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>&gt;admin.addPeer<span class=o>(</span><span class=s2>&#34;enode://d9fc148c9808fbfee7954bd3324bfdff42777de7d2545ac3c2357f05939dbd8ee153cd32320a05f4dbf18138007f743f3a2097b62e71c3c47bb3cf1559dd1328@[::]:30303&#34;</span><span class=o>)</span>
</code></pre></td></tr></table></div></div><p>将 [::] 修改为正确节点的 IP 地址，是之前用ifconfig命令查询并记录的本地地址，不支持DNS解析的域名地址，只支持点分十进制格式的IP地址。删除` ?discport=0</p></li><li><p>查看节点连接信息</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>&gt; admin.peers
</code></pre></td></tr></table></div></div><p>节点关机后，会自动被删除，节点重新启动后，会自动加入节点集群, 但是如果所有节点全部断掉，则需要重新添加。</p></li><li><p>转账和挖矿测试查看下面的详细搭建过程</p></li></ol><a class=post-dummy-target id=补充说明></a><h3>补充说明</h3><ol><li><p><code>genesis.json</code>文件的相关说明可参见<a href=https://shuzang.github.io/2019/%e4%bb%a5%e5%a4%aa%e5%9d%8a-%e5%88%9b%e4%b8%96%e5%8c%ba%e5%9d%97%e6%96%87%e4%bb%b6genesis.json/ target=_blank>以太坊-创世区块文件genesis.json</a></p></li><li><p><code>geth</code>命令的参数说明参见<a href=https://shuzang.github.io/2019/%E4%BB%A5%E5%A4%AA%E5%9D%8A-geth%E5%91%BD%E4%BB%A4%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E/ target=_blank>以太坊-geth命令参数说明</a></p></li><li><p>本文后半部分以<code>></code>开头的命令是控制台命令，这是一个以太坊提供的交互式的JavaScript环境，可以在该环境中进行命令或者代码的执行操作，具体内容参见<a href=https://shuzang.github.io/2019/%E4%BB%A5%E5%A4%AA%E5%9D%8A-geth-console%E5%91%BD%E4%BB%A4%E8%AF%A6%E8%A7%A3/ target=_blank>以太坊-Geth Console命令详解</a></p></li><li><p>本文使用了<code>admin.addPeer()</code>命令进行节点连接，但实际上还有其它方式，具体每种方式的使用参见<a href=https://shuzang.github.io/2019/%E4%BB%A5%E5%A4%AA%E5%9D%8A-%E8%8A%82%E7%82%B9%E8%BF%9E%E6%8E%A5%E5%88%B0%E7%BD%91%E7%BB%9C%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F/ target=_blank>以太坊-节点连接到网络的几种方式</a></p></li><li><p>geth命令和控制台命令有时候能实现同样的功能，比如</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ geth --datadir data/ account new
</code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>&gt; personal.newAccount<span class=o>(</span><span class=o>)</span>
</code></pre></td></tr></table></div></div><p>两条命令均是实现创建新账户的功能</p></li><li><p>第4条所述节点连接方式中有一种是实现创建<code>static-nodes.json</code>文件用于之后的节点识别，但该方式需要账户地址，故只能使用geth命令创建新账户，而本文所述方式可以在节点连接后，再在控制台下创建账户用于转账和挖矿的操作。</p></li></ol><a class=post-dummy-target id=三多虚拟机详细过程></a><h2>三、多虚拟机详细过程</h2><p>主要内容来自 <a href=https://blog.51cto.com/clovemfong/2280872>https://blog.51cto.com/clovemfong/2280872</a></p><p>使用了多个虚拟机搭建，每个虚拟机代表一个区块链节点。自编译了以太坊源码，并且由于区块链的特性，对Linux的时间做了一定的配置，同时为了多个节点间的连接，对IP地址做了配置处理。以上这些不是必须的，但能让我们思路清晰，明白构建一个区块链应该保证什么条件。</p><a class=post-dummy-target id=1-配置操作系统环境></a><h3>1. 配置操作系统环境</h3><p>本文的操作环境是在虚拟机上完成，共计三台虚拟机 (配置尽量高上去，如下这个配置挖矿太耗时，这里的配置主要指内存和CPU的核，因为以太坊的挖矿算法Ethash主要和内存有关，而CPU的核多一点挖矿时可以多开几个线程)</p><table><thead><tr><th>主机名</th><th>IP 地址</th><th>操作系统</th><th>内存 / GB</th><th>CPU / 核</th></tr></thead><tbody><tr><td>nodeA.shuzang.com</td><td>172.16.222.189</td><td>Ubuntu18.04 LTS</td><td>2</td><td>2</td></tr><tr><td>nodeB.shuzang.com</td><td>172.16.222.190</td><td>Ubuntu18.04 LTS</td><td>2</td><td>2</td></tr><tr><td>nodeC.shuzang.com</td><td>172.16.222.191</td><td>Ubuntu18.04 LTS</td><td>2</td><td>2</td></tr></tbody></table><blockquote><p>Q：linux下设置主机名的时候，为什么都要求设置成：name.domain.com这种域名的样式.</p><p>A：因为linux等类unix系统都是为网络应用而开发的，主机的性能可以不需要很强大，只需要能够登录到服务器（也就是加入某个域），就可以利用服务器的资源，因此安装系统时如果主机是在某个域里，设置域名就表明该主机是这个域里的一员，通过合法的帐号和密码就可以连接登录到域服务器。如果是单机或者个人家庭网络，域名就可以随便设置了</p></blockquote><p>注1：以 nodeA 为例进行相关配置，其他节点配置操作相同</p><p>注2：IP地址一栏应在虚拟机创建好后用ifconfig命令查看并记录</p><a class=post-dummy-target id=11-更新软件源></a><h4>1.1 更新软件源</h4><p>根据自己需要选择是否需要更换软件源，此处用的是原生的即可。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ sudo apt-get  update
</code></pre></td></tr></table></div></div><a class=post-dummy-target id=12-安装相关工具></a><h4>1.2 安装相关工具</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>sudo apt-get  install vim openssh-server ntp ntpdate make gcc net-tools  -y
</code></pre></td></tr></table></div></div><a class=post-dummy-target id=13-配置主机名></a><h4>1.3 配置主机名</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ sudo hostname nodeA.shuzang.com
</code></pre></td></tr></table></div></div><a class=post-dummy-target id=14-配置地址解析></a><h4>1.4 配置地址解析</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ vim /etc/hosts
127.0.0.1       localhost
172.16.222.189  nodeA.shuzang.com
172.16.222.190  nodeB.shuzang.com
172.16.222.191  nodeC.shuzang.com
</code></pre></td></tr></table></div></div><p>hostname &ndash;fqdn 验证</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ hostname -f        
nodeA.shuzang.com
</code></pre></td></tr></table></div></div><a class=post-dummy-target id=15-同步时间></a><h4>1.5 同步时间</h4><p>修改时区</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ sudo timedatectl set-timezone <span class=s2>&#34;Asia/Shanghai&#34;</span> 
</code></pre></td></tr></table></div></div><p>手动同步</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ sudo ntpdate time1.aliyun.com    
</code></pre></td></tr></table></div></div><p>同步硬件时间</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ sudo hwclock  -w <span class=c1># 系统时间同步至硬件</span>
</code></pre></td></tr></table></div></div><p>手动设置完毕后，再通过如下方式进行 ntp 服务的配置，可以选择现有或者自建的时间服务器</p><p>测试连通性</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ ntpdate -q time1.aliyun.com 
server 203.107.6.88, stratum 2, offset 0.050751, delay 0.06232
<span class=m>22</span> Sep 21:04:36 ntpdate<span class=o>[</span>8082<span class=o>]</span>: adjust <span class=nb>time</span> server 203.107.6.88 offset 0.050751 sec 
</code></pre></td></tr></table></div></div><p>修改配置文件</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ sudo cp /etc/ntp.conf  /etc/ntp.conf_shuzang_201809231208 <span class=c1>#备份配置文件</span>
$ sudo vim /etc/ntp.conf //修改配置文件
</code></pre></td></tr></table></div></div><p>修改信息如下</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=c1># Use servers from the NTP Pool Project. Approved by Ubuntu Technical Board</span>
<span class=c1># on 2011-02-08 (LP: #104525). See http://www.pool.ntp.org/join.html for</span>
<span class=c1># more information.</span>
<span class=c1>#pool 0.ubuntu.pool.ntp.org iburst</span>
<span class=c1>#pool 1.ubuntu.pool.ntp.org iburst</span>
<span class=c1>#pool 2.ubuntu.pool.ntp.org iburst</span>
<span class=c1>#pool 3.ubuntu.pool.ntp.org iburst</span>

server time1.aliyun.com
server time2.aliyun.com
server time3.aliyun.com
server time4.aliyun.com
server time5.aliyun.com
server time6.aliyun.com
server time7.aliyun.com
</code></pre></td></tr></table></div></div><p>启动 ntp 服务</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ sudo systemctl  restart ntp  <span class=c1>#启动ntp服务</span>
</code></pre></td></tr></table></div></div><a class=post-dummy-target id=2-配置-golang-环境></a><h3>2. 配置 Golang 环境</h3><p>下载 go 安装包</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ mkdir ethereum <span class=p>;</span><span class=nb>cd</span> ethereum
$ wget https://dl.google.com/go/go1.11.linux-amd64.tar.gz
</code></pre></td></tr></table></div></div><p>解压安装包</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ sudo tar zxvf  go1.11.linux-amd64.tar.gz   -C /usr/local/

</code></pre></td></tr></table></div></div><p>配置环境变量</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$  mkdir -p ~/workspace/<span class=o>{</span>src,pkg,bin<span class=o>}</span> 
$ sudo cp  /etc/profile /etc/profile_shuzang_201809231354
$ sudo vim /etc/profile 
<span class=c1># 配置文件中添加如下信息</span>
<span class=nb>export</span> <span class=nv>GOROOT</span><span class=o>=</span><span class=s2>&#34;/usr/local/go&#34;</span>
<span class=nb>export</span> <span class=nv>GOPATH</span><span class=o>=</span><span class=s2>&#34;/home/ubuntu/workspace&#34;</span>
<span class=nb>export</span> <span class=nv>GOBIN</span><span class=o>=</span><span class=nv>$GOPATH</span>/bin
<span class=nb>export</span> <span class=nv>PATH</span><span class=o>=</span><span class=nv>$PATH</span>:<span class=nv>$GOROOT</span>/bin
</code></pre></td></tr></table></div></div><p>检查配置</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ <span class=nb>source</span> /etc/profile
$ go env
<span class=nv>GOARCH</span><span class=o>=</span><span class=s2>&#34;amd64&#34;</span>
<span class=nv>GOBIN</span><span class=o>=</span><span class=s2>&#34;/home/ubuntu/workspace/bin&#34;</span>
<span class=nv>GOCACHE</span><span class=o>=</span><span class=s2>&#34;/home/ubuntu/.cache/go-build&#34;</span>
<span class=nv>GOEXE</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
<span class=nv>GOFLAGS</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
<span class=nv>GOHOSTARCH</span><span class=o>=</span><span class=s2>&#34;amd64&#34;</span>
<span class=nv>GOHOSTOS</span><span class=o>=</span><span class=s2>&#34;linux&#34;</span>
<span class=nv>GOOS</span><span class=o>=</span><span class=s2>&#34;linux&#34;</span>
<span class=nv>GOPATH</span><span class=o>=</span><span class=s2>&#34;/home/ubuntu/workspace&#34;</span>
<span class=nv>GOPROXY</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
......
</code></pre></td></tr></table></div></div><a class=post-dummy-target id=3-安装部署></a><h3>3. 安装部署</h3><a class=post-dummy-target id=31-获取源代码></a><h4>3.1 获取源代码</h4><p>以太坊的源码文件网址如下</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>https://github.com/ethereum/go-ethereum
</code></pre></td></tr></table></div></div><p>可以选择通过<code>git clone</code>或者下载<code>zip</code>包的方式进行源代码的获取, 为了方便起见，本文直接下载 zip 包上传至三台节点进行解压部署。</p><p>下载源码包</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ <span class=nb>cd</span> /home/ubuntu/ethereum
$ wget  https://github.com/ethereum/go-ethereum/archive/master.zip
</code></pre></td></tr></table></div></div><p>解压源码包</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ unzip master.zip
$ mkdir ~/workspace/github.com/
$ mv go-ethereum-master/   ~/workspace/github.com/go-ethereum
$ <span class=nb>cd</span> ~/workspace/github.com/go-ethereum <span class=p>;</span> make geth  <span class=c1>#编译安装</span>
</code></pre></td></tr></table></div></div><p>添加环境变量</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ sudo vim /etc/profile
<span class=c1># 添加及修改如下信息</span>
<span class=nb>export</span> <span class=nv>GETH</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$GOPATH</span><span class=s2>/github.com/go-ethereum/build</span><span class=s2>&#34;</span>
<span class=nb>export</span> <span class=nv>PATH</span><span class=o>=</span><span class=nv>$PATH</span>:<span class=nv>$GOROOT</span>/bin:<span class=nv>$GETH</span>/bin
</code></pre></td></tr></table></div></div><p>测试生效</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ <span class=nb>source</span> /etc/profile
$ geth --help
</code></pre></td></tr></table></div></div><p>至此环境配置完成，可以完成后进行虚拟机复制，得到三个虚拟机，然后再对主机名等进行修改，也可以等genesis.json文件创建完成后在进行虚拟机复制，然后修改相关名称。这样可以免去重复的环境配置工作，节省大量时间。</p><a class=post-dummy-target id=32-创建创世区块></a><h4>3.2 创建创世区块</h4><p>创建数据存储目录</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ mkdir -p /home/ubuntu/nodeA/data0
$ <span class=nb>cd</span> /home/ubuntu/nodeA
</code></pre></td></tr></table></div></div><p>创世区块配置文件<code>genesis.json</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=o>{</span>
<span class=s2>&#34;config&#34;</span>: <span class=o>{</span>
        <span class=s2>&#34;chainId&#34;</span>: 66,
        <span class=s2>&#34;homesteadBlock&#34;</span>: 0,
        <span class=s2>&#34;eip155Block&#34;</span>: 0,
        <span class=s2>&#34;eip158Block&#34;</span>: <span class=m>0</span>
    <span class=o>}</span>,
  <span class=s2>&#34;alloc&#34;</span>      : <span class=o>{</span><span class=o>}</span>,
  <span class=s2>&#34;coinbase&#34;</span>   : <span class=s2>&#34;0x0000000000000000000000000000000000000000&#34;</span>,
  <span class=s2>&#34;difficulty&#34;</span> : <span class=s2>&#34;0x20000&#34;</span>,
  <span class=s2>&#34;extraData&#34;</span>  : <span class=s2>&#34;&#34;</span>,
  <span class=s2>&#34;gasLimit&#34;</span>   : <span class=s2>&#34;0x2fefd8&#34;</span>,
  <span class=s2>&#34;nonce&#34;</span>      : <span class=s2>&#34;0x0000000000000042&#34;</span>,
  <span class=s2>&#34;mixhash&#34;</span>    : <span class=s2>&#34;0x0000000000000000000000000000000000000000000000000000000000000000&#34;</span>,
  <span class=s2>&#34;parentHash&#34;</span> :<span class=s2>&#34;0x0000000000000000000000000000000000000000000000000000000000000000&#34;</span>,
  <span class=s2>&#34;timestamp&#34;</span>  : <span class=s2>&#34;0x00&#34;</span>
<span class=o>}</span>
</code></pre></td></tr></table></div></div><p>难度"difficulty"可以设置小一点，比如"0x40&rdquo;，这样挖矿会容易一点，不然配置不好就只能死等。</p><p>初始化创世区块</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ geth  --datadir data0/  init genesis.json
</code></pre></td></tr></table></div></div><p><figure><img src=/svg/loading.min.svg data-sizes=auto data-src="https://s1.51cto.com/images/blog/201809/23/3cbb855f451fe1cb71b6b3efa7c598ac.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" alt class=lazyload></figure></p><a class=post-dummy-target id=33-启动服务></a><h4>3.3 启动服务</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ geth --datadir data0/ --networkid <span class=m>66</span> --nodiscover console
...
Welcome to the Geth JavaScript console!
</code></pre></td></tr></table></div></div><p>nodiscover : 设置为不自动发现，用于控制联盟链的节点加入<figure><img src=/svg/loading.min.svg data-sizes=auto data-src="https://s1.51cto.com/images/blog/201809/23/813b196e06db099346217fd27420ac82.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" alt class=lazyload></figure></p><a class=post-dummy-target id=4-节点通信></a><h3>4. 节点通信</h3><a class=post-dummy-target id=41-查看集群节点></a><h4>4.1 查看集群节点</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>&gt; admin.peers
<span class=o>[</span><span class=o>]</span>
</code></pre></td></tr></table></div></div><p>目前为空状态，表明未于其他节点进行通信。</p><a class=post-dummy-target id=42-获取节点信息></a><h4>4.2 获取节点信息</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>&gt; admin.nodeInfo.enode
</code></pre></td></tr></table></div></div><p>分别在三个节点的 console 上执行命令，显示如下:</p><p>NodeA</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=s2>&#34;enode://d0d6a32cacb349c8f8c92372dc3a1e118384720636519a46c14067a3b62f6cfa8549a8766ade0f91790ebdadfb44341e03c50a171b714070527be96ed037707e@[::]:30303?discport=0&#34;</span>
</code></pre></td></tr></table></div></div><p>NodeB</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=s2>&#34;enode://d9fc148c9808fbfee7954bd3324bfdff42777de7d2545ac3c2357f05939dbd8ee153cd32320a05f4dbf18138007f743f3a2097b62e71c3c47bb3cf1559dd1328@[::]:30303?discport=0&#34;</span>
</code></pre></td></tr></table></div></div><p>NodeC</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=s2>&#34;enode://246782d2429f4697e18009505989ed82c2c0a664aab96ed80b96e28be42b6d9e2d11b27806ea43e46fddfcb3e9a41e9df4889636f51e3dadc0c937b0735d0bdc@[::]:30303?discport=0&#34;</span>
</code></pre></td></tr></table></div></div><a class=post-dummy-target id=43-将-nodeb-加入-nodea></a><h4>4.3 将 NodeB 加入 NodeA</h4><p>在 NodeA 节点上执行如下命令</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>&gt;admin.addPeer<span class=o>(</span><span class=s2>&#34;enode://d9fc148c9808fbfee7954bd3324bfdff42777de7d2545ac3c2357f05939dbd8ee153cd32320a05f4dbf18138007f743f3a2097b62e71c3c47bb3cf1559dd1328@172.16.222.190:30303&#34;</span><span class=o>)</span>
</code></pre></td></tr></table></div></div><p>返回<code>true</code>表示加入成功，注意</p><ul><li>将 [::] 修改为正确节点的 IP 地址，是之前用ifconfig命令查询并记录的本地地址，不支持DNS解析的域名地址，只支持点分十进制格式的IP地址</li><li>删除<code> ?discport=0</code></li></ul><a class=post-dummy-target id=44-查看新加入的节点></a><h4>4.4 查看新加入的节点</h4><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>&gt; admin.peers
</code></pre></td></tr></table></div></div><p>在 NodeA 节点上执行如下命令</p><p><figure><img src=/svg/loading.min.svg data-sizes=auto data-src="https://s1.51cto.com/images/blog/201809/23/c6d667762a931a233142b2cd992c8432.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" alt class=lazyload></figure></p><p>通过查看 localAddress 跟 remoteAddress 查看节点关联信息。</p><p>在 NodeB 节点上执行如下命令</p><p><figure><img src=/svg/loading.min.svg data-sizes=auto data-src="https://s1.51cto.com/images/blog/201809/23/be124927d617e9e6ea6fddab1fe5938d.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" alt class=lazyload></figure></p><p>在 NodeC 节点上执行如下命令</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>&gt; admin.peers
<span class=o>[</span><span class=o>]</span>
</code></pre></td></tr></table></div></div><a class=post-dummy-target id=45-将-nodec-加入-nodea-与-nodeb></a><h4>4.5 将 NodeC 加入 NodeA 与 NodeB</h4><p>在 NodeA 节点上执行如下命令</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>&gt;admin.addPeer<span class=o>(</span><span class=s2>&#34;enode://246782d2429f4697e18009505989ed82c2c0a664aab96ed80b96e28be42b6d9e2d11b27806ea43e46fddfcb3e9a41e9df4889636f51e3dadc0c937b0735d0bdc@172.16.222.191:30303&#34;</span><span class=o>)</span>
</code></pre></td></tr></table></div></div><p>在 NodeB 节点上执行如下命令</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>&gt;admin.addPeer<span class=o>(</span><span class=s2>&#34;enode://246782d2429f4697e18009505989ed82c2c0a664aab96ed80b96e28be42b6d9e2d11b27806ea43e46fddfcb3e9a41e9df4889636f51e3dadc0c937b0735d0bdc@172.16.222.191:30303&#34;</span><span class=o>)</span>
</code></pre></td></tr></table></div></div><a class=post-dummy-target id=46-查看节点加入信息></a><h4>4.6 查看节点加入信息</h4><p>在 NodeA 节点上执行如下命令</p><p><figure><img src=/svg/loading.min.svg data-sizes=auto data-src="https://s1.51cto.com/images/blog/201809/23/81981335147af8327eab454f0d0c0aa7.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" alt class=lazyload></figure></p><p>在 NodeB 节点上执行如下命令</p><p><figure><img src=/svg/loading.min.svg data-sizes=auto data-src="https://s1.51cto.com/images/blog/201809/23/88f203a475aef146659a9b0709892b50.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" alt class=lazyload></figure></p><p>在 NodeC 节点上执行如下命令</p><p><figure><img src=/svg/loading.min.svg data-sizes=auto data-src="https://s1.51cto.com/images/blog/201809/23/8b778eb62c043cf3fe8868c1c518eec2.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" alt class=lazyload></figure></p><p>注意: 节点关机后，会自动被删除，节点重新启动后，会自动加入节点集群, 但是如果所有节点全部断掉，则需要重新添加。</p><a class=post-dummy-target id=5-测试></a><h3>5. 测试</h3><a class=post-dummy-target id=51-转账测试></a><h4>5.1 转账测试</h4><p>查看当前节点上的账户</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>&gt; personal.listAccounts
<span class=c1># 或者</span>
&gt; eth.accounts
</code></pre></td></tr></table></div></div><p>创建新账户</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>&gt; personal.newAccount<span class=o>(</span><span class=s2>&#34;shuzang1996&#34;</span><span class=o>)</span>
<span class=s2>&#34;0xcd3d95c64394452313b539a1f2de54eab2b80eed&#34;</span>
&gt; personal.newAccount<span class=o>(</span><span class=s2>&#34;shuzang1997&#34;</span><span class=o>)</span>
<span class=s2>&#34;0xc4f132a71da05257a71ae5872beabd12c50dbb81&#34;</span>
</code></pre></td></tr></table></div></div><p>查看创建的账户</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>&gt; personal.listAccounts
<span class=o>[</span><span class=s2>&#34;0xcd3d95c64394452313b539a1f2de54eab2b80eed&#34;</span>,
<span class=s2>&#34;0xc4f132a71da05257a71ae5872beabd12c50dbb81&#34;</span><span class=o>]</span>
</code></pre></td></tr></table></div></div><p>查看账户地址</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>&gt; personal.listWallets
</code></pre></td></tr></table></div></div><p><figure><img src=/svg/loading.min.svg data-sizes=auto data-src="https://s1.51cto.com/images/blog/201809/23/b700aee79e063512c2f2c8f248a45919.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" alt class=lazyload></figure></p><p>查看挖矿账户</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>&gt; eth.coinbase
INFO <span class=o>[</span>09-23<span class=p>|</span>18:17:20.246<span class=o>]</span> Etherbase automatically configured       <span class=nv>address</span><span class=o>=</span>0xcD3d95c64394452313b539a1f2dE54Eab2B80eEd
<span class=s2>&#34;0xcd3d95c64394452313b539a1f2de54eab2b80eed&#34;</span>
</code></pre></td></tr></table></div></div><p>默认情况下，平台会选择创建的第一个账户作为挖矿账户 (coinbase)，可以通过 miner.setEthbase() 进行 coinbase 账户的设置。</p><a class=post-dummy-target id=52-挖矿测试></a><h4>5.2 挖矿测试</h4><p>注意：在执行挖矿命令之前，务必在节点上面设置挖矿账户 (coinbase)，否则会报错<code>Error: etherbase missing: etherbase must be explicitly specified</code></p><p>当前账户信息为</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>NodeA:<span class=o>[</span><span class=s2>&#34;0xcd3d95c64394452313b539a1f2de54eab2b80eed&#34;</span>,<span class=s2>&#34;0xc4f132a71da05257a71ae5872beabd12c50dbb81&#34;</span><span class=o>]</span>
NodeB：<span class=o>[</span><span class=s2>&#34;0x22160d844b4016ed8f45ce63c405de72b1946696&#34;</span>,<span class=s2>&#34;0x23e80b2f1f74fc6da4bcb015d17ed642bcc98c06&#34;</span><span class=o>]</span>
NodeC:
<span class=o>[</span><span class=s2>&#34;0xa37539c0f41fea23c81f65b196df825202bc3bb5&#34;</span>,<span class=s2>&#34;0x3c9cdb2f29606a0b35ae95b51521a41bb5b48e27&#34;</span><span class=o>]</span>
</code></pre></td></tr></table></div></div><p>启动挖矿</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>&gt; miner.start<span class=o>(</span><span class=o>)</span>
INFO <span class=o>[</span>09-23<span class=p>|</span>18:57:41.223<span class=o>]</span> Updated mining threads                   <span class=nv>threads</span><span class=o>=</span><span class=m>6</span>
INFO <span class=o>[</span>09-23<span class=p>|</span>18:57:41.223<span class=o>]</span> Transaction pool price threshold updated <span class=nv>price</span><span class=o>=</span><span class=m>1000000000</span>
null
&gt; INFO <span class=o>[</span>09-23<span class=p>|</span>18:57:41.225<span class=o>]</span> Commit new mining work                   <span class=nv>number</span><span class=o>=</span><span class=m>1</span> <span class=nv>sealhash</span><span class=o>=</span>b16ebe…9b0094 <span class=nv>uncles</span><span class=o>=</span><span class=m>0</span> <span class=nv>txs</span><span class=o>=</span><span class=m>0</span> <span class=nv>gas</span><span class=o>=</span><span class=m>0</span> <span class=nv>fees</span><span class=o>=</span><span class=m>0</span> <span class=nv>elapsed</span><span class=o>=</span>794.985µs
&gt; INFO <span class=o>[</span>09-23<span class=p>|</span>18:57:52.671<span class=o>]</span> Successfully sealed new block            <span class=nv>number</span><span class=o>=</span><span class=m>1</span> <span class=nv>sealhash</span><span class=o>=</span>b16ebe…9b0094 <span class=nv>hash</span><span class=o>=</span>082473…eb94b6 <span class=nv>elapsed</span><span class=o>=</span>11.446s
INFO <span class=o>[</span>09-23<span class=p>|</span>18:57:52.671<span class=o>]</span> ined potential block                  <span class=nv>number</span><span class=o>=</span><span class=m>1</span> <span class=nv>hash</span><span class=o>=</span>082473…eb94b6
INFO <span class=o>[</span>09-23<span class=p>|</span>18:57:52.672<span class=o>]</span> Commit new mining work                   <span class=nv>number</span><span class=o>=</span><span class=m>2</span> <span class=nv>sealhash</span><span class=o>=</span>7a67a7…3c98aa <span class=nv>uncles</span><span class=o>=</span><span class=m>0</span> <span class=nv>txs</span><span class=o>=</span><span class=m>0</span> <span class=nv>gas</span><span class=o>=</span><span class=m>0</span> <span class=nv>fees</span><span class=o>=</span><span class=m>0</span> <span class=nv>elapsed</span><span class=o>=</span>1.062ms
INFO <span class=o>[</span>09-23<span class=p>|</span>18:57:55.115<span class=o>]</span> Successfully sealed new block            <span class=nv>number</span><span class=o>=</span><span class=m>2</span> <span class=nv>sealhash</span><span class=o>=</span>7a67a7…3c98aa <span class=nv>hash</span><span class=o>=</span>c5cd53…c3e66b <span class=nv>elapsed</span><span class=o>=</span>2.443s
INFO <span class=o>[</span>09-23<span class=p>|</span>18:57:55.115<span class=o>]</span> ined potential block                  <span class=nv>number</span><span class=o>=</span><span class=m>2</span> <span class=nv>hash</span><span class=o>=</span>c5cd53…c3e66b
INFO <span class=o>[</span>09-23<span class=p>|</span>18:57:55.116<span class=o>]</span> Commit new mining work                   <span class=nv>number</span><span class=o>=</span><span class=m>3</span> <span class=nv>sealhash</span><span class=o>=</span>cc1414…f36ad7 <span class=nv>uncles</span><span class=o>=</span><span class=m>0</span> <span class=nv>txs</span><span class=o>=</span><span class=m>0</span> <span class=nv>gas</span><span class=o>=</span><span class=m>0</span> <span class=nv>fees</span><span class=o>=</span><span class=m>0</span> <span class=nv>elapsed</span><span class=o>=</span>343.53µs
INFO <span class=o>[</span>09-23<span class=p>|</span>18:57:55.166<span class=o>]</span> Successfully sealed new block            <span class=nv>number</span><span class=o>=</span><span class=m>3</span> <span class=nv>sealhash</span><span class=o>=</span>cc1414…f36ad7 <span class=nv>hash</span><span class=o>=</span>765d41…03ce17 <span class=nv>elapsed</span><span class=o>=</span>50.270ms
INFO <span class=o>[</span>09-23<span class=p>|</span>18:57:55.166<span class=o>]</span> ined potential block                  <span class=nv>number</span><span class=o>=</span><span class=m>3</span> <span class=nv>hash</span><span class=o>=</span>765d41…03ce17
INFO <span class=o>[</span>09-23<span class=p>|</span>18:57:55.167<span class=o>]</span> Commit new mining work                   <span class=nv>number</span><span class=o>=</span><span class=m>4</span> <span class=nv>sealhash</span><span class=o>=</span>cb5122…e36b2c <span class=nv>uncles</span><span class=o>=</span><span class=m>0</span> <span class=nv>txs</span><span class=o>=</span><span class=m>0</span> <span class=nv>gas</span><span class=o>=</span><span class=m>0</span> <span class=nv>fees</span><span class=o>=</span><span class=m>0</span> <span class=nv>elapsed</span><span class=o>=</span>718.996µs
INFO <span class=o>[</span>09-23<span class=p>|</span>18:57:58.048<span class=o>]</span> Successfully sealed new block            <span class=nv>number</span><span class=o>=</span><span class=m>4</span> <span class=nv>sealhash</span><span class=o>=</span>cb5122…e36b2c <span class=nv>hash</span><span class=o>=</span>ab1e6d…03b40b <span class=nv>elapsed</span><span class=o>=</span>2.881s
INFO <span class=o>[</span>09-23<span class=p>|</span>18:57:58.048<span class=o>]</span> ined potential block                  <span class=nv>number</span><span class=o>=</span><span class=m>4</span> <span class=nv>hash</span><span class=o>=</span>ab1e6d…03b40b
INFO <span class=o>[</span>09-23<span class=p>|</span>18:57:58.049<span class=o>]</span> Commit new mining work                   <span class=nv>number</span><span class=o>=</span><span class=m>5</span> <span class=nv>sealhash</span><span class=o>=</span>0dd5ab…5d47d9 <span class=nv>uncles</span><span class=o>=</span><span class=m>0</span> <span class=nv>txs</span><span class=o>=</span><span class=m>0</span> <span class=nv>gas</span><span class=o>=</span><span class=m>0</span> <span class=nv>fees</span><span class=o>=</span><span class=m>0</span> <span class=nv>elapsed</span><span class=o>=</span>159.
</code></pre></td></tr></table></div></div><p>注意: 尽量将虚拟机的配置调高一点，否则会出现以下这些信息，耗时非常久。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>INFO <span class=o>[</span>09-23<span class=p>|</span>18:48:45.223<span class=o>]</span> Updated mining threads                   <span class=nv>threads</span><span class=o>=</span><span class=m>2</span>
INFO <span class=o>[</span>09-23<span class=p>|</span>18:48:45.229<span class=o>]</span> Transaction pool price threshold updated <span class=nv>price</span><span class=o>=</span><span class=m>1000000000</span>
INFO <span class=o>[</span>09-23<span class=p>|</span>18:48:45.230<span class=o>]</span> Etherbase automatically configured       <span class=nv>address</span><span class=o>=</span>0x22160D844B4016eD8f45cE63C405DE72B1946696
null
&gt; INFO <span class=o>[</span>09-23<span class=p>|</span>18:48:45.236<span class=o>]</span> Commit new mining work                   <span class=nv>number</span><span class=o>=</span><span class=m>1</span> <span class=nv>sealhash</span><span class=o>=</span>88e805…da6df6 <span class=nv>uncles</span><span class=o>=</span><span class=m>0</span> <span class=nv>txs</span><span class=o>=</span><span class=m>0</span> <span class=nv>gas</span><span class=o>=</span><span class=m>0</span> <span class=nv>fees</span><span class=o>=</span><span class=m>0</span> <span class=nv>elapsed</span><span class=o>=</span>4.290ms
INFO <span class=o>[</span>09-23<span class=p>|</span>18:48:48.930<span class=o>]</span> Generating DAG in progress               <span class=nv>epoch</span><span class=o>=</span><span class=m>0</span> <span class=nv>percentage</span><span class=o>=</span><span class=m>0</span> <span class=nv>elapsed</span><span class=o>=</span>2.961s
INFO <span class=o>[</span>09-23<span class=p>|</span>18:48:51.895<span class=o>]</span> Generating DAG in progress               <span class=nv>epoch</span><span class=o>=</span><span class=m>0</span> <span class=nv>percentage</span><span class=o>=</span><span class=m>1</span> <span class=nv>elapsed</span><span class=o>=</span>5.926s
INFO <span class=o>[</span>09-23<span class=p>|</span>18:48:54.739<span class=o>]</span> Generating DAG in progress               <span class=nv>epoch</span><span class=o>=</span><span class=m>0</span> <span class=nv>percentage</span><span class=o>=</span><span class=m>2</span> <span class=nv>elapsed</span><span class=o>=</span>8.770s
..........无尽的等待.........
INFO <span class=o>[</span>09-23<span class=p>|</span>18:53:50.638<span class=o>]</span> Generated ethash verification cache      <span class=nv>epoch</span><span class=o>=</span><span class=m>0</span> <span class=nv>elapsed</span><span class=o>=</span>5m4.669s
INFO <span class=o>[</span>09-23<span class=p>|</span>18:54:08.357<span class=o>]</span> Generating DAG in progress               <span class=nv>epoch</span><span class=o>=</span><span class=m>1</span> <span class=nv>percentage</span><span class=o>=</span><span class=m>0</span>  <span class=nv>elapsed</span><span class=o>=</span>15.480s
INFO <span class=o>[</span>09-23<span class=p>|</span>18:54:19.874<span class=o>]</span> Generating DAG in progress               <span class=nv>epoch</span><span class=o>=</span><span class=m>1</span> <span class=nv>percentage</span><span class=o>=</span><span class=m>1</span>  <span class=nv>elapsed</span><span class=o>=</span>26.997s
INFO <span class=o>[</span>09-23<span class=p>|</span>18:54:29.911<span class=o>]</span> Generating DAG in progress               <span class=nv>epoch</span><span class=o>=</span><span class=m>1</span> <span class=nv>percentage</span><span class=o>=</span><span class=m>2</span>  <span class=nv>elapsed</span><span class=o>=</span>37.034s
..........无尽的等待.........
WARN <span class=o>[</span>09-23<span class=p>|</span>18:57:57.836<span class=o>]</span> Discarded bad propagated block           <span class=nv>number</span><span class=o>=</span><span class=m>1</span> <span class=nv>hash</span><span class=o>=</span>082473…eb94b6
INFO <span class=o>[</span>09-23<span class=p>|</span>18:57:58.398<span class=o>]</span> Block synchronisation started 
INFO <span class=o>[</span>09-23<span class=p>|</span>18:57:58.404<span class=o>]</span> Mining aborted due to sync 
INFO <span class=o>[</span>09-23<span class=p>|</span>18:57:58.611<span class=o>]</span> Imported new state entries               <span class=nv>count</span><span class=o>=</span><span class=m>1</span> <span class=nv>elapsed</span><span class=o>=</span>1.352ms   <span class=nv>processed</span><span class=o>=</span><span class=m>1</span> <span class=nv>pending</span><span class=o>=</span><span class=m>0</span> <span class=nv>retry</span><span class=o>=</span><span class=m>0</span> <span class=nv>duplicate</span><span class=o>=</span><span class=m>0</span> <span class=nv>unexpected</span><span class=o>=</span><span class=m>0</span>
INFO <span class=o>[</span>09-23<span class=p>|</span>18:57:58.870<span class=o>]</span> Imported new block headers               <span class=nv>count</span><span class=o>=</span><span class=m>4</span> <span class=nv>elapsed</span><span class=o>=</span>95.436ms  <span class=nv>number</span><span class=o>=</span><span class=m>4</span> <span class=nv>hash</span><span class=o>=</span>ab1e6d…03b40b
INFO <span class=o>[</span>09-23<span class=p>|</span>18:57:58.889<span class=o>]</span> Imported new chain segment               <span class=nv>blocks</span><span class=o>=</span><span class=m>4</span> <span class=nv>txs</span><span class=o>=</span><span class=m>0</span> <span class=nv>mgas</span><span class=o>=</span>0.000 <span class=nv>elapsed</span><span class=o>=</span>16.862ms  <span class=nv>mgasps</span><span class=o>=</span>0.000 <span class=nv>number</span><span class=o>=</span><span class=m>4</span> <span class=nv>hash</span><span class=o>=</span>ab1e6d…03b40b <span class=nv>cache</span><span class=o>=</span>849.00B
INFO <span class=o>[</span>09-23<span class=p>|</span>18:57:58.892<span class=o>]</span> Imported new block headers               <span class=nv>count</span><span class=o>=</span><span class=m>1</span> <span class=nv>elapsed</span><span class=o>=</span>20.452ms  <span class=nv>number</span><span class=o>=</span><span class=m>5</span> <span class=nv>hash</span><span class=o>=</span>75e595…4e4cc2
INFO <span class=o>[</span>09-23<span class=p>|</span>18:57:58.893<span class=o>]</span> Imported new chain segment               <span class=nv>blocks</span><span class=o>=</span><span class=m>1</span> <span class=nv>txs</span><span class=o>=</span><span class=m>0</span> <span class=nv>mgas</span><span class=o>=</span>0.000 <span class=nv>elapsed</span><span class=o>=</span>316.348µs <span class=nv>mgasps</span><span class=o>=</span>0.000 <span class=nv>number</span><span class=o>=</span><span class=m>5</span> <span class=nv>hash</span><span class=o>=</span><span class=m>7</span>
..........无尽的等待.........
INFO <span class=o>[</span>09-23<span class=p>|</span>19:07:35.250<span class=o>]</span> Generated ethash verification cache      <span class=nv>epoch</span><span class=o>=</span><span class=m>1</span> <span class=nv>elapsed</span><span class=o>=</span>13m42.368s
INFO <span class=o>[</span>09-23<span class=p>|</span>19:09:28.613<span class=o>]</span> Successfully sealed new block            <span class=nv>number</span><span class=o>=</span><span class=m>37</span> <span class=nv>sealhash</span><span class=o>=</span>95e0e0…ad356d <span class=nv>hash</span><span class=o>=</span>7506d6…015be8 <span class=nv>elapsed</span><span class=o>=</span>10m54.093s
INFO <span class=o>[</span>09-23<span class=p>|</span>19:09:28.614<span class=o>]</span> ined potential block                  <span class=nv>number</span><span class=o>=</span><span class=m>37</span> <span class=nv>hash</span><span class=o>=</span>7506d6…015be8
INFO <span class=o>[</span>09-23<span class=p>|</span>19:09:28.619<span class=o>]</span> Commit new mining work                   <span class=nv>number</span><span class=o>=</span><span class=m>38</span> <span class=nv>sealhash</span><span class=o>=</span>96b6b0…b3d462 <span class=nv>uncles</span><span class=o>=</span><span class=m>0</span> <span class=nv>txs</span><span class=o>=</span><span class=m>0</span> <span class=nv>gas</span><span class=o>=</span><span class=m>0</span> <span class=nv>fees</span><span class=o>=</span><span class=m>0</span> <span class=nv>elapsed</span><span class=o>=</span>662.942µs
INFO <span class=o>[</span>09-23<span class=p>|</span>19:12:33.104<span class=o>]</span> Successfully sealed new block            <span class=nv>number</span><span class=o>=</span><span class=m>38</span> <span class=nv>sealhash</span><span class=o>=</span>96b6b0…b3d462 <span class=nv>hash</span><span class=o>=</span>a91e1b…a15902 <span class=nv>elapsed</span><span class=o>=</span>3m4.484s
INFO <span class=o>[</span>09-23<span class=p>|</span>19:12:33.105<span class=o>]</span> ined potential block                  <span class=nv>number</span><span class=o>=</span><span class=m>38</span> <span class=nv>hash</span><span class=o>=</span>a91e1b…a15902
INFO <span class=o>[</span>09-23<span class=p>|</span>19:12:33.107<span class=o>]</span> Commit new mining work                   <span class=nv>number</span><span class=o>=</span><span class=m>39</span> <span class=nv>sealhash</span><span class=o>=</span>6bf2a3…0d8be3 <span class=nv>uncles</span><span class=o>=</span><span class=m>0</span> <span class=nv>txs</span><span class=o>=</span><span class=m>0</span> <span class=nv>gas</span><span class=o>=</span><span class=m>0</span> <span class=nv>fees</span><span class=o>=</span><span class=m>0</span> <span class=nv>elapsed</span><span class=o>=</span>2.170ms
</code></pre></td></tr></table></div></div><p>停止挖矿</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>&gt; miner.stop<span class=o>(</span><span class=o>)</span>
</code></pre></td></tr></table></div></div><a class=post-dummy-target id=53-查询余额></a><h4>5.3 查询余额</h4><p>查询NodeA coinbase 账户(0xcd3d95c64394452313b539a1f2de54eab2b80eed)</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>&gt; eth.getBalance<span class=o>(</span>eth.coinbase<span class=o>)</span>
<span class=m>180000000000000000000</span>
</code></pre></td></tr></table></div></div><p>或者</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>&gt; eth.getBalance<span class=o>(</span>eth.accounts<span class=o>[</span>0<span class=o>]</span><span class=o>)</span>
<span class=m>180000000000000000000</span>
</code></pre></td></tr></table></div></div><p>可以对结果进行单位转换</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>&gt;  web3.fromWei<span class=o>(</span>eth.getBalance<span class=o>(</span>eth.accounts<span class=o>[</span>0<span class=o>]</span><span class=o>)</span>,<span class=s1>&#39;ether&#39;</span><span class=o>)</span>
<span class=m>180</span>
</code></pre></td></tr></table></div></div><p>NodeB 查询 NodeA 的 coinbase 账户</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>&gt; eth.getBalance<span class=o>(</span><span class=s2>&#34;0xcd3d95c64394452313b539a1f2de54eab2b80eed&#34;</span><span class=o>)</span>
<span class=m>180000000000000000000</span>
</code></pre></td></tr></table></div></div><p>NodeC 查询 NodeA 的 coinbase 账户</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>&gt; eth.getBalance<span class=o>(</span><span class=s2>&#34;0xcd3d95c64394452313b539a1f2de54eab2b80eed&#34;</span><span class=o>)</span>
<span class=m>180000000000000000000</span>
</code></pre></td></tr></table></div></div><p>同样，在 NodeA 和 NodeC 上面同样可以查询 NodeB 上面账号地址的余额。</p><a class=post-dummy-target id=54-交易转账></a><h4>5.4 交易转账</h4><p><strong>场景</strong>: NodeA(原有额度: 180) 的挖矿地址向 NodeB(原有额度: 10) 的挖矿地址转入 2 ETH</p><p>在进行交易转账之前，我们需要对交易转出方的账户进行解锁操作。NodeA 上执行如下命令，要求输入的密码是使用personal.newAccount创建账户时小括号内的参数</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>&gt; personal.unlockAccount<span class=o>(</span><span class=s2>&#34;0xcd3d95c64394452313b539a1f2de54eab2b80eed&#34;</span><span class=o>)</span>
Unlock account 0xcd3d95c64394452313b539a1f2de54eab2b80eed
Passphrase: 
<span class=nb>true</span>
</code></pre></td></tr></table></div></div><p>设置转账金额，将 ETH 转成 Wei 进行交易</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>&gt; <span class=nv>transferAmount</span><span class=o>=</span> web3.toWei<span class=o>(</span>2,<span class=s1>&#39;ether&#39;</span><span class=o>)</span>
<span class=s2>&#34;2000000000000000000&#34;</span>
</code></pre></td></tr></table></div></div><p>执行转账</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>&gt;eth.sendTransaction<span class=o>(</span><span class=o>{</span>from:<span class=s2>&#34;0xcd3d95c64394452313b539a1f2de54eab2b80eed&#34;</span>,to:<span class=s2>&#34;0x22160d844b4016ed8f45ce63c405de72b1946696&#34;</span>,value:transferAmount<span class=o>}</span><span class=o>)</span>

INFO <span class=o>[</span>09-23<span class=p>|</span>20:13:20.968<span class=o>]</span> Setting new <span class=nb>local</span> account                <span class=nv>address</span><span class=o>=</span>0xcD3d95c64394452313b539a1f2dE54Eab2B80eEd
INFO <span class=o>[</span>09-23<span class=p>|</span>20:13:20.968<span class=o>]</span> Submitted transaction                    <span class=nv>fullhash</span><span class=o>=</span>0xd115c9ccfb1bfcc92faaf3ef6fae34ba670ef68cb03807d82d943141851985ce <span class=nv>recipient</span><span class=o>=</span>0x22160D844B4016eD8f45cE63C405DE72B1946696
<span class=s2>&#34;0xd115c9ccfb1bfcc92faaf3ef6fae34ba670ef68cb03807d82d943141851985ce&#34;</span>
</code></pre></td></tr></table></div></div><p>查询交易池状态</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>&gt; txpool.status
<span class=o>{</span>
  pending: 1,
  queued: <span class=m>0</span>
<span class=o>}</span>
</code></pre></td></tr></table></div></div><p>执行挖矿，指定只挖一个区块</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>&gt; miner.start<span class=o>(</span><span class=o>)</span>  <span class=p>;</span> admin.sleepBlocks<span class=o>(</span>1<span class=o>)</span>,miner.stop<span class=o>(</span><span class=o>)</span>
</code></pre></td></tr></table></div></div><p><figure><img src=/svg/loading.min.svg data-sizes=auto data-src="https://s1.51cto.com/images/blog/201809/23/598f90361f820d9bd76c28352b61abbf.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" alt class=lazyload></figure></p><p>查看交易池</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>&gt; txpool.status

<span class=o>{</span>
  pending: 0,
  queued: <span class=m>0</span>
<span class=o>}</span>
</code></pre></td></tr></table></div></div><p>查看NodeB 的 CoinBase 账户余额</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>&gt; web3.fromWei<span class=o>(</span>eth.getBalance<span class=o>(</span><span class=s2>&#34;0x22160d844b4016ed8f45ce63c405de72b1946696&#34;</span><span class=o>)</span>,<span class=s1>&#39;ether&#39;</span><span class=o>)</span>
<span class=m>12</span>
</code></pre></td></tr></table></div></div><a class=post-dummy-target id=附录></a><h2>附录</h2><a class=post-dummy-target id=1-创世区块配置文件参数说明></a><h3>1. 创世区块配置文件参数说明</h3><table><thead><tr><th>参数名</th><th>说明</th></tr></thead><tbody><tr><td>chainId</td><td>指定独立的区块链网络 ID，1-4 为保留 ID，其中 1 为主网 ID，其余为测试网</td></tr><tr><td>alloc</td><td>用来设置账号以及账号的以太币数量，私有链可以不进行设置</td></tr><tr><td>coinbase</td><td>用于获取挖矿奖励的矿工账号</td></tr><tr><td>difficulty</td><td>设置挖矿的难度系数</td></tr><tr><td>extraData</td><td>附加信息，自定义即可</td></tr><tr><td>gasLimit</td><td>设置对 gas 的消耗总量的限制, 私有链中可以填写任意数值 (大数值)</td></tr><tr><td>nonce</td><td>用于进行挖矿的随机数</td></tr><tr><td>mixhash</td><td>与 nonce 配合使用，用于挖矿</td></tr><tr><td>parentHash</td><td>上一个区块的 Hash 值，由于该区块为创世区块，所以父 Hash 值为 0</td></tr><tr><td>timestamp</td><td>时间戳</td></tr></tbody></table><p>data0 目录中的相关文件列表</p><p><figure><img src=/svg/loading.min.svg data-sizes=auto data-src="https://s1.51cto.com/images/blog/201809/23/3fb7ef20a861d9fed05427bcf778cf96.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=" alt class=lazyload></figure></p><ul><li><strong>chaindata : 存储区块数据</strong></li><li><strong>keystore: 存储账户数据</strong></li></ul><a class=post-dummy-target id=2-私链服务启动常见参数说明></a><h3>2. 私链服务启动常见参数说明</h3><table><thead><tr><th>参数名</th><th>说明</th></tr></thead><tbody><tr><td>identity</td><td>用于标识区块链的名称</td></tr><tr><td>init</td><td>用于指定创世区块的位置，并且创建创世区块以及相关目录结构</td></tr><tr><td>datadir</td><td>设置当前区块链网络数据存放的位置</td></tr><tr><td>port</td><td>区块链启动的监听端口，默认为 30303</td></tr><tr><td>rpc</td><td>启用 RPC 服务，可以用于智能合约的部署与调试，默认监听 127.0.0.1, 端口为 8545</td></tr><tr><td>rpcapi</td><td>设置 RPC 提供的 API 接口类型，一般为 db,eth.net.web3</td></tr><tr><td>networkid</td><td>设置当前区块链的网络 ID</td></tr><tr><td>nodiscover</td><td>设置节点不被自动发现，用于控制节点的加入</td></tr><tr><td>console</td><td>启用命令行模式，用于执行命令</td></tr><tr><td>help</td><td>帮助命令，所有参数的汇总</td></tr></tbody></table><a class=post-dummy-target id=3-控制台命令说明></a><h3>3. 控制台命令说明</h3><p>以太坊提供了一个交互式的 JavaScript 环境，可以在该环境中进行命令或者代码的执行操作，其中一些常用的以太坊 JavaScript 对象可以直接被调用。</p><table><thead><tr><th>对象名</th><th>说明</th></tr></thead><tbody><tr><td>eth</td><td>操作区块链相关的方法</td></tr><tr><td>eth.accounts</td><td>查看当前系统中的所有账户地址</td></tr><tr><td>eth.getBalance()</td><td>查询账户余额，返回单位为 Wei(1 ether=10^18Wei)</td></tr><tr><td>eth.blockNumber</td><td>列出区块总数</td></tr><tr><td>eth.getTransaction()</td><td>获取指定交易的状态信息</td></tr><tr><td>eth.getBlock()</td><td>获取指定区块的信息</td></tr><tr><td>net</td><td>用于查看 p2p 网络状态</td></tr><tr><td>admin</td><td>管理节点相关的方法</td></tr><tr><td>admin.peers</td><td>查看通讯的节点信息</td></tr><tr><td>admin.addPeer()</td><td>添加通讯 P2P 节点</td></tr><tr><td>miner</td><td>启动 / 停止挖矿相关方法</td></tr><tr><td>personal</td><td>用于管理账户</td></tr><tr><td>personal.newAccount()</td><td>创建账户</td></tr><tr><td>personal.unlockAccount()</td><td>解锁账户</td></tr><tr><td>txpool</td><td>查看交易池信息, txpool.status()</td></tr><tr><td>web3</td><td>包含了以上对象以及单位换算等方法</td></tr><tr><td>web3.fromWei()</td><td>Wei 换算成 ether 或者其他单位</td></tr><tr><td>web3.toWei()</td><td>将 ether 或者其他单位换算成 Wei</td></tr></tbody></table></div><div class=post-copyright id=post-footer><p class=copyright-item><span>Author:&nbsp;</span>
<span>shuzang</span></p><p class=copyright-item><span>Updated on:&nbsp;</span>
<span>2020-11-11</span></p><p class=copyright-item><span>Share on:&nbsp;</span>
<span><a href="//twitter.com/share?url=https%3a%2f%2fshuzang.github.io%2f2019%2fuse-virtual-machine-builds-ethereum-private-chain%2f&text=%e4%bb%a5%e5%a4%aa%e5%9d%8a%e5%bc%80%e5%8f%911-%e8%99%9a%e6%8b%9f%e6%9c%ba%e6%90%ad%e5%bb%ba%e4%bb%a5%e5%a4%aa%e5%9d%8a%e7%a7%81%e9%93%be&via=" target=_blank title="Share on Twitter"><i class="fab fa-twitter fa-fw"></i></a><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fshuzang.github.io%2f2019%2fuse-virtual-machine-builds-ethereum-private-chain%2f" target=_blank title="Share on Facebook"><i class="fab fa-facebook-square fa-fw"></i></a><a href="//reddit.com/submit?url=https%3a%2f%2fshuzang.github.io%2f2019%2fuse-virtual-machine-builds-ethereum-private-chain%2f&title=%e4%bb%a5%e5%a4%aa%e5%9d%8a%e5%bc%80%e5%8f%911-%e8%99%9a%e6%8b%9f%e6%9c%ba%e6%90%ad%e5%bb%ba%e4%bb%a5%e5%a4%aa%e5%9d%8a%e7%a7%81%e9%93%be" target=_blank title="Share on Reddit"><i class="fab fa-reddit fa-fw"></i></a></span></p><p class=copyright-item></p><p class=copyright-item></p></div><br><div class=post-info-more><section><span class=tag><a href=https://shuzang.github.io/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/><i class="fas fa-tag fa-fw"></i>&nbsp;区块链</a>&nbsp;</span></section><section><span><a href=javascript:window.history.back();>Back</a></span>&nbsp;|&nbsp;<span><a href=https://shuzang.github.io>Home</a></span></section></div><div class=post-nav><a href=https://shuzang.github.io/2019/blockchain-based-platform-architecture-for-industrial-iot/ class=prev rel=prev title="Blockchain-Based Platform Architecture for Industrial IoT"><i class="fas fa-angle-left fa-fw"></i>Blockchain-Based Platform Architecture for Industrial IoT</a>
<a href=https://shuzang.github.io/2019/%E4%BB%A5%E5%A4%AA%E5%9D%8A%E5%BC%80%E5%8F%912-%E5%88%9B%E4%B8%96%E5%8C%BA%E5%9D%97%E6%96%87%E4%BB%B6genesis.json/ class=next rel=next title=以太坊开发2-创世区块文件genesis.json>以太坊开发2-创世区块文件genesis.json<i class="fas fa-angle-right fa-fw"></i></a></div><div class=post-comment></div></article></div></main><footer class=footer><div class=copyright><div class=copyright-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2018 - 2022</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://shuzang.github.io/about/ target=_blank>shuzang</a> | </span>Powered by <a href=https://gohugo.io/ target=_blank rel="external nofollow noopener noreffer">Hugo</a> & <a href=https://github.com/dillonzq/LoveIt target=_blank rel="external nofollow noopener noreffer">LoveIt</a></div></div></footer></div><a href=# class=dynamic-to-top id=dynamic-to-top data-scroll><span>&nbsp;</span></a>
<script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-209130979-1','auto');ga('set','anonymizeIp',true);ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script src=/js/lib/jquery/jquery.slim.min.js></script><script src=/js/lib/lazysizes/lazysizes.min.js></script><script src=/js/lib/smooth-scroll/smooth-scroll.polyfills.min.js></script><script>window.scroll=new SmoothScroll('[data-scroll]',{speed:300,speedAsDuration:true});</script><link rel=stylesheet href=/css/lib/katex/katex.min.css><script src=/js/lib/katex/katex.min.js></script><script defer src=/js/lib/katex/auto-render.min.js></script><link rel=stylesheet href=/css/lib/katex/copy-tex.min.css><script defer src=/js/lib/katex/copy-tex.min.js></script><script defer src=/js/lib/katex/mhchem.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:true},{left:"\\(",right:"\\)",display:false},{left:"\\[",right:"\\]",display:true},{left:"$",right:"$",display:false},]});});</script><script src=/js/blog.min.js></script></body></html>