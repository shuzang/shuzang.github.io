<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>hugo搭建个人博客1-基础建站 - Shuzang's Blog</title><meta name=Description content="书藏的个人博客，记录学习，记录生活"><meta property="og:title" content="hugo搭建个人博客1-基础建站"><meta property="og:description" content="Hugo 是由 Go 语言实现的静态网站生成器，可以快速建立一个静态网站，虽然多数情况下用来搭建个人博客，但也可以用作展示在线书籍、个人简历等。在使用 Hugo 之"><meta property="og:type" content="article"><meta property="og:url" content="https://shuzang.github.io/2019/hugo-blog-build-personal-blog/"><meta property="og:image" content="https://shuzang.github.io/logo.png"><meta property="article:published_time" content="2019-04-26T10:45:00+08:00"><meta property="article:modified_time" content="2020-10-31T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://shuzang.github.io/logo.png"><meta name=twitter:title content="hugo搭建个人博客1-基础建站"><meta name=twitter:description content="Hugo 是由 Go 语言实现的静态网站生成器，可以快速建立一个静态网站，虽然多数情况下用来搭建个人博客，但也可以用作展示在线书籍、个人简历等。在使用 Hugo 之"><meta name=application-name content="Shuzang's Blog"><meta name=apple-mobile-web-app-title content="Shuzang's Blog"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://shuzang.github.io/2019/hugo-blog-build-personal-blog/><link rel=prev href=https://shuzang.github.io/2019/%E7%94%9F%E5%91%BD%E6%B8%85%E5%8D%95/><link rel=next href=https://shuzang.github.io/2019/blockchain-paradigm-and-internet-of-things/><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"hugo搭建个人博客1-基础建站","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/shuzang.github.io\/2019\/hugo-blog-build-personal-blog\/"},"image":["https:\/\/shuzang.github.io\/images\/Apple-Devices-Preview.png"],"genre":"posts","keywords":"Hugo","wordcount":5572,"url":"https:\/\/shuzang.github.io\/2019\/hugo-blog-build-personal-blog\/","datePublished":"2019-04-26T10:45:00+08:00","dateModified":"2020-10-31T00:00:00+00:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"xxxx","logo":"https:\/\/shuzang.github.io\/images\/avatar.png"},"author":{"@type":"Person","name":"Shuzang"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':('auto'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'auto'==='dark'))&&document.body.setAttribute('theme','dark');</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Shuzang's Blog">Shuzang's Blog</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>所有文章 </a><a class=menu-item href=/tags/>标签 </a><a class=menu-item href=/categories/>分类 </a><a class=menu-item href=/about/>关于 </a><a class=menu-item href=https://github.com/shuzang title=GitHub rel="noopener noreffer" target=_blank><i class="fab fa-github fa-fw"></i></a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item language" title=选择语言>简体中文<i class="fas fa-chevron-right fa-fw"></i>
<select class=language-select id=language-select-desktop onchange="location=this.value;"><option value=/2019/hugo-blog-build-personal-blog/ selected>简体中文</option></select>
</a><span class="menu-item search" id=search-desktop><input type=text placeholder=搜索文章标题或内容... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fas fa-search fa-fw"></i></a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fas fa-times-circle fa-fw"></i></a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i></span></span><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Shuzang's Blog">Shuzang's Blog</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fas fa-search fa-fw"></i></a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fas fa-times-circle fa-fw"></i></a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></div><a class=menu-item href=/posts/>所有文章</a><a class=menu-item href=/tags/>标签</a><a class=menu-item href=/categories/>分类</a><a class=menu-item href=/about/>关于</a><a class=menu-item href=https://github.com/shuzang title=GitHub rel="noopener noreffer" target=_blank><i class="fab fa-github fa-fw"></i></a><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw"></i></a><a href=javascript:void(0); class=menu-item title=选择语言>简体中文<i class="fas fa-chevron-right fa-fw"></i>
<select class=language-select onchange="location=this.value;"><option value=/2019/hugo-blog-build-personal-blog/ selected>简体中文</option></select></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animated flipInX">hugo搭建个人博客1-基础建站</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>Shuzang</a></span>&nbsp;<span class=post-category>收录于 <a href=/categories/%E7%88%B1%E7%BC%96%E7%A8%8B%E7%88%B1%E6%8A%80%E6%9C%AF%E7%9A%84%E5%AD%A9%E5%AD%90/><i class="far fa-folder fa-fw"></i>爱编程爱技术的孩子</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2019-04-26>2019-04-26</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 5572 字&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 12 分钟&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#1-安装hugo>1. 安装Hugo</a></li><li><a href=#2-生成博客网站>2. 生成博客网站</a></li><li><a href=#3-托管到github>3. 托管到Github</a><ul><li><a href=#31-源码备份>3.1 源码备份</a></li><li><a href=#32-推送到master分支>3.2 推送到master分支</a></li></ul></li><li><a href=#4-安装主题>4. 安装主题</a></li><li><a href=#5-网站配置>5. 网站配置</a><ul><li><a href=#51-基础配置>5.1 基础配置</a></li><li><a href=#52-头像>5.2 头像</a></li><li><a href=#53-首页社交链接>5.3 首页社交链接</a></li><li><a href=#54-网站基本资料>5.4 网站基本资料</a></li><li><a href=#55-网站图标>5.5 网站图标</a></li></ul></li><li><a href=#5-文章发布>5. 文章发布</a></li><li><a href=#6-主题迁移>6. 主题迁移</a></li><li><a href=#附录i-github-action>附录I Github Action</a></li><li><a href=#附录ii-使用travis-ci>附录II 使用Travis CI</a><ul><li><a href=#步骤1-申请token>步骤1 申请Token</a></li><li><a href=#步骤2-设置travis-ci>步骤2 设置Travis CI</a></li><li><a href=#步骤3-编写配置文件>步骤3 编写配置文件</a></li><li><a href=#步骤4-使用说明>步骤4 使用说明</a></li></ul></li></ul></nav></div></div><div class=content id=content><p><a href=https://gohugo.io/ target=_blank rel="noopener noreffer">Hugo</a> 是由 Go 语言实现的静态网站生成器，可以快速建立一个静态网站，虽然多数情况下用来搭建个人博客，但也可以用作展示在线书籍、个人简历等。在使用 Hugo 之前，我一直使用 Hexo 搭建个人博客，促使我更换工具的原因主要有两个</p><ol><li>文章数量较多时，Hexo 生成速度非常慢，同样的文章数量下，Hugo 渲染文章几乎是即时的；</li><li>Hexo 依赖于 Node.js，使用需要在电脑里安装 node 和 npm。另外，Hexo 允许开发者提供各种 npm 模块来增强其功能，这种做法虽然使 Hexo 扩展性极高，但在博客的维护、备份和恢复等方面都带来了极大的不便。Hugo 使用 Go 开发，不依赖任何其它模块，只需要按照 Hugo 这一个软件即可。</li></ol><p>综上，我选择将博客网站迁移到 Hugo，这个系列的文章用来记录 Hugo 使用种遇到的问题和积累的经验。本文是第一篇，介绍博客网站搭建的过程和一些基础配置。</p><h2 id=1-安装hugo>1. 安装Hugo</h2><p>详细的安装说明参见<a href=https://gohugo.io/getting-started/quick-start/ target=_blank rel="noopener noreffer">官方文档</a>，这里简单介绍 win10 和 Ubuntu18.04 的快速安装。</p><p>win10下可自行从官网下载软件包安装，也可以使用 <a href=https://chocolatey.org/ target=_blank rel="noopener noreffer">chocolatey</a> 包管理工具快速安装</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=c1># 更新chocolatey到最新</span>
&gt; choco upgrade chocolatey

<span class=c1># 安装hugo-extended，因为将要使用的主题使用scss</span>
&gt; choco install hugo-extended -y

<span class=c1># 检查安装</span>
&gt; choco list --local
chocolatey 0.10.15
hugo-extended 0.58.3
<span class=m>2</span> packages installed.
</code></pre></td></tr></table></div></div><p>Ubuntu下使用 apt-get 会安装低版本 Hugo，因此使用 snap 安装</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ snap install hugo --channel<span class=o>=</span>extended
hugo <span class=o>(</span>extended/stable<span class=o>)</span> 0.58.3 from Hugo Authors installed
</code></pre></td></tr></table></div></div><p>注意要安装 extended 版本，主要是因为很多主题都需要扩展版的功能，如果确认自己的主题不需要(阅读主题说明)，可以按照正常的版本。</p><h2 id=2-生成博客网站>2. 生成博客网站</h2><p>执行下面的命令在本地生成博客网站项目文件夹，该文件夹是这一系列文章之后所有操作执行的根目录(简称为项目根目录)，我建立的项目文件夹名为 shuzang.github.io （因为之后要使用 <a href=https://pages.github.com/ target=_blank rel="noopener noreffer">Github Pages</a> 托管博客）。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ hugo new site shuzang.github.io
$ <span class=nb>cd</span> shuzang.github.io
</code></pre></td></tr></table></div></div><p>blog 文件夹的目录结构如下所示，其中各文件夹的作用我们将在之后的使用过程中逐步了解</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ ls
archetypes/  config.toml  content/  data/  layouts/  static/  themes/
</code></pre></td></tr></table></div></div><h2 id=3-托管到github>3. 托管到Github</h2><p>将本地的项目文件夹初始化为 Github 仓库</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=err>$</span> <span class=nx>git</span> <span class=nx>init</span>
<span class=err>$</span> <span class=nx>git</span> <span class=nx>add</span> <span class=p>.</span>
<span class=err>$</span> <span class=nx>git</span> <span class=nx>commit</span> <span class=o>-</span><span class=nx>m</span> <span class=s>&#34;Initial commit&#34;</span>
</code></pre></td></tr></table></div></div><p>浏览器打开 Github 网站，创建和项目文件夹同名的仓库，该仓库用于存储项目文件夹下所有内容。创建完成后，在本地项目根目录，执行下列命令，将项目文件推送到远程仓库。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ git remote add origin https://github.com/shuzang/shuzang.github.io.git
$ git push -u origin master
</code></pre></td></tr></table></div></div><p>关于网页如何托管在Github的详细说明可以参考<a href=https://gohugo.io/hosting-and-deployment/hosting-on-github/ target=_blank rel="noopener noreffer">Host on Github</a></p><h3 id=31-源码备份>3.1 源码备份</h3><p>按照 Hugo 的生成规则，执行 <code>hugo</code> 命令后，网站静态文件将会生成在 <code>public</code> 文件夹。但由于我们使用 Github Pages 托管博客网站，该功能启用后 Github 仓库只会从 <code>master branch</code> 或 <code>master branch /docs folder</code> 读取网站源码。</p><p>我们解决这一问题的方法是新建 <code>blog</code> 分支将博客源码放在该分支下，利用 Github Action 将 <code>public</code> 目录下的网站文件推送到 <code>master</code> 分支。首先在本地项目根目录下执行下列命令新建并切换到 <code>blog</code> 分支</p><p>注：Github Action 的说明见附录I</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ git checkout -b blog
$ git branch
* blog
  master

<span class=c1># 设置本地blog分支追踪远程blog分支</span>
$ git branch --set-upstream blog origin/blog
<span class=c1># 查看分支跟踪关系</span>
$ git branch -vv
* blog   c63526c <span class=o>[</span>origin/blog<span class=o>]</span> Update posts
</code></pre></td></tr></table></div></div><p>将本地 <code>blog</code> 分支的内容推送到远程仓库后，在网页端进入<code>shuzang.github.io</code>仓库的设置页面，将默认分支设置为 <code>blog</code> 分支。</p><p><img class=lazyload src=/svg/loading.min.svg data-src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HePXR.png data-srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HePXR.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HePXR.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HePXR.png 2x" data-sizes=auto alt=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HePXR.png title=设置默认分支></p><h3 id=32-推送到master分支>3.2 推送到master分支</h3><p>首先生成公私钥供 Github Action 使用</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>ssh-keygen -t rsa -b <span class=m>4096</span> -C <span class=s2>&#34;</span><span class=k>$(</span>git config user.email<span class=k>)</span><span class=s2>&#34;</span> -f blog -N <span class=s2>&#34;&#34;</span>
<span class=c1># You will get 2 files in current file:</span>
<span class=c1>#   blog.pub (public key)</span>
<span class=c1>#   blog     (private key)</span>
</code></pre></td></tr></table></div></div><p>然后进入 <code>shuzang.github.io</code> 仓库设置页面，在 <code>Deploy Keys</code> 中添加公钥，在 <code>Secrets</code> 中添加私钥，私钥名设置为 <code>ACTIONS_DEPLOY_KEY</code></p><p>接着新建 YAML 配置文件，Github Action 要求配置文件位于 <code>.github/workflows</code> 目录下，新建完成后目录结构如下</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ ls ./.github/workflows
main.yml
</code></pre></td></tr></table></div></div><p>Github Action使用一种模块化的思路，即将很多持续集成的操作写成独立的脚本文件，放到代码仓库，让其它开发者使用。因此进行持续集成时，可以直接引用别人写好的 action，整个持续集成的过程，就是一个 actions 组合的过程。GitHub 做了一个<a href="https://github.com/marketplace?type=actions" target=_blank rel="noopener noreffer">官方市场</a>，可以搜索到他人提交的 actions。另外，还有一个 <a href=https://github.com/sdras/awesome-actions target=_blank rel="noopener noreffer">awesome actions</a> 的仓库，也可以找到不少 action。</p><p>我们的基本思路如下</p><ol><li>整个流程在 blog 分支 push 时触发</li><li>只有一个job，运行在ubuntu-18.04环境下</li><li>使用 <a href=https://github.com/actions/checkout target=_blank rel="noopener noreffer">official action: checkout</a> 获取仓库源码，注意添加参数clone主题子模块</li><li>使用 <a href=https://github.com/peaceiris/actions-hugo target=_blank rel="noopener noreffer">peaceiris/actions-hugo: GitHub Actions for Hugo</a> 部署 hugo 环境，注意使用 <code>extentded</code> 版本（主题要求）</li><li>直接执行 hugo 命令</li><li>使用 <a href=https://github.com/peaceiris/actions-gh-pages target=_blank rel="noopener noreffer">peaceiris/actions-gh-pages</a> 将当前分支<code>public</code>目录下的内容部署到master分支，</li></ol><p>完整的<code>main.yml</code>脚本内容如下</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-yaml data-lang=yaml><span class=k>name</span><span class=p>:</span><span class=w> </span>hugo<span class=w> </span>push<span class=w> </span>to<span class=w> </span>github<span class=w> </span>pages<span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>on</span><span class=p>:</span><span class=w>
</span><span class=w></span><span class=w>  </span><span class=k>push</span><span class=p>:</span><span class=w>
</span><span class=w></span><span class=w>    </span><span class=k>branches</span><span class=p>:</span><span class=w>
</span><span class=w></span><span class=w>    </span>- blog<span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>jobs</span><span class=p>:</span><span class=w>
</span><span class=w></span><span class=w>  </span><span class=k>build-deploy</span><span class=p>:</span><span class=w>
</span><span class=w></span><span class=w>    </span><span class=k>runs-on</span><span class=p>:</span><span class=w> </span>ubuntu<span class=m>-18.04</span><span class=w>
</span><span class=w>    </span><span class=k>steps</span><span class=p>:</span><span class=w>
</span><span class=w></span><span class=w>    </span>- <span class=k>uses</span><span class=p>:</span><span class=w> </span>actions/checkout@v1<span class=w>
</span><span class=w>      </span><span class=k>with</span><span class=p>:</span><span class=w>
</span><span class=w></span><span class=w>        </span><span class=k>submodules</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span><span class=w>
</span><span class=w>    </span>- <span class=k>name</span><span class=p>:</span><span class=w> </span>Setup<span class=w> </span>Hugo<span class=w>
</span><span class=w>      </span><span class=k>uses</span><span class=p>:</span><span class=w> </span>peaceiris/actions-hugo@v2<span class=w>
</span><span class=w>      </span><span class=k>with</span><span class=p>:</span><span class=w>
</span><span class=w></span><span class=w>        </span><span class=k>hugo-version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;0.59.1&#39;</span><span class=w>
</span><span class=w>        </span><span class=k>extended</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span><span class=w>
</span><span class=w>    </span>- <span class=k>name</span><span class=p>:</span><span class=w> </span>Build<span class=w>
</span><span class=w>      </span><span class=k>run</span><span class=p>:</span><span class=w> </span>hugo<span class=w> </span>--minify<span class=w>
</span><span class=w>
</span><span class=w>    </span>- <span class=k>name</span><span class=p>:</span><span class=w> </span>Deploy<span class=w>
</span><span class=w>      </span><span class=k>uses</span><span class=p>:</span><span class=w> </span>peaceiris/actions-gh-pages@v2<span class=w>
</span><span class=w>      </span><span class=k>env</span><span class=p>:</span><span class=w>
</span><span class=w></span><span class=w>        </span><span class=k>ACTIONS_DEPLOY_KEY</span><span class=p>:</span><span class=w> </span>${{<span class=w> </span>secrets.ACTIONS_DEPLOY_KEY<span class=w> </span>}}<span class=w>
</span><span class=w>        </span><span class=k>PUBLISH_BRANCH</span><span class=p>:</span><span class=w> </span>master<span class=w>
</span><span class=w>        </span><span class=k>PUBLISH_DIR</span><span class=p>:</span><span class=w> </span>./public<span class=w>
</span></code></pre></td></tr></table></div></div><p>保存上面的文件后，将本地仓库推送到远程，Github 检测到 <code>.github/workflow</code> 目录和里面的<code>main.yml</code> 文件，就会自动运行，在网页端可以查看运行日志，如果出现错误可以根据日志内容就行修改。</p><p><img class=lazyload src=/svg/loading.min.svg data-src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HeehD.png data-srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HeehD.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HeehD.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HeehD.png 2x" data-sizes=auto alt=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HeehD.png title="Github Action 日志文件"></p><p>等到workflow运行结束，访问博客页面，就可以看到更新成功了。切换到master分支，也可以看到推送的网页文件，不过因为设置了默认分支为 blog，以后打开网页端该仓库，以及在本地 clone的时候，默认都是 blog 分支。</p><p>注：Github Action 在2020年开始正式使用，之前一直使用 Travis CI，配置步骤见 附录II</p><h2 id=4-安装主题>4. 安装主题</h2><p>Hugo没有默认主题，需要自己从官方的<a href=https://themes.gohugo.io/ target=_blank rel="noopener noreffer">主题列表</a>下载安装。总体来看，Hugo 主题的数量和质量可能都不如 Hexo，比如 Next 这种主题已经形成了庞大的开发社区，有大量的人在使用和维护，Hugo 中就没有这种影响力很大的主题了，但 Hugo 的主题的创意都非常棒。</p><p><a href=https://github.com/Fastbyte01/KeepIt target=_blank rel="noopener noreffer">KeepIt</a> 是其中一个较为简单优雅的主题，基于 <a href=https://raw.githubusercontent.com/liuzc/LeaveIt/ target=_blank rel="noopener noreffer">LeaveIt</a> 主题二次开发而成，遵循「Less is more」的原则，是我最喜欢的主题。因为主题通常是单独的 Github 仓库，因此将其作为博客项目的子模块进行管理。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=c1># 将主题项目作为子模块添加</span>
$ git submodule add https://github.com/Fastbyte01/KeepIt.git themes/KeepIt
<span class=c1># 查看子模块信息</span>
$ git submodule
 87c33888f3fa86b8cc096bc3f6d7f2efe9ccba66 themes/KeepIt <span class=o>(</span>v4-53-g87c3388<span class=o>)</span>
</code></pre></td></tr></table></div></div><p>复制主题提供的站点配置文件 <code>config.toml</code> 到项目根目录，覆盖 Hugo 本身的站点配置文件（第一次使用可以将exampleSite目录下的内容全部复制过来）</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ cp themes/KeepIt/exampleSite/. .
</code></pre></td></tr></table></div></div><p>运行<code>hugo server</code>命令，在浏览器键入网址 <a href=http://localhost:1313 target=_blank rel="noopener noreffer">http://localhost:1313</a> 预览主题效果（首页图片未加载是因为还没有放置头像文件）</p><p><img class=lazyload src=/svg/loading.min.svg data-src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1Hpbad.png data-srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1Hpbad.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1Hpbad.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1Hpbad.png 2x" data-sizes=auto alt=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1Hpbad.png title="KeepIt theme preview"></p><h2 id=5-网站配置>5. 网站配置</h2><p>正式使用前，我们需要编辑站点配置文件从而设置网站的一些内容，通常配置文件或主题文档会进行详细的说明，当前我们对 <code>config.toml</code> 文件做如下配置</p><h3 id=51-基础配置>5.1 基础配置</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-toml data-lang=toml><span class=nx>baseURL</span> <span class=p>=</span> <span class=s2>&#34;https://shuzang.github.io&#34;</span>
<span class=nx>languageCode</span> <span class=p>=</span> <span class=s2>&#34;en&#34;</span>
<span class=nx>defaultContentLanguage</span> <span class=p>=</span> <span class=s2>&#34;en&#34;</span>
<span class=nx>title</span> <span class=p>=</span> <span class=s2>&#34;Shuzang&#39;s blog&#34;</span>
<span class=nx>theme</span> <span class=p>=</span> <span class=s2>&#34;KeepIt&#34;</span>

<span class=nx>paginate</span> <span class=p>=</span> <span class=mi>12</span>
<span class=nx>enableEmoji</span> <span class=p>=</span> <span class=kc>true</span>
<span class=nx>enableRobotsTXT</span> <span class=p>=</span> <span class=kc>true</span>
<span class=nx>googleAnalytics</span> <span class=p>=</span> <span class=s2>&#34;&#34;</span>
<span class=nx>disqusShortname</span> <span class=p>=</span> <span class=s2>&#34;yourdiscussshortname&#34;</span>

<span class=p>[</span><span class=nx>sitemap</span><span class=p>]</span>
  <span class=nx>changefreq</span> <span class=p>=</span> <span class=s2>&#34;monthly&#34;</span>
  <span class=nx>filename</span> <span class=p>=</span> <span class=s2>&#34;sitemap.xml&#34;</span>
  <span class=nx>priority</span> <span class=p>=</span> <span class=mf>0.5</span>

<span class=p>[</span><span class=nx>blackfriday</span><span class=p>]</span>
  <span class=nx>hrefTargetBlank</span> <span class=p>=</span> <span class=kc>true</span>
  <span class=nx>nofollowLinks</span> <span class=p>=</span> <span class=kc>true</span>
  <span class=nx>noreferrerLinks</span> <span class=p>=</span> <span class=kc>true</span>

<span class=p>[</span><span class=nx>Permalinks</span><span class=p>]</span>
 <span class=nx>posts</span> <span class=p>=</span> <span class=s2>&#34;/:year/:filename/&#34;</span>

<span class=p>[</span><span class=nx>menu</span><span class=p>]</span>
  <span class=p>[</span><span class=p>[</span><span class=nx>menu</span><span class=p>.</span><span class=nx>main</span><span class=p>]</span><span class=p>]</span>
    <span class=nx>name</span> <span class=p>=</span> <span class=s2>&#34;Blog&#34;</span>
    <span class=nx>url</span> <span class=p>=</span> <span class=s2>&#34;/posts/&#34;</span>
    <span class=nx>weight</span> <span class=p>=</span> <span class=mi>1</span>

  <span class=p>[</span><span class=p>[</span><span class=nx>menu</span><span class=p>.</span><span class=nx>main</span><span class=p>]</span><span class=p>]</span>
    <span class=nx>name</span> <span class=p>=</span> <span class=s2>&#34;Categories&#34;</span>
    <span class=nx>url</span> <span class=p>=</span> <span class=s2>&#34;/categories/&#34;</span>
    <span class=nx>weight</span> <span class=p>=</span> <span class=mi>3</span>

  <span class=p>[</span><span class=p>[</span><span class=nx>menu</span><span class=p>.</span><span class=nx>main</span><span class=p>]</span><span class=p>]</span>
    <span class=nx>name</span> <span class=p>=</span> <span class=s2>&#34;About&#34;</span>
    <span class=nx>url</span> <span class=p>=</span> <span class=s2>&#34;/about&#34;</span>
    <span class=nx>weight</span> <span class=p>=</span> <span class=mi>4</span>
</code></pre></td></tr></table></div></div><h3 id=52-头像>5.2 头像</h3><p>新建<code>static/images</code>文件夹，将头像文件存放在这里</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ mkdir static/images
<span class=c1># 复制头像文件到images文件夹,复制完成后目录结构如下</span>
$ ls staitc -lR
static:
total <span class=m>0</span>
drwxr-xr-x <span class=m>1</span> 书藏 <span class=m>197610</span> <span class=m>0</span> 11月 <span class=m>17</span> 14:41 images/

static/images:
total <span class=m>88</span>
-rw-r--r-- <span class=m>1</span> 书藏 <span class=m>197610</span> <span class=m>87641</span> 9月  <span class=m>28</span> 18:21 avatar.png
</code></pre></td></tr></table></div></div><p>修改站点配置文件<code>params</code>部分的<code>avatar</code>字段值</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-toml data-lang=toml><span class=p>[</span><span class=nx>params</span><span class=p>]</span>
	<span class=nx>avatar</span> <span class=p>=</span> <span class=s2>&#34;images/avatar.png&#34;</span> <span class=c>#comment it to use gravatar</span>
</code></pre></td></tr></table></div></div><p>也可以使用自己图床中的头像图片链接，或者如果有gravatar头像，可以在配置文件中寻找相关字段填写账号。</p><h3 id=53-首页社交链接>5.3 首页社交链接</h3><p>修改站点配置文件中<code>params.social</code>部分的内容，需要的社交链接取消注释即可启用，比如我只启用了Github和Email，Github只需要填用户名，完整的URL在主题源码中自动生成。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-toml data-lang=toml><span class=p>[</span><span class=nx>params</span><span class=p>.</span><span class=nx>social</span><span class=p>]</span>
    <span class=nx>GitHub</span> <span class=p>=</span> <span class=s2>&#34;/shuzang&#34;</span>
    <span class=nx>Email</span>   <span class=p>=</span> <span class=s2>&#34;xxxxx@qq.com&#34;</span>
</code></pre></td></tr></table></div></div><h3 id=54-网站基本资料>5.4 网站基本资料</h3><p>编辑站点配置文件的以下内容</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-toml data-lang=toml><span class=nx>title</span> <span class=p>=</span> <span class=s2>&#34;shuzang&#39;s blog&#34;</span>  <span class=c># 网站标题</span>
<span class=p>[</span><span class=nx>params</span><span class=p>]</span>
    <span class=nx>since</span> <span class=p>=</span> <span class=mi>2018</span>                     <span class=c># 站点建立时间</span>
    <span class=nx>author</span> <span class=p>=</span> <span class=s2>&#34;shuzang&#34;</span>               <span class=c># 作者名</span>
    <span class=nx>subtitle</span> <span class=p>=</span> <span class=s2>&#34;世界钟爱热爱生活的人&#34;</span>       <span class=c># 子标题</span>
    <span class=nx>home_mode</span> <span class=p>=</span> <span class=s2>&#34;&#34;</span> <span class=c># post or other      # post模式会在主页面显示文章</span>
    
    <span class=nx>description</span> <span class=p>=</span> <span class=s2>&#34;shuzang的个人博客&#34;</span> <span class=c># 网站描述</span>
    <span class=nx>keywords</span> <span class=p>=</span> <span class=s2>&#34;blog, Golang, Hugo, blockchain &#34;</span> <span class=c># 网站关键词</span>
</code></pre></td></tr></table></div></div><h3 id=55-网站图标>5.5 网站图标</h3><p>使用 <a href="https://www.google.com/search?q=favicon+generator" target=_blank rel="noopener noreffer">favicon generator</a> 生成配套的网站图标，放到 <code>/static</code> 目录下，可以设置网站在各平台的显示图标，包括如下内容</p><ul><li>android-chrome-192x192.png</li><li>android-chrome-512x512.png</li><li>apple-touch-icon.png</li><li>browserconfig.xml</li><li>cover.png</li><li>favicon.ico</li><li>favicon-16x16.png</li><li>favicon-32x32.png</li><li>logo.png</li><li>mstile-150x150.png</li><li>safari-pinned-tab.svg</li><li>site.webmanifest</li></ul><p>然后修改站点配置文件中以下内容</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-toml data-lang=toml><span class=p>[</span><span class=nx>author</span><span class=p>]</span>
  <span class=nx>name</span> <span class=p>=</span> <span class=s2>&#34;shuzang&#34;</span>

  <span class=p>[</span><span class=nx>params</span><span class=p>.</span><span class=nx>publisher</span><span class=p>]</span>
    <span class=nx>name</span> <span class=p>=</span> <span class=s2>&#34;shuzang&#34;</span>

    <span class=p>[</span><span class=nx>params</span><span class=p>.</span><span class=nx>publisher</span><span class=p>.</span><span class=nx>logo</span><span class=p>]</span>
      <span class=nx>url</span> <span class=p>=</span> <span class=s2>&#34;logo.png&#34;</span>
      <span class=nx>width</span> <span class=p>=</span> <span class=mi>127</span>
      <span class=nx>height</span> <span class=p>=</span> <span class=mi>40</span>

  <span class=p>[</span><span class=nx>params</span><span class=p>.</span><span class=nx>logo</span><span class=p>]</span>
    <span class=nx>url</span> <span class=p>=</span> <span class=s2>&#34;logo.png&#34;</span>
    <span class=nx>width</span> <span class=p>=</span> <span class=mi>127</span>
    <span class=nx>height</span> <span class=p>=</span> <span class=mi>40</span>

  <span class=p>[</span><span class=nx>params</span><span class=p>.</span><span class=nx>image</span><span class=p>]</span>
    <span class=nx>url</span> <span class=p>=</span> <span class=s2>&#34;cover.png&#34;</span>
    <span class=nx>width</span> <span class=p>=</span> <span class=mi>800</span>
    <span class=nx>height</span> <span class=p>=</span> <span class=mi>600</span>
</code></pre></td></tr></table></div></div><p>更多配置可以参考<a href=https://github.com/Mogeko/Blog target=_blank rel="noopener noreffer">Mogeko的个人博客</a></p><p>以上所有配置完成后，博客网站首页如下</p><p><img class=lazyload src=/svg/loading.min.svg data-src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HCWjK.png data-srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HCWjK.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HCWjK.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HCWjK.png 2x" data-sizes=auto alt=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HCWjK.png title="configuration finished"></p><h2 id=5-文章发布>5. 文章发布</h2><p>在content目录下创建 <code>posts</code>文件夹，写作的文章全部放到该目录下，在每篇文章开头添加元数据字段，可以是YAML或TOML格式，示例如下</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-toml data-lang=toml><span class=nx>title</span> <span class=p>=</span> <span class=s2>&#34;Getting Started with Hugo&#34;</span>
<span class=nx>description</span> <span class=p>=</span> <span class=s2>&#34;&#34;</span>
<span class=nx>type</span> <span class=p>=</span> <span class=p>[</span><span class=s2>&#34;posts&#34;</span><span class=p>,</span><span class=s2>&#34;post&#34;</span><span class=p>]</span>
<span class=nx>tags</span> <span class=p>=</span> <span class=p>[</span>
    <span class=s2>&#34;go&#34;</span><span class=p>,</span>
    <span class=s2>&#34;golang&#34;</span><span class=p>,</span>
    <span class=s2>&#34;hugo&#34;</span><span class=p>,</span>
    <span class=s2>&#34;development&#34;</span><span class=p>,</span>
<span class=p>]</span>
<span class=nx>date</span> <span class=p>=</span> <span class=s2>&#34;2014-04-02&#34;</span>
<span class=nx>categories</span> <span class=p>=</span> <span class=p>[</span>
    <span class=s2>&#34;Development&#34;</span><span class=p>,</span>
    <span class=s2>&#34;golang&#34;</span><span class=p>,</span>
<span class=p>]</span>
<span class=nx>series</span> <span class=p>=</span> <span class=p>[</span><span class=s2>&#34;Hugo 101&#34;</span><span class=p>]</span>
<span class=p>[</span> <span class=nx>author</span> <span class=p>]</span>
  <span class=nx>name</span> <span class=p>=</span> <span class=s2>&#34;Hugo Authors&#34;</span>
</code></pre></td></tr></table></div></div><p>下面是一篇示例文章</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-markdown data-lang=markdown>---
title: Markdown说明
date: 2020-04-05
tags: [&#34;Markdown&#34;]
categories: [&#34;爱编程爱技术的孩子&#34;]
---

Markdown由Aaron Swartz和John Gruber共同设计

<span class=k>-</span> Aaron Swartz的博客：[http://www.aaronsw.com/](http://www.aaronsw.com/)
<span class=k>-</span> John Gruber的博客： [<span class=nt>https://daringfireball.net/ </span>](<span class=na>https://daringfireball.net/ </span>)

作者中的Aaron Swartz是天才程序员，著名社交网站[Reddit](http://www.reddit.com/)的联合创始人，14岁参与RSS 1.0规格标准的制订，致力于网络信息开放。在2011年7月19日，因被指控从MIT和JSTOR下载480万篇学术论文并以免费形式上传于网络被捕，2013年1月自杀身亡，年仅26岁。  
</code></pre></td></tr></table></div></div><p>文章保持后将仓库新增内容推送到远程，几分钟后即可在 <a href=https://shuzang.github.io>https://shuzang.github.io</a> 看的这篇文章</p><p><img class=lazyload src=/svg/loading.min.svg data-src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_%E7%A4%BA%E4%BE%8B%E6%96%87%E7%AB%A0.png data-srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_%E7%A4%BA%E4%BE%8B%E6%96%87%E7%AB%A0.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_%E7%A4%BA%E4%BE%8B%E6%96%87%E7%AB%A0.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_%E7%A4%BA%E4%BE%8B%E6%96%87%E7%AB%A0.png 2x" data-sizes=auto alt=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_%E7%A4%BA%E4%BE%8B%E6%96%87%E7%AB%A0.png title=示例文章></p><h2 id=6-主题迁移>6. 主题迁移</h2><p>随着使用时间的增加，逐渐意识到某些功能的必不可少，比如目录、数学公式支持等。KeepIt 主题已经停止了更新，好在在KeepIt的基础上重构设计的 <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer">LoveIt</a> 主题，解决了大部分我关心的问题。这里借此介绍如何更换主题。</p><p>首先删除原来的主题子模块</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ git submodule deinit themes/LoveIt
$ git rm themes/LoveIt
</code></pre></td></tr></table></div></div><p>然后添加新的主题作为子模块并重新配置 <code>config.toml</code> 文件</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ git submodule add https://github.com/dillonzq/LoveIt.git themes/LoveIt
</code></pre></td></tr></table></div></div><p>具体的配置可以参考主题文档，一个参考配置如下</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span><span class=lnt>42
</span><span class=lnt>43
</span><span class=lnt>44
</span><span class=lnt>45
</span><span class=lnt>46
</span><span class=lnt>47
</span><span class=lnt>48
</span><span class=lnt>49
</span><span class=lnt>50
</span><span class=lnt>51
</span><span class=lnt>52
</span><span class=lnt>53
</span><span class=lnt>54
</span><span class=lnt>55
</span><span class=lnt>56
</span><span class=lnt>57
</span><span class=lnt>58
</span><span class=lnt>59
</span><span class=lnt>60
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-toml data-lang=toml><span class=nx>title</span> <span class=p>=</span> <span class=s2>&#34;Shuzang&#39;s Blog&#34;</span>                <span class=c># 设置网站标题</span>
<span class=nx>theme</span> <span class=p>=</span> <span class=s2>&#34;LoveIt&#34;</span>                        <span class=c># 设置主题为LoveIt</span>
<span class=nx>hasCJKLanguage</span> <span class=p>=</span> <span class=kc>true</span>                   <span class=c># 启用对中文统计的支持，不启用字数统计会出问题</span>
<span class=nx>paginate</span> <span class=p>=</span> <span class=mi>10</span>                           <span class=c># 每页的文章数量设置为10，便于根据页数快速计算总文章数</span>

<span class=c># 作者名设置</span>
<span class=p>[</span><span class=nx>author</span><span class=p>]</span>                                            
  <span class=nx>name</span> <span class=p>=</span> <span class=s2>&#34;shuzang&#34;</span>
  
<span class=c># 菜单栏新添life页面并调整顺序</span>
<span class=p>[</span><span class=nx>menu</span><span class=p>]</span>                                               
  <span class=p>[</span><span class=p>[</span><span class=nx>menu</span><span class=p>.</span><span class=nx>main</span><span class=p>]</span><span class=p>]</span>
    <span class=nx>identifier</span> <span class=p>=</span> <span class=s2>&#34;posts&#34;</span>
    <span class=nx>name</span> <span class=p>=</span> <span class=s2>&#34;Posts&#34;</span>
    <span class=nx>url</span> <span class=p>=</span> <span class=s2>&#34;posts&#34;</span>
    <span class=nx>weight</span> <span class=p>=</span> <span class=mi>1</span>

  <span class=p>[</span><span class=p>[</span><span class=nx>menu</span><span class=p>.</span><span class=nx>main</span><span class=p>]</span><span class=p>]</span>
    <span class=nx>identifier</span> <span class=p>=</span> <span class=s2>&#34;categories&#34;</span>
    <span class=nx>name</span> <span class=p>=</span> <span class=s2>&#34;Categories&#34;</span>
    <span class=nx>url</span> <span class=p>=</span> <span class=s2>&#34;categories&#34;</span>
    <span class=nx>weight</span> <span class=p>=</span> <span class=mi>2</span>  

  <span class=p>[</span><span class=p>[</span><span class=nx>menu</span><span class=p>.</span><span class=nx>main</span><span class=p>]</span><span class=p>]</span>
    <span class=nx>identifier</span> <span class=p>=</span> <span class=s2>&#34;tags&#34;</span>
    <span class=nx>name</span> <span class=p>=</span> <span class=s2>&#34;Tags&#34;</span>
    <span class=nx>url</span> <span class=p>=</span> <span class=s2>&#34;tags&#34;</span>
    <span class=nx>weight</span> <span class=p>=</span> <span class=mi>3</span>

  <span class=p>[</span><span class=p>[</span><span class=nx>menu</span><span class=p>.</span><span class=nx>main</span><span class=p>]</span><span class=p>]</span>
    <span class=nx>identifier</span> <span class=p>=</span> <span class=s2>&#34;life&#34;</span>
    <span class=nx>name</span> <span class=p>=</span> <span class=s2>&#34;Life&#34;</span>
    <span class=nx>url</span> <span class=p>=</span> <span class=s2>&#34;life&#34;</span>
    <span class=nx>weight</span> <span class=p>=</span> <span class=mi>4</span>

  <span class=p>[</span><span class=p>[</span><span class=nx>menu</span><span class=p>.</span><span class=nx>main</span><span class=p>]</span><span class=p>]</span>
    <span class=nx>identifier</span> <span class=p>=</span> <span class=s2>&#34;about&#34;</span>
    <span class=nx>name</span> <span class=p>=</span> <span class=s2>&#34;About&#34;</span>
    <span class=nx>url</span> <span class=p>=</span> <span class=s2>&#34;about&#34;</span>
    <span class=nx>weight</span> <span class=p>=</span> <span class=mi>5</span>
    
 <span class=c># 基本参数设置，包括网站描述字段、关键词、主页文章显示模式、子标题</span>
 <span class=p>[</span><span class=nx>params</span><span class=p>]</span>
  <span class=nx>description</span> <span class=p>=</span> <span class=s2>&#34;shuzang&#39;s personal blog&#34;</span>                      <span class=c># site description</span>
  <span class=nx>keywords</span> <span class=p>=</span> <span class=p>[</span><span class=s2>&#34;blog&#34;</span><span class=p>,</span> <span class=s2>&#34;Golang&#34;</span><span class=p>,</span> <span class=s2>&#34;Hugo&#34;</span><span class=p>,</span> <span class=s2>&#34;blockchain&#34;</span><span class=p>,</span> <span class=s2>&#34;go&#34;</span><span class=p>,</span> <span class=s2>&#34;life&#34;</span><span class=p>]</span>     <span class=c># site keywords</span>
                                              
  <span class=nx>home_mode</span> <span class=p>=</span> <span class=s2>&#34;other&#34;</span>                                <span class=c># [post, other] home mode</span>
  <span class=nx>subtitle</span> <span class=p>=</span> <span class=s2>&#34;The world loves people who love life&#34;</span>  <span class=c># subtitle shown in home page</span>
  
  <span class=c>#头像、主页社交链接</span>
  <span class=p>[</span><span class=nx>params</span><span class=p>.</span><span class=nx>gravatar</span><span class=p>]</span>
    <span class=nx>email</span> <span class=p>=</span> <span class=s2>&#34;lylw1996@qq.com&#34;</span>

  <span class=p>[</span><span class=nx>params</span><span class=p>.</span><span class=nx>social</span><span class=p>]</span>                                    <span class=c># Social Info in home page</span>
    <span class=nx>GitHub</span> <span class=p>=</span> <span class=s2>&#34;shuzang&#34;</span>
    <span class=nx>Email</span> <span class=p>=</span> <span class=s2>&#34;lylw1996@qq.com&#34;</span>
    <span class=nx>Steam</span> <span class=p>=</span> <span class=s2>&#34;76561198343669932&#34;</span>
    <span class=nx>Skype</span> <span class=p>=</span> <span class=s2>&#34;live:844327696&#34;</span>
    
  <span class=c># gitalk设置涉及clientId和clientSecret，忽略</span>
</code></pre></td></tr></table></div></div><h2 id=附录i-github-action>附录I Github Action</h2><p><a href=https://github.com/features/actions target=_blank rel="noopener noreffer">GitHub Actions</a> 是 GitHub 在2018年10月推出的一个<a href=http://www.ruanyifeng.com/blog/2015/09/continuous-integration.html target=_blank rel="noopener noreffer">持续集成服务</a>，之前一直是试用阶段，去年(2019年)年末刚刚开放，据说比<a href=http://www.ruanyifeng.com/blog/2017/12/travis_ci_tutorial.html target=_blank rel="noopener noreffer">Travis CI</a> 更简单更好用，所以打算把持续集成工具切换到它。同时，之前博客部署使用了两个仓库，一个放源码，一个放生成的网页文件，目前来看可以统一成一个。本篇文章就打算做这两件事。</p><p>Github Actions入门可以阅读<a href=https://help.github.com/en/actions/automating-your-workflow-with-github-actions target=_blank rel="noopener noreffer">官方文档</a>或者阮一峰大神的<a href=http://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html target=_blank rel="noopener noreffer">GitHub Actions 入门教程</a></p><h2 id=附录ii-使用travis-ci>附录II 使用Travis CI</h2><p>通过Travis CI做博客的持续集成，可以每次自动渲染生成新的博客网页并推送到<code>shuzang.github.io</code>仓库，从而实现调整域名的目的。但之前尝试了多次持续集成都没有成功，还把博客搞坏了，最终只能重建网站。这一次发现了之前存在的问题，终于成功了。</p><h3 id=步骤1-申请token>步骤1 申请Token</h3><p>在GitHub 上申请一个新的 <a href=https://github.com/settings/tokens/new target=_blank rel="noopener noreffer">personal access token</a>。</p><p><code>Token description</code> 随便填，只要之后查看的时候知道是博客的就行。勾选所有 <code>repo</code> 列表项目，其它项目不要选。点击 <code>Generate token</code> 生成Token。</p><p><img class=lazyload src=/svg/loading.min.svg data-src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HVOiD.png data-srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HVOiD.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HVOiD.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HVOiD.png 2x" data-sizes=auto alt=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HVOiD.png title=申请Token></p><p>之后跳转的页面会显示Token的值，一定要记下来，因为离开这个页面之后这个值就再也无法查看。我因为已经做过一次了，这里就只查看一下。</p><p><img class=lazyload src=/svg/loading.min.svg data-src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HVjRH.png data-srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HVjRH.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HVjRH.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HVjRH.png 2x" data-sizes=auto alt=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HVjRH.png title="blog token"></p><h3 id=步骤2-设置travis-ci>步骤2 设置Travis CI</h3><p><a href=https://travis-ci.org/account/repositories target=_blank rel="noopener noreffer">Travis CI</a>是一个持续集成的工具，使用GitHub账号登陆，然后开启 <code>blog</code> 仓库，选择 <code>setting</code>。</p><p><img class=lazyload src=/svg/loading.min.svg data-src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HVbdK.png data-srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HVbdK.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HVbdK.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HVbdK.png 2x" data-sizes=auto alt=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HVbdK.png title=开启blog仓库持续集成></p><p>在设置页面填写<strong>Environment Variables</strong>。</p><ul><li><strong>Name</strong> 填写： <code>GITHUB_TOKEN</code></li><li><strong>Value</strong> 填写：刚刚在 GitHub 申请到的 Token 的值</li></ul><p><img class=lazyload src=/svg/loading.min.svg data-src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HVhRJ.png data-srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HVhRJ.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HVhRJ.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HVhRJ.png 2x" data-sizes=auto alt=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HVhRJ.png title=填写环境变量></p><p>填写完成后点击<code>Add</code>添加</p><h3 id=步骤3-编写配置文件>步骤3 编写配置文件</h3><p>在博客根目录下创建并编辑<code>.travis.yml</code>文件，该文件的作用是告诉Travis CI如何部署博客</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ ls -al blog
total <span class=m>30</span>
drwxr-xr-x <span class=m>1</span> 书葬 <span class=m>197610</span>    <span class=m>0</span> 9月  <span class=m>29</span> 20:28 ./
drwxr-xr-x <span class=m>1</span> 书葬 <span class=m>197610</span>    <span class=m>0</span> 9月  <span class=m>28</span> 18:20 ../
drwxr-xr-x <span class=m>1</span> 书葬 <span class=m>197610</span>    <span class=m>0</span> 9月  <span class=m>29</span> 20:28 .git/
-rw-r--r-- <span class=m>1</span> 书葬 <span class=m>197610</span>  <span class=m>101</span> 9月  <span class=m>28</span> 18:21 .gitmodules
-rw-r--r-- <span class=m>1</span> 书葬 <span class=m>197610</span> <span class=m>1810</span> 9月  <span class=m>29</span> 20:10 .travis.yml
drwxr-xr-x <span class=m>1</span> 书葬 <span class=m>197610</span>    <span class=m>0</span> 9月  <span class=m>28</span> 18:21 archetypes/
-rw-r--r-- <span class=m>1</span> 书葬 <span class=m>197610</span> <span class=m>4946</span> 9月  <span class=m>29</span> 18:27 config.toml
drwxr-xr-x <span class=m>1</span> 书葬 <span class=m>197610</span>    <span class=m>0</span> 9月  <span class=m>28</span> 18:24 content/
drwxr-xr-x <span class=m>1</span> 书葬 <span class=m>197610</span>    <span class=m>0</span> 9月  <span class=m>29</span> 18:56 docs/
-rw-r--r-- <span class=m>1</span> 书葬 <span class=m>197610</span>  <span class=m>456</span> 9月  <span class=m>29</span> 20:28 README.md
drwxr-xr-x <span class=m>1</span> 书葬 <span class=m>197610</span>    <span class=m>0</span> 9月  <span class=m>28</span> 18:21 resources/
drwxr-xr-x <span class=m>1</span> 书葬 <span class=m>197610</span>    <span class=m>0</span> 9月  <span class=m>28</span> 18:21 static/
drwxr-xr-x <span class=m>1</span> 书葬 <span class=m>197610</span>    <span class=m>0</span> 9月  <span class=m>28</span> 18:21 themes/
</code></pre></td></tr></table></div></div><p>文件内容如下</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span><span class=lnt>39
</span><span class=lnt>40
</span><span class=lnt>41
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-yaml data-lang=yaml><span class=k>language</span><span class=p>:</span><span class=w> </span>go<span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>go</span><span class=p>:</span><span class=w>
</span><span class=w></span><span class=w>  </span>- <span class=s2>&#34;1.12&#34;</span><span class=w>  </span><span class=c># 指定Golang 1.12</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>dist</span><span class=p>:</span><span class=w> </span>bionic<span class=w>  </span><span class=c># Ubuntu 18.04</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>env</span><span class=p>:</span><span class=w>
</span><span class=w></span><span class=w> </span><span class=k>global</span><span class=p>:</span><span class=w>
</span><span class=w></span><span class=w>   </span><span class=c># Github Pages</span><span class=w>
</span><span class=w>   </span>- <span class=k>GH_REF</span><span class=p>:</span><span class=w> </span>github.com/shuzang/shuzang.github.io<span class=w>
</span><span class=w>
</span><span class=w></span><span class=c># Specify which branches to build using a safelist</span><span class=w>
</span><span class=w></span><span class=c># 分支白名单限制：只有 master 分支的提交才会触发构建</span><span class=w>
</span><span class=w></span><span class=c># branches:</span><span class=w>
</span><span class=w></span><span class=c>#   only:</span><span class=w>
</span><span class=w></span><span class=c>#     - master</span><span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>before_install</span><span class=p>:</span><span class=w>
</span><span class=w></span><span class=w>  </span><span class=c># 安装依赖</span><span class=w>
</span><span class=w>  </span><span class=c>#  - wget -q -O libstdc++6.deb http://security.ubuntu.com/ubuntu/pool/main/g/gcc-5/libstdc++6_5.4.0-6ubuntu1~16.04.10_amd64.deb</span><span class=w>
</span><span class=w>  </span><span class=c>#  - sudo dpkg --force-all -i libstdc++6.deb</span><span class=w>
</span><span class=w>  </span><span class=c># 删除docs文件夹</span><span class=w>
</span><span class=w>  </span>- rm<span class=w> </span>-rf<span class=w> </span>./docs<span class=w>
</span><span class=w>  </span><span class=c># 安装 hugo （version: v0.58.0）</span><span class=w>
</span><span class=w>  </span>- wget<span class=w> </span>-q<span class=w> </span>-O<span class=w> </span>hugo.deb<span class=w> </span>https<span class=p>:</span>//github.com/gohugoio/hugo/releases/download/v0<span class=m>.58</span><span class=m>.3</span>/hugo_extended_0<span class=m>.58</span>.3_Linux-64bit.deb<span class=w>
</span><span class=w>  </span>- sudo<span class=w> </span>dpkg<span class=w> </span>-i<span class=w> </span>hugo.deb<span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>install</span><span class=p>:</span><span class=w>
</span><span class=w></span><span class=c># 运行hugo命令</span><span class=w>
</span><span class=w>  </span>- hugo<span class=w>
</span><span class=w>
</span><span class=w></span><span class=k>script</span><span class=p>:</span><span class=w>
</span><span class=w></span><span class=w>  </span>- cd<span class=w> </span>./docs<span class=w>
</span><span class=w>  </span>- git<span class=w> </span>init<span class=w>
</span><span class=w>  </span>- git<span class=w> </span>config<span class=w> </span>user.name<span class=w> </span><span class=s2>&#34;shuzang&#34;</span><span class=w>
</span><span class=w>  </span>- git<span class=w> </span>config<span class=w> </span>user.email<span class=w> </span><span class=s2>&#34;lylw1996@qq.com&#34;</span><span class=w>
</span><span class=w>  </span>- git<span class=w> </span>add<span class=w> </span>.<span class=w>
</span><span class=w>  </span>- git<span class=w> </span>commit<span class=w> </span>-m<span class=w> </span><span class=s2>&#34;Update Blog By TravisCI With Build $TRAVIS_BUILD_NUMBER&#34;</span><span class=w>
</span><span class=w>  </span><span class=c># Github Pages</span><span class=w>
</span><span class=w>  </span>- git<span class=w> </span>push<span class=w> </span>--force<span class=w> </span>--quiet<span class=w> </span><span class=s2>&#34;https://$GITHUB_TOKEN@${GH_REF}&#34;</span><span class=w> </span>master<span class=p>:</span>master<span class=w>
</span></code></pre></td></tr></table></div></div><p>大部分都有注释说明，这里要注意的两点是</p><ol><li>在运行 <code>hugo</code> 命令前要先删除<code>docs</code>文件夹，是为了清除历史网页文件，这是Hugo官方建议的</li><li>注释掉了常规 Github pages 进行持续集成时使用的 <code>deploy</code> 部分，因为我们只需要单纯的把网页文件提交到另一个仓库。只有当普通的项目启用github pages时需要这部分，这里的博客部署不需要，开启<code>deploy</code>部分反而会出现错误，目前不知道原因。</li></ol><h3 id=步骤4-使用说明>步骤4 使用说明</h3><p>大部分工作都通过Travis CI自动进行了，以后提交只需要在改动之后直接<code>git push</code>到远程仓库，将会触发自动构建，只需要一两分钟，就可以在<a href=https://travis-ci.org/ target=_blank rel="noopener noreffer">Travis CI</a> 上查看部署情况。</p><p><font color=green>绿色</font> 代表部署成功  <font color=yellow>黄色</font> 代表正在部署  <font color=red>红色</font> 代表部署失败  <font color=gray>灰色</font> 代表部署被取消</p><p><img class=lazyload src=/svg/loading.min.svg data-src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HVos1.png data-srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HVos1.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HVos1.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HVos1.png 2x" data-sizes=auto alt=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190426_1HVos1.png title=持续集成通过></p><p>然后访问<a href=https://shuzang.github.io target=_blank rel="noopener noreffer">博客首页</a>，不出意外就可以看到新的改动了。如果部署失败，在网页端的日志记录中找到失败原因，然后修改代码重新提交即可，新的提交通过后，原先失败的提交将会被解决。</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2020-10-31</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/2019/hugo-blog-build-personal-blog/index.md target=_blank>阅读原始文档</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Twitter" data-sharer=twitter data-url=https://shuzang.github.io/2019/hugo-blog-build-personal-blog/ data-title=hugo搭建个人博客1-基础建站 data-hashtags=Hugo><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://shuzang.github.io/2019/hugo-blog-build-personal-blog/ data-hashtag=Hugo><i class="fab fa-facebook-square fa-fw"></i></a><a href=javascript:void(0); title="分享到 Hacker News" data-sharer=hackernews data-url=https://shuzang.github.io/2019/hugo-blog-build-personal-blog/ data-title=hugo搭建个人博客1-基础建站><i class="fab fa-hacker-news fa-fw"></i></a><a href=javascript:void(0); title="分享到 Line" data-sharer=line data-url=https://shuzang.github.io/2019/hugo-blog-build-personal-blog/ data-title=hugo搭建个人博客1-基础建站><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@2.14.0/icons/line.svg></i></a><a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://shuzang.github.io/2019/hugo-blog-build-personal-blog/ data-title=hugo搭建个人博客1-基础建站><i class="fab fa-weibo fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/hugo/>Hugo</a></section><section><span><a href=javascript:void(0); onclick=window.history.back();>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/2019/%E7%94%9F%E5%91%BD%E6%B8%85%E5%8D%95/ class=prev rel=prev title=生命清单><i class="fas fa-angle-left fa-fw"></i>生命清单</a>
<a href=/2019/blockchain-paradigm-and-internet-of-things/ class=next rel=next title="Blockchain Paradigm and Internet of Things">Blockchain Paradigm and Internet of Things<i class="fas fa-angle-right fa-fw"></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>由 <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.63.2">Hugo</a> 强力驱动 | 主题 - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i>LoveIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2018 - 2022</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>Shuzang</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw"></i></a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw"></i></a></div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.37.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lunr@2.3.8/lunr.min.js></script><script type=text/javascript src=/lib/lunr/lunr.stemmer.support.min.js></script><script type=text/javascript src=/lib/lunr/lunr.zh.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.4.0/sharer.min.js></script><script type=text/javascript>window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"lunr"}};</script><script type=text/javascript src=/js/theme.min.js></script></body></html>