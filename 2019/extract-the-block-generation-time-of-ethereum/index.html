<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>提取以太坊的区块产生时间 - Shuzang's Blog</title><meta name=author content="Shuzang"><meta name=author-link content><meta name=description content="前言
目的是提取以太坊的区块产生时间形成数据集，初步的思路有两种：

爬取以太坊区块浏览器中的时间数据，然后格式化形成数据集输出
同步以太坊的所有区块（头），利用以太坊本身提供的接口提取每个区块的时间戳信息，然后将时间戳转换为真实的日期格式形成数据集输出，时间戳转换在线工具

查询资料过程中，了解到谷歌已提供以太坊的区块信息数据集1。虽然数据集本身没有时间信息，但可以导出时间戳进行转换，了解到谷歌使用的工具是ethereum-etl，故最终的解决方案是：使用ethereum-etl导出时间戳，编写Python程序转换时间戳并导出数据集。"><meta name=keywords content="区块链"><meta itemprop=name content="提取以太坊的区块产生时间"><meta itemprop=description content="前言
目的是提取以太坊的区块产生时间形成数据集，初步的思路有两种：

爬取以太坊区块浏览器中的时间数据，然后格式化形成数据集输出
同步以太坊的所有区块（头），利用以太坊本身提供的接口提取每个区块的时间戳信息，然后将时间戳转换为真实的日期格式形成数据集输出，时间戳转换在线工具

查询资料过程中，了解到谷歌已提供以太坊的区块信息数据集1。虽然数据集本身没有时间信息，但可以导出时间戳进行转换，了解到谷歌使用的工具是ethereum-etl，故最终的解决方案是：使用ethereum-etl导出时间戳，编写Python程序转换时间戳并导出数据集。"><meta itemprop=datePublished content="2019-04-05T21:35:00+08:00"><meta itemprop=dateModified content="2019-04-05T21:35:00+08:00"><meta itemprop=wordCount content="1090"><meta itemprop=image content="https://shuzang.github.io/logo.png"><meta itemprop=keywords content="区块链,"><meta property="og:title" content="提取以太坊的区块产生时间"><meta property="og:description" content="前言
目的是提取以太坊的区块产生时间形成数据集，初步的思路有两种：

爬取以太坊区块浏览器中的时间数据，然后格式化形成数据集输出
同步以太坊的所有区块（头），利用以太坊本身提供的接口提取每个区块的时间戳信息，然后将时间戳转换为真实的日期格式形成数据集输出，时间戳转换在线工具

查询资料过程中，了解到谷歌已提供以太坊的区块信息数据集1。虽然数据集本身没有时间信息，但可以导出时间戳进行转换，了解到谷歌使用的工具是ethereum-etl，故最终的解决方案是：使用ethereum-etl导出时间戳，编写Python程序转换时间戳并导出数据集。"><meta property="og:type" content="article"><meta property="og:url" content="https://shuzang.github.io/2019/extract-the-block-generation-time-of-ethereum/"><meta property="og:image" content="https://shuzang.github.io/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-04-05T21:35:00+08:00"><meta property="article:modified_time" content="2019-04-05T21:35:00+08:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://shuzang.github.io/logo.png"><meta name=twitter:title content="提取以太坊的区块产生时间"><meta name=twitter:description content="前言
目的是提取以太坊的区块产生时间形成数据集，初步的思路有两种：

爬取以太坊区块浏览器中的时间数据，然后格式化形成数据集输出
同步以太坊的所有区块（头），利用以太坊本身提供的接口提取每个区块的时间戳信息，然后将时间戳转换为真实的日期格式形成数据集输出，时间戳转换在线工具

查询资料过程中，了解到谷歌已提供以太坊的区块信息数据集1。虽然数据集本身没有时间信息，但可以导出时间戳进行转换，了解到谷歌使用的工具是ethereum-etl，故最终的解决方案是：使用ethereum-etl导出时间戳，编写Python程序转换时间戳并导出数据集。"><meta name=application-name content="Shuzang's Blog"><meta name=apple-mobile-web-app-title content="Shuzang's Blog"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=https://shuzang.github.io/2019/extract-the-block-generation-time-of-ethereum/><link rel=prev href=https://shuzang.github.io/2019/blockchain-platform-compare-and-select/><link rel=next href=https://shuzang.github.io/2019/industry-4.0-development-and-application-of-intelligent-manufacturing/><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"提取以太坊的区块产生时间","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/shuzang.github.io\/2019\/extract-the-block-generation-time-of-ethereum\/"},"genre":"posts","keywords":"区块链","wordcount":1090,"url":"https:\/\/shuzang.github.io\/2019\/extract-the-block-generation-time-of-ethereum\/","datePublished":"2019-04-05T21:35:00+08:00","dateModified":"2019-04-05T21:35:00+08:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Shuzang"},"description":""}</script></head><body data-header-desktop=sticky data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper data-page-style=normal><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper data-github-corner=right><div class=header-title><a href=/ title="Shuzang's Blog"><img loading=lazy src=/images/avatar.png srcset="/images/avatar.png, /images/avatar.png 1.5x, /images/avatar.png 2x" sizes=auto data-title="Shuzang's Blog" data-alt="Shuzang's Blog" class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>Shuzang's Blog</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 文章</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> 关于</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder=搜索文章标题或内容…… id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Shuzang's Blog"><img loading=lazy src=/images/avatar.png srcset="/images/avatar.png, /images/avatar.png 1.5x, /images/avatar.png 2x" sizes=auto data-title=/images/avatar.png data-alt=/images/avatar.png class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>Shuzang's Blog</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容…… id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></li><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 文章</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> 关于</a></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=container><aside class=toc id=toc-auto><h2 class=toc-title>目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>提取以太坊的区块产生时间</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><span class=author><img loading=lazy src=/images/avatar.png srcset="/images/avatar.png, /images/avatar.png 1.5x, /images/avatar.png 2x" sizes=auto data-title=Shuzang data-alt=Shuzang class=avatar style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'>&nbsp;Shuzang</span></span>
<span class=post-category>收录于 <a href=/categories/%E7%A0%94%E7%A9%B6%E7%94%9F%E7%9A%84%E5%8C%BA%E5%9D%97%E9%93%BE%E5%AD%A6%E4%B9%A0%E4%B9%8B%E8%B7%AF/><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> 研究生的区块链学习之路</a></span></div><div class=post-meta-line><span title="发布于 2019-04-05 21:35:00"><i class="fa-regular fa-calendar-alt fa-fw me-1" aria-hidden=true></i><time datetime=2019-04-05>2019-04-05</time></span>&nbsp;<span title="更新于 2019-04-05 21:35:00"><i class="fa-regular fa-edit fa-fw me-1" aria-hidden=true></i><time datetime=2019-04-05>2019-04-05</time></span>&nbsp;<span><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden=true></i>约 1090 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden=true></i>预计阅读 3 分钟</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#前言>前言</a></li><li><a href=#区块时间戳信息导出>区块时间戳信息导出</a></li><li><a href=#时间戳转换及数据集生成>时间戳转换及数据集生成</a></li><li><a href=#参考文献>参考文献</a></li></ul></nav></div></div><div class=content id=content><div class="details admonition warning open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-exclamation-triangle fa-fw" aria-hidden=true></i>警告<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>本文最后更新于 2019-04-05，文中内容可能已过时。</div></div></div><h2 id=前言>前言</h2><p>目的是提取以太坊的区块产生时间形成数据集，初步的思路有两种：</p><ul><li>爬取以太坊区块浏览器中的时间数据，然后格式化形成数据集输出</li><li>同步以太坊的所有区块（头），利用以太坊本身提供的接口提取每个区块的时间戳信息，然后将时间戳转换为真实的日期格式形成数据集输出，<a href=https://tool.lu/timestamp/ target=_blank rel="external nofollow noopener noreferrer">时间戳转换在线工具</a></li></ul><p>查询资料过程中，了解到谷歌已提供以太坊的区块信息数据集<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>。虽然数据集本身没有时间信息，但可以导出时间戳进行转换，了解到谷歌使用的工具是<a href=https://github.com/blockchain-etl/ethereum-etl#blockscsv target=_blank rel="external nofollow noopener noreferrer">ethereum-etl</a>，故最终的解决方案是：使用ethereum-etl导出时间戳，编写Python程序转换时间戳并导出数据集。</p><h2 id=区块时间戳信息导出>区块时间戳信息导出</h2><p>系统环境为Ubuntu18.04，已安装python环境。安装Ethereum ETL：</p><div class=highlight id=id-1><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ pip3 install ethereum-etl</span></span></code></pre></td></tr></table></div></div><p>安装依赖模块</p><div class=highlight id=id-2><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ pip3 install mythril
</span></span><span class=line><span class=cl>$ pip3 install pyetherchain</span></span></code></pre></td></tr></table></div></div><p>导出区块信息，导出速度和国家有关，国内较慢。</p><div class=highlight id=id-3><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ethereumetl export_blocks_and_transactions -s <span class=m>1</span> -e <span class=m>200000</span> -p https://mainnet.infura.io -b <span class=m>100</span> -w <span class=m>3</span> --blocks-output blocks.csv</span></span></code></pre></td></tr></table></div></div><p>所有的参数使用可以通过<code>-h</code>参数查看，更多信息详见<a href=https://github.com/blockchain-etl/ethereum-etl#blockscsv target=_blank rel="external nofollow noopener noreferrer">ethereum-etl</a>。</p><div class=highlight id=id-4><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>&gt; ethereumetl export_blocks_and_transactions -h
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Usage: ethereumetl export_blocks_and_transactions <span class=o>[</span>OPTIONS<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  Export blocks and transactions.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Options:
</span></span><span class=line><span class=cl>  -s, --start-block INTEGER   Start block
</span></span><span class=line><span class=cl>  -e, --end-block INTEGER     End block  <span class=o>[</span>required<span class=o>]</span>
</span></span><span class=line><span class=cl>  -b, --batch-size INTEGER    The number of blocks to <span class=nb>export</span> at a time.
</span></span><span class=line><span class=cl>  -p, --provider-uri TEXT     The URI of the web3 provider e.g.
</span></span><span class=line><span class=cl>                              file://<span class=nv>$HOME</span>/Library/Ethereum/geth.ipc or
</span></span><span class=line><span class=cl>                              https://mainnet.infura.io
</span></span><span class=line><span class=cl>  -w, --max-workers INTEGER   The maximum number of workers.
</span></span><span class=line><span class=cl>  --blocks-output TEXT        The output file <span class=k>for</span> blocks. If not provided
</span></span><span class=line><span class=cl>                              blocks will not be exported. Use <span class=s2>&#34;-&#34;</span> <span class=k>for</span> stdout
</span></span><span class=line><span class=cl>  --transactions-output TEXT  The output file <span class=k>for</span> transactions. If not
</span></span><span class=line><span class=cl>                              provided transactions will not be exported. Use
</span></span><span class=line><span class=cl>                              <span class=s2>&#34;-&#34;</span> <span class=k>for</span> stdout
</span></span><span class=line><span class=cl>  -h, --help                  Show this message and exit.</span></span></code></pre></td></tr></table></div></div><p>导出的<code>blocks.csv</code>数据集格式如下</p><table><thead><tr><th>Column</th><th>Type</th></tr></thead><tbody><tr><td>number</td><td>bigint</td></tr><tr><td>hash</td><td>hex_string</td></tr><tr><td>parent_hash</td><td>hex_string</td></tr><tr><td>nonce</td><td>hex_string</td></tr><tr><td>sha3_uncles</td><td>hex_string</td></tr><tr><td>logs_bloom</td><td>hex_string</td></tr><tr><td>transactions_root</td><td>hex_string</td></tr><tr><td>state_root</td><td>hex_string</td></tr><tr><td>receipts_root</td><td>hex_string</td></tr><tr><td>miner</td><td>address</td></tr><tr><td>difficulty</td><td>numeric</td></tr><tr><td>total_difficulty</td><td>numeric</td></tr><tr><td>size</td><td>bigint</td></tr><tr><td>extra_data</td><td>hex_string</td></tr><tr><td>gas_limit</td><td>bigint</td></tr><tr><td>gas_used</td><td>bigint</td></tr><tr><td>timestamp</td><td>bigint</td></tr><tr><td>transaction_count</td><td>bigint</td></tr></tbody></table><p>打开<code>blocks.csv</code>文件，删除无关项，保留<code>number</code>和<code>timestamp</code>两项。</p><h2 id=时间戳转换及数据集生成>时间戳转换及数据集生成</h2><p>利用csv模块进行数据集逐行读取，利用time模块进行时间戳转换，利用numpy模块进行数据集重新写入，代码如下：</p><div class=highlight id=id-5><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>csv</span><span class=o>,</span><span class=nn>time</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>numpy</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>filename</span> <span class=o>=</span> <span class=s1>&#39;F:/blocks.csv&#39;</span>
</span></span><span class=line><span class=cl><span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>filename</span><span class=p>)</span> <span class=k>as</span> <span class=n>f</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>reader</span> <span class=o>=</span> <span class=n>csv</span><span class=o>.</span><span class=n>reader</span><span class=p>(</span><span class=n>f</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>header_row</span> <span class=o>=</span> <span class=nb>next</span><span class=p>(</span><span class=n>reader</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>date</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    <span class=n>rowNumber</span> <span class=o>=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>row</span> <span class=ow>in</span> <span class=n>reader</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>date</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>row</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>rowNumber</span> <span class=o>=</span> <span class=n>rowNumber</span> <span class=o>+</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=n>i</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>    <span class=k>while</span> <span class=n>i</span> <span class=o>&lt;</span> <span class=n>rowNumber</span><span class=o>-</span><span class=mi>1</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>timeStamp</span> <span class=o>=</span> <span class=nb>int</span><span class=p>(</span><span class=n>date</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>1</span><span class=p>])</span>
</span></span><span class=line><span class=cl>        <span class=n>timeArray</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>localtime</span><span class=p>(</span><span class=n>timeStamp</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>otherStyleTime</span> <span class=o>=</span> <span class=n>time</span><span class=o>.</span><span class=n>strftime</span><span class=p>(</span><span class=s2>&#34;%Y-%m-</span><span class=si>%d</span><span class=s2> %H:%M:%S&#34;</span><span class=p>,</span><span class=n>timeArray</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>date</span><span class=p>[</span><span class=n>i</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>otherStyleTime</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=n>date</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=mi>2</span><span class=p>])</span>
</span></span><span class=line><span class=cl>        <span class=n>i</span> <span class=o>=</span> <span class=n>i</span> <span class=o>+</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>    <span class=n>numpy</span><span class=o>.</span><span class=n>savetxt</span><span class=p>(</span><span class=s1>&#39;blocks.csv&#39;</span><span class=p>,</span> <span class=n>date</span><span class=p>,</span> <span class=n>delimiter</span> <span class=o>=</span> <span class=s1>&#39;,&#39;</span><span class=p>,</span><span class=n>fmt</span> <span class=o>=</span> <span class=s1>&#39;</span><span class=si>%s</span><span class=s1>&#39;</span><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>生成的数据集格式如下，第一列为区块号，第二列为时间戳，第三列为转换后的时间信息，以逗号分隔，共20万条数据。在第一行手动添加表头。</p><p>注：此时的以太坊主链总区块数在750万个左右。</p><div class=highlight id=id-6><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>Number,Timestamp,Block generation <span class=nb>time</span>
</span></span><span class=line><span class=cl>1,1438269988,2015-07-30 23:26:28
</span></span><span class=line><span class=cl>2,1438270017,2015-07-30 23:26:57
</span></span><span class=line><span class=cl>3,1438270048,2015-07-30 23:27:28
</span></span><span class=line><span class=cl>4,1438270077,2015-07-30 23:27:57
</span></span><span class=line><span class=cl>5,1438270083,2015-07-30 23:28:03
</span></span><span class=line><span class=cl>6,1438270107,2015-07-30 23:28:27
</span></span><span class=line><span class=cl>7,1438270110,2015-07-30 23:28:30
</span></span><span class=line><span class=cl>8,1438270112,2015-07-30 23:28:32
</span></span><span class=line><span class=cl>9,1438270115,2015-07-30 23:28:35
</span></span><span class=line><span class=cl>10,1438270128,2015-07-30 23:28:48
</span></span><span class=line><span class=cl>11,1438270136,2015-07-30 23:28:56
</span></span><span class=line><span class=cl>12,1438270144,2015-07-30 23:29:04
</span></span><span class=line><span class=cl>13,1438270158,2015-07-30 23:29:18
</span></span><span class=line><span class=cl>14,1438270161,2015-07-30 23:29:21
</span></span><span class=line><span class=cl>15,1438270168,2015-07-30 23:29:28
</span></span><span class=line><span class=cl>16,1438270174,2015-07-30 23:29:34</span></span></code></pre></td></tr></table></div></div><p>也可以直接利用谷歌 BigQuery 获取和分析以太坊数据，见<a href=https://www.jianshu.com/p/b611dbb526cd target=_blank rel="external nofollow noopener noreferrer">使用谷歌 BigQuery 分析以太坊数据</a></p><h2 id=参考文献>参考文献</h2><p><a href=https://medium.com/validitylabs/how-to-interact-with-the-ethereum-blockchain-and-create-a-database-with-python-and-sql-3dcbd579b3c0 target=_blank rel="external nofollow noopener noreferrer">How to interact with the Ethereum blockchain and create a database with Python and SQL</a></p><p><a href=https://ethereum.stackovernet.com/cn/q/5558 target=_blank rel="external nofollow noopener noreferrer">How do you work with Date and time on Ethereum platform</a></p><p><a href=https://cloud.google.com/blog/products/data-analytics/ethereum-bigquery-public-dataset-smart-contract-analytics target=_blank rel="external nofollow noopener noreferrer">Google Cloud-Ethereum in BigQuery</a></p><p><a href=https://cloud.google.com/bigquery/docs/reference/standard-sql/data-types target=_blank rel="external nofollow noopener noreferrer">Google Cloud数据库操作</a></p><p><a href=https://googleapis.github.io/google-cloud-python/latest/bigquery/usage/queries.html target=_blank rel="external nofollow noopener noreferrer">Google Cloud文档</a></p><p><a href=https://www.kaggle.com/docs/datasets target=_blank rel="external nofollow noopener noreferrer">How to use Kaggle</a></p><p><a href=https://www.kaggle.com/bigquery/ethereum-blockchain target=_blank rel="external nofollow noopener noreferrer">Kaggle调用BigQuery</a></p><p><a href=https://www.kaggle.com/sohier/beyond-queries-exploring-the-bigquery-api target=_blank rel="external nofollow noopener noreferrer">Kaggle-Beyond Queries: Exploring the BigQuery API</a></p><p><a href=https://www.kaggle.com/mrisdal/visualizing-average-ether-costs-over-time/data target=_blank rel="external nofollow noopener noreferrer">Kaggle-Visualizing average Ether costs over time</a></p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://www.infoq.cn/article/ethereum-bigquery-public-dataset-smart-contract-analytics target=_blank rel="external nofollow noopener noreferrer">谷歌宣布其 BigQuery 服务已支持以太坊区块链数据分析</a>&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="更新于 2019-04-05 21:35:00">更新于 2019-04-05&nbsp;</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md><span><a href=/2019/extract-the-block-generation-time-of-ethereum/index.md title=阅读原始文档 class=link-to-markdown>阅读原始文档</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Pocket" data-sharer=pocket data-url=https://shuzang.github.io/2019/extract-the-block-generation-time-of-ethereum/><i class="fa-brands fa-get-pocket fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://shuzang.github.io/2019/extract-the-block-generation-time-of-ethereum/ data-title=提取以太坊的区块产生时间><i class="fa-brands fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/tags/%E5%8C%BA%E5%9D%97%E9%93%BE/ class=post-tag>区块链</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/2019/blockchain-platform-compare-and-select/ class=post-nav-item rel=prev title=研究记录2-区块链平台选择的思考><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>研究记录2-区块链平台选择的思考</a>
<a href=/2019/industry-4.0-development-and-application-of-intelligent-manufacturing/ class=post-nav-item rel=next title="Industry 4.0 Development and Application of Intelligent Manufacturing">Industry 4.0 Development and Application of Intelligent Manufacturing<i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div class=post-reward><div class=comment></div><input type=checkbox class=reward-input name=reward id=fi-reward hidden>
<label class=reward-button for=fi-reward>赞赏</label><div class=reward-ways data-mode=static><div><img loading=lazy src=/images/alipay.png srcset="/images/alipay.png, /images/alipay.png 1.5x, /images/alipay.png 2x" sizes=auto data-title="Shuzang 支付宝" data-alt="Shuzang 支付宝" style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span>支付宝</span></div><div><img loading=lazy src=/images/wechatpay.png srcset="/images/wechatpay.png, /images/wechatpay.png 1.5x, /images/wechatpay.png 2x" sizes=auto data-title="Shuzang 微信" data-alt="Shuzang 微信" style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span>微信</span></div></div></div></article></main><footer class=footer><div class=footer-container><div class="footer-line powered">由 <a href=https://gohugo.io/ target=_blank rel="external nofollow noopener noreferrer" title="Hugo 0.117.0">Hugo</a> 强力驱动 | 主题 - <a href=https://github.com/hugo-fixit/FixIt target=_blank rel=external title="FixIt v0.2.18"><img class=fixit-icon src=/fixit.min.svg alt="FixIt logo">&nbsp;FixIt</a></div><div class="footer-line copyright" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2018 - 2023</span><span class=author itemprop=copyrightHolder>
<a href=/>Shuzang</a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div><div class="footer-line visitor"><span id=busuanzi_container_site_uv title=总访客数><i class="fa-regular fa-user fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_site_uv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span><span id=busuanzi_container_site_pv class=footer-divider title=总访问量><i class="fa-regular fa-eye fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_site_pv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label=回到顶部><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class="variant-numeric d-none">0%</span></div></div><a href=https://github.com/shuzang/shuzang.github.io title="View source on GitHub" target=_blank rel="external nofollow" class="github-corner right d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div id=mask></div><div class=reading-progress-bar style=left:0;top:0></div><noscript><div class=noscript-warning>FixIt 主题在启用 JavaScript 的情况下效果最佳。</div></noscript></div><link rel=stylesheet href=/lib/lightgallery/css/lightgallery-bundle.min.css><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/pace/themes/blue/pace-theme-minimal.css><script src=/lib/autocomplete/autocomplete.min.js defer></script><script src=/lib/fuse/fuse.min.js defer></script><script src=/lib/twemoji/twemoji.min.js defer></script><script src=/lib/lightgallery/lightgallery.min.js defer></script><script src=/lib/lightgallery/plugins/thumbnail/lg-thumbnail.min.js defer></script><script src=/lib/lightgallery/plugins/zoom/lg-zoom.min.js defer></script><script src=/lib/sharer/sharer.min.js async defer></script><script src=/lib/katex/katex.min.js defer></script><script src=/lib/katex/auto-render.min.js defer></script><script src=/lib/katex/copy-tex.min.js defer></script><script src=/lib/katex/mhchem.min.js defer></script><script src=/lib/pangu/pangu.min.js defer></script><script src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js async defer></script><script src=/lib/pace/pace.min.js async defer></script><script>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:10},comment:{enable:!1},lightgallery:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},pangu:{enable:!0,selector:"article"},search:{distance:100,findAllMatches:!1,fuseIndexURL:"/index.json",highlightTag:"em",ignoreFieldNorm:!1,ignoreLocation:!1,isCaseSensitive:!1,location:0,maxResultLength:10,minMatchCharLength:2,noResultsFound:"没有找到结果",snippetLength:30,threshold:.3,type:"fuse",useExtendedSearch:!1},twemoji:!0}</script><script src=/js/theme.min.js defer></script></body></html>