<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>Golang语法基础2-命令、包与模块 - Shuzang's Blog</title><meta name=author content="Shuzang"><meta name=author-link content><meta name=description content="本篇介绍Go中的基础命令，包和模块。 1. 命令 Go 在安装后自带一个命令行工具，名为 go，用来下载、编译、安装、测试 Go 的包和源文件，关于 Go CLI 的发展历"><meta name=keywords content="Golang"><meta itemprop=name content="Golang语法基础2-命令、包与模块"><meta itemprop=description content="本篇介绍Go中的基础命令，包和模块。 1. 命令 Go 在安装后自带一个命令行工具，名为 go，用来下载、编译、安装、测试 Go 的包和源文件，关于 Go CLI 的发展历"><meta itemprop=datePublished content="2019-09-19T00:00:00+00:00"><meta itemprop=dateModified content="2020-09-28T00:00:00+00:00"><meta itemprop=wordCount content="6954"><meta itemprop=image content="https://shuzang.github.io/logo.png"><meta itemprop=keywords content="Golang,"><meta property="og:title" content="Golang语法基础2-命令、包与模块"><meta property="og:description" content="本篇介绍Go中的基础命令，包和模块。 1. 命令 Go 在安装后自带一个命令行工具，名为 go，用来下载、编译、安装、测试 Go 的包和源文件，关于 Go CLI 的发展历"><meta property="og:type" content="article"><meta property="og:url" content="https://shuzang.github.io/2019/golang-basic-grammer-2-command-package-module/"><meta property="og:image" content="https://shuzang.github.io/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-09-19T00:00:00+00:00"><meta property="article:modified_time" content="2020-09-28T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://shuzang.github.io/logo.png"><meta name=twitter:title content="Golang语法基础2-命令、包与模块"><meta name=twitter:description content="本篇介绍Go中的基础命令，包和模块。 1. 命令 Go 在安装后自带一个命令行工具，名为 go，用来下载、编译、安装、测试 Go 的包和源文件，关于 Go CLI 的发展历"><meta name=application-name content="FixIt"><meta name=apple-mobile-web-app-title content="FixIt"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=https://shuzang.github.io/2019/golang-basic-grammer-2-command-package-module/><link rel=prev href=https://shuzang.github.io/2019/%E8%80%81%E8%88%8D%E5%B9%BD%E9%BB%98%E5%B0%8F%E8%AF%B4/><link rel=next href=https://shuzang.github.io/2019/%E5%BA%9F%E5%90%8D%E7%94%B0%E5%9B%AD%E5%B0%8F%E8%AF%B4/><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><meta name=google-site-verification content="UA-209130979-1"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Golang语法基础2-命令、包与模块","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/shuzang.github.io\/2019\/golang-basic-grammer-2-command-package-module\/"},"genre":"posts","keywords":"Golang","wordcount":6954,"url":"https:\/\/shuzang.github.io\/2019\/golang-basic-grammer-2-command-package-module\/","datePublished":"2019-09-19T00:00:00+00:00","dateModified":"2020-09-28T00:00:00+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Shuzang"},"description":""}</script></head><body data-header-desktop=sticky data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper data-page-style=normal><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper data-github-corner=right><div class=header-title><a href=/ title="Shuzang's Blog"><img loading=lazy src=/images/avatar.png srcset="/images/avatar.png, /images/avatar.png 1.5x, /images/avatar.png 2x" sizes=auto data-title="Shuzang's Blog" data-alt="Shuzang's Blog" class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>Shuzang's Blog</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 文章</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/>标签</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 关于</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder=搜索文章标题或内容…… id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Shuzang's Blog"><img loading=lazy src=/images/avatar.png srcset="/images/avatar.png, /images/avatar.png 1.5x, /images/avatar.png 2x" sizes=auto data-title=/images/avatar.png data-alt=/images/avatar.png class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>Shuzang's Blog</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容…… id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></li><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 文章</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/>标签</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 关于</a></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=container><aside class=toc id=toc-auto><h2 class=toc-title>目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>Golang语法基础2-命令、包与模块</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><span class=author><i class="fa-solid fa-user-circle" aria-hidden=true></i>
Shuzang</span></span>
<span class=post-category>收录于 <a href=/categories/%E7%88%B1%E7%BC%96%E7%A8%8B%E7%88%B1%E6%8A%80%E6%9C%AF%E7%9A%84%E5%AD%A9%E5%AD%90/><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> 爱编程爱技术的孩子</a></span></div><div class=post-meta-line><span title="发布于 2019-09-19 00:00:00"><i class="fa-regular fa-calendar-alt fa-fw me-1" aria-hidden=true></i><time datetime=2019-09-19>2019-09-19</time></span>&nbsp;<span title="更新于 2020-09-28 00:00:00"><i class="fa-regular fa-edit fa-fw me-1" aria-hidden=true></i><time datetime=2020-09-28>2020-09-28</time></span>&nbsp;<span><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden=true></i>约 6954 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden=true></i>预计阅读 14 分钟</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#1-命令>1. 命令</a><ul><li><a href=#11-command>1.1 command</a><ul><li><a href=#go-build>go build</a></li><li><a href=#go-install>go install</a></li><li><a href=#go-get>go get</a></li><li><a href=#go-run>go run</a></li><li><a href=#go-version>go version</a></li><li><a href=#go-env>go env</a></li><li><a href=#其它>其它</a></li></ul></li><li><a href=#12-topic>1.2 topic</a></li></ul></li><li><a href=#2-包>2. 包</a><ul><li><a href=#21-包名>2.1 包名</a></li><li><a href=#22-标准库>2.2 标准库</a></li><li><a href=#23-导入包>2.3 导入包</a></li><li><a href=#24-使用脚本编译或安装>2.4 使用脚本编译或安装</a></li></ul></li><li><a href=#3-模块>3. 模块</a><ul><li><a href=#31-创建新模块>3.1 创建新模块</a></li><li><a href=#32-添加依赖>3.2 添加依赖</a></li><li><a href=#33-更新依赖>3.3 更新依赖</a></li><li><a href=#34-在主版本号上添加依赖>3.4 在主版本号上添加依赖</a></li><li><a href=#35-更新依赖到新的主版本号>3.5 更新依赖到新的主版本号</a></li><li><a href=#36-移除不使用的依赖>3.6 移除不使用的依赖</a></li></ul></li></ul></nav></div></div><div class=content id=content><p>本篇介绍Go中的基础命令，包和模块。</p><h2 id=1-命令>1. 命令</h2><p>Go 在安装后自带一个命令行工具，名为 <code>go</code>，用来下载、编译、安装、测试 Go 的包和源文件，关于 Go CLI 的发展历史和设计理念，可以查看 <a href=https://golang.google.cn/doc/articles/go_command.html target=_blank rel="external nofollow noopener noreferrer">About the go command</a>，这里只介绍如何使用这些命令。</p><p>Go 命令的用法如下</p><div class=highlight id=id-1><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>go &lt;command&gt; <span class=o>[</span>arguments<span class=o>]</span></span></span></code></pre></td></tr></table></div></div><p>可用命令如下，使用 <code>go help &lt;command></code> 可获取对应命令的帮助信息</p><div class=highlight id=id-2><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>bug         start a bug report
</span></span><span class=line><span class=cl>build       compile packages and dependencies
</span></span><span class=line><span class=cl>clean       remove object files and cached files
</span></span><span class=line><span class=cl>doc         show documentation <span class=k>for</span> package or symbol
</span></span><span class=line><span class=cl>env         print Go environment information
</span></span><span class=line><span class=cl>fix         update packages to use new APIs
</span></span><span class=line><span class=cl>fmt         gofmt <span class=o>(</span>reformat<span class=o>)</span> package sources
</span></span><span class=line><span class=cl>generate    generate Go files by processing <span class=nb>source</span>
</span></span><span class=line><span class=cl>get         add dependencies to current module and install them
</span></span><span class=line><span class=cl>install     compile and install packages and dependencies
</span></span><span class=line><span class=cl>list        list packages or modules
</span></span><span class=line><span class=cl>mod         module maintenance
</span></span><span class=line><span class=cl>run         compile and run Go program
</span></span><span class=line><span class=cl><span class=nb>test</span>        <span class=nb>test</span> packages
</span></span><span class=line><span class=cl>tool        run specified go tool
</span></span><span class=line><span class=cl>version     print Go version
</span></span><span class=line><span class=cl>vet         report likely mistakes in packages</span></span></code></pre></td></tr></table></div></div><p>其它的一些帮助主题如下，使用 <code>go help &lt;topic></code> 可以查看相关主题的说明</p><div class=highlight id=id-3><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>buildmode   build modes
</span></span><span class=line><span class=cl>c           calling between Go and C
</span></span><span class=line><span class=cl>cache       build and <span class=nb>test</span> caching
</span></span><span class=line><span class=cl>environment environment variables
</span></span><span class=line><span class=cl>filetype    file types
</span></span><span class=line><span class=cl>go.mod      the go.mod file
</span></span><span class=line><span class=cl>gopath      GOPATH environment variable
</span></span><span class=line><span class=cl>gopath-get  legacy GOPATH go get
</span></span><span class=line><span class=cl>goproxy     module proxy protocol
</span></span><span class=line><span class=cl>importpath  import path syntax
</span></span><span class=line><span class=cl>modules     modules, module versions, and more
</span></span><span class=line><span class=cl>module-get  module-aware go get
</span></span><span class=line><span class=cl>module-auth module authentication using go.sum
</span></span><span class=line><span class=cl>module-private module configuration <span class=k>for</span> non-public modules
</span></span><span class=line><span class=cl>packages    package lists and patterns
</span></span><span class=line><span class=cl>testflag    testing flags
</span></span><span class=line><span class=cl>testfunc    testing functions</span></span></code></pre></td></tr></table></div></div><p>我们之前已经接触过几种命令，包括查看环境变量的 <code>go env</code>，查看go版本的 <code>go version</code>，用于编译和安装的<code>go install</code>和<code>go build</code>，已经对它们有了一定的了解，下面详细解释所有的命令，明确它们的作用，弄清楚它们的区别。</p><h3 id=11-command>1.1 command</h3><p>当前命令一共17个，使用<code> go help &lt;command></code>可以查看这些命令的详细说明</p><h4 id=go-build>go build</h4><div class=highlight id=id-4><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>go build <span class=o>[</span>-o output<span class=o>]</span> <span class=o>[</span>-i<span class=o>]</span> <span class=o>[</span>build flags<span class=o>]</span> <span class=o>[</span>packages<span class=o>]</span></span></span></code></pre></td></tr></table></div></div><p><code>go build</code> 编译导入的包和依赖，但会忽略掉以 <code>_test.go</code> 结尾的文件，因为这些文件是用来测试的。</p><p>编译<code>main</code>包时，输出的可执行文件会放到<strong>当前</strong>目录下，可执行文件的后缀取决于操作系统，只有在windows下后缀才会是<code>.exe</code>，而可执行文件的名字同编译的go文件名相同，如ed.go会编译成ed.exe。</p><p>编译多个包或单个非<code>main</code>包时，编译器不会输出可执行文件，仅仅作为这些包是否可编译的一个检查。</p><p>以 hello world 程序为例，编译后的 hello.exe 文件位于项目根目录下</p><div class=highlight id=id-5><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ go build github.com/shuzang/hello
</span></span><span class=line><span class=cl>$ ls
</span></span><span class=line><span class=cl>go.mod  go.sum  gotest.exe  main.go</span></span></code></pre></td></tr></table></div></div><p>加入 <code>-o</code> 参数可以指定输出文件，<code>-i</code>则在编译后自动执行安装过程（默认只会编译不会安装）</p><h4 id=go-install>go install</h4><p><code>go install</code> 命令在编译的基础上增添了安装这一步，<code>安装</code> 的基本含义是将生成的可执行文件放到指定的目录，默认为 GOBIN 环境变量指定的目录，即 <code>$GOPATH/bin</code>。仍以<code>hello</code>为例，如下命令执行后，<code>hello.exe</code>文件将位于<code>$GOPATH/bin</code>目录下</p><div class=highlight id=id-6><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=p>&gt;</span> <span class=n>go</span> <span class=n>install</span> <span class=n>github</span><span class=p>.</span><span class=n>com</span><span class=p>/</span><span class=n>shuzang</span><span class=p>/</span><span class=n>hello</span></span></span></code></pre></td></tr></table></div></div><h4 id=go-get>go get</h4><div class=highlight id=id-7><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>go get <span class=o>[</span>-d<span class=o>]</span> <span class=o>[</span>-t<span class=o>]</span> <span class=o>[</span>-u<span class=o>]</span> <span class=o>[</span>-v<span class=o>]</span> <span class=o>[</span>-insecure<span class=o>]</span> <span class=o>[</span>build flags<span class=o>]</span> <span class=o>[</span>packages<span class=o>]</span></span></span></code></pre></td></tr></table></div></div><p><code>go get</code> 相比 <code>go install</code> 又多了一步：解析与添加依赖到当前包。完成这一步后自动编译和安装它们。</p><p><code>go get</code> 下载的默认路径是 <code>GOPATH/pkg/mod</code> ，默认下载最新版本，但版本的选择规则比较复杂，可以查看命令说明。下面是一个使用实例</p><div class=highlight id=id-8><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=p>&gt;</span> <span class=n>go</span> <span class=n>get</span> <span class=n>-v</span> <span class=n>github</span><span class=p>.</span><span class=n>com</span><span class=p>/</span><span class=n>google</span><span class=p>/</span><span class=n>codesearch</span><span class=p>/</span><span class=n>index</span>
</span></span><span class=line><span class=cl><span class=n>github</span><span class=p>.</span><span class=n>com</span><span class=p>/</span><span class=n>google</span><span class=p>/</span><span class=n>codesearch</span> <span class=p>(</span><span class=n>download</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>github</span><span class=p>.</span><span class=n>com</span><span class=p>/</span><span class=n>google</span><span class=p>/</span><span class=n>codesearch</span><span class=p>/</span><span class=n>sparse</span>
</span></span><span class=line><span class=cl><span class=n>github</span><span class=p>.</span><span class=n>com</span><span class=p>/</span><span class=n>google</span><span class=p>/</span><span class=n>codesearch</span><span class=p>/</span><span class=n>index</span></span></span></code></pre></td></tr></table></div></div><p><code>-v</code>参数输出下载安装的详细过程，并输出debug信息，其它的一些可选参数说明如下</p><ul><li><code>-d</code>只下载不安装</li><li><code>-fix</code>在对下载的包解析依赖项或编译前先运行修复工具</li><li><code>-t</code>下载为指定的包生成测试需要的包</li><li><code>-u</code>用于更新已有的包和依赖</li></ul><h4 id=go-run>go run</h4><p>以上三个命令虽然都包含编译过程，但也到此为止，在生成可执行文件后将不再做任何操作，需要自己来执行。<code>go run</code>命令则在编译后直接执行运行操作，以<code>hello</code>为例</p><div class=highlight id=id-9><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=p>&gt;</span> <span class=n>go</span> <span class=n>run</span> <span class=n>github</span><span class=p>.</span><span class=n>com</span><span class=p>/</span><span class=n>shuzang</span><span class=p>/</span><span class=n>hello</span>
</span></span><span class=line><span class=cl><span class=n>Hello</span><span class=p>,</span> <span class=n>Go</span><span class=p>!</span></span></span></code></pre></td></tr></table></div></div><h4 id=go-version>go version</h4><p><code>go version</code>在没有参数时，会打印自身的版本信息</p><div class=highlight id=id-10><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=p>&gt;</span> <span class=n>go</span> <span class=n>version</span>
</span></span><span class=line><span class=cl><span class=n>go</span> <span class=n>version</span> <span class=n>go1</span><span class=p>.</span><span class=py>13</span><span class=p>.</span><span class=py>4</span> <span class=n>windows</span><span class=p>/</span><span class=n>amd64</span></span></span></code></pre></td></tr></table></div></div><p>但是<code>go version</code>后也可以跟一个目录，这时会递归的查找该目录下的可执行文件，并打印它们的版本信息，以<code>bin</code>目录为例</p><div class=highlight id=id-11><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=nb>PS </span><span class=n>C:</span><span class=p>\</span><span class=n>Users</span><span class=p>\</span><span class=n>lylw1</span><span class=p>\</span><span class=n>go</span><span class=p>&gt;</span> <span class=n>go</span> <span class=n>version</span> <span class=n>bin</span>
</span></span><span class=line><span class=cl><span class=n>bin</span><span class=p>\</span><span class=n>cobra</span><span class=p>.</span><span class=n>exe</span><span class=err>:</span> <span class=n>go1</span><span class=p>.</span><span class=py>13</span><span class=p>.</span><span class=py>4</span>
</span></span><span class=line><span class=cl><span class=n>bin</span><span class=p>\</span><span class=n>dlv</span><span class=p>.</span><span class=n>exe</span><span class=err>:</span> <span class=n>go1</span><span class=p>.</span><span class=py>13</span><span class=p>.</span><span class=py>4</span>
</span></span><span class=line><span class=cl><span class=n>bin</span><span class=p>\</span><span class=nb>go-outline</span><span class=p>.</span><span class=n>exe</span><span class=err>:</span> <span class=n>go1</span><span class=p>.</span><span class=py>13</span><span class=p>.</span><span class=py>4</span>
</span></span><span class=line><span class=cl><span class=n>bin</span><span class=p>\</span><span class=nb>go-symbols</span><span class=p>.</span><span class=n>exe</span><span class=err>:</span> <span class=n>go1</span><span class=p>.</span><span class=py>13</span><span class=p>.</span><span class=py>4</span>
</span></span><span class=line><span class=cl><span class=n>bin</span><span class=p>\</span><span class=nb>gocode-gomod</span><span class=p>.</span><span class=n>exe</span><span class=err>:</span> <span class=n>go1</span><span class=p>.</span><span class=py>13</span><span class=p>.</span><span class=py>4</span>
</span></span><span class=line><span class=cl><span class=n>bin</span><span class=p>\</span><span class=n>gocode</span><span class=p>.</span><span class=n>exe</span><span class=err>:</span> <span class=n>go1</span><span class=p>.</span><span class=py>13</span><span class=p>.</span><span class=py>4</span>
</span></span><span class=line><span class=cl><span class=n>bin</span><span class=p>\</span><span class=n>godef</span><span class=p>.</span><span class=n>exe</span><span class=err>:</span> <span class=n>go1</span><span class=p>.</span><span class=py>13</span><span class=p>.</span><span class=py>4</span>
</span></span><span class=line><span class=cl><span class=n>bin</span><span class=p>\</span><span class=n>golint</span><span class=p>.</span><span class=n>exe</span><span class=err>:</span> <span class=n>go1</span><span class=p>.</span><span class=py>13</span><span class=p>.</span><span class=py>4</span>
</span></span><span class=line><span class=cl><span class=n>bin</span><span class=p>\</span><span class=n>gopkgs</span><span class=p>.</span><span class=n>exe</span><span class=err>:</span> <span class=n>go1</span><span class=p>.</span><span class=py>13</span><span class=p>.</span><span class=py>4</span>
</span></span><span class=line><span class=cl><span class=n>bin</span><span class=p>\</span><span class=n>gorename</span><span class=p>.</span><span class=n>exe</span><span class=err>:</span> <span class=n>go1</span><span class=p>.</span><span class=py>13</span><span class=p>.</span><span class=py>4</span>
</span></span><span class=line><span class=cl><span class=n>bin</span><span class=p>\</span><span class=n>goreturns</span><span class=p>.</span><span class=n>exe</span><span class=err>:</span> <span class=n>go1</span><span class=p>.</span><span class=py>13</span><span class=p>.</span><span class=py>4</span>
</span></span><span class=line><span class=cl><span class=n>bin</span><span class=p>\</span><span class=n>guru</span><span class=p>.</span><span class=n>exe</span><span class=err>:</span> <span class=n>go1</span><span class=p>.</span><span class=py>13</span><span class=p>.</span><span class=py>4</span>
</span></span><span class=line><span class=cl><span class=n>bin</span><span class=p>\</span><span class=n>hello</span><span class=p>.</span><span class=n>exe</span><span class=err>:</span> <span class=n>go1</span><span class=p>.</span><span class=py>13</span><span class=p>.</span><span class=mf>4</span></span></span></code></pre></td></tr></table></div></div><p>添加<code>-m</code>参数会打印包导入的模块信息，添加<code>-v</code>参数会将无法识别的文件信息也打印出来，以<code>stringutil</code>为例</p><div class=highlight id=id-12><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=p>&gt;</span> <span class=n>go</span> <span class=n>version</span> <span class=n>-v</span> <span class=n>src</span><span class=p>/</span><span class=n>github</span><span class=p>.</span><span class=n>com</span><span class=p>/</span><span class=n>shuzang</span><span class=p>/</span><span class=n>stringutil</span>
</span></span><span class=line><span class=cl><span class=n>src</span><span class=p>\</span><span class=n>github</span><span class=p>.</span><span class=n>com</span><span class=p>\</span><span class=n>shuzang</span><span class=p>\</span><span class=n>stringutil</span><span class=p>\</span><span class=n>reverse</span><span class=p>.</span><span class=n>go</span><span class=err>:</span> <span class=n>not</span> <span class=n>executable</span> <span class=n>file</span></span></span></code></pre></td></tr></table></div></div><h4 id=go-env>go env</h4><div class=highlight id=id-13><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>go env <span class=o>[</span>-json<span class=o>]</span> <span class=o>[</span>-u<span class=o>]</span> <span class=o>[</span>-w<span class=o>]</span> <span class=o>[</span>var ...<span class=o>]</span></span></span></code></pre></td></tr></table></div></div><p><code>go env</code>的基本作用是打印go的环境变量信息，添加<code>-json</code>参数可以以 JSON 的格式打印，但没有默认的脚本形式可读性高。添加 <code>-w</code> 参数可以设置某个环境变量的值，比如</p><div class=highlight id=id-14><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=p>&gt;</span> <span class=n>go</span> <span class=n>env</span> <span class=n>-w</span> <span class=n>GOPATH</span><span class=p>=</span><span class=n>d:</span><span class=p>\</span><span class=n>go</span></span></span></code></pre></td></tr></table></div></div><p>与之相反，重置某个环境变量为默认值可以使用<code>-u</code>参数</p><div class=highlight id=id-15><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=line><span class=cl><span class=p>&gt;</span> <span class=n>go</span> <span class=n>env</span> <span class=n>-u</span> <span class=n>GOPATH</span></span></span></code></pre></td></tr></table></div></div><h4 id=其它>其它</h4><p>其它的命令使用频率没有上面几个高，因此只简单介绍其作用，用的时候再去查用法即可，<code>go test</code>和<code>go mod</code>两个命令以后单独介绍。</p><ul><li><code>go bug</code>，作用是打开默认浏览器并启动新的 Bug 报告，该报告包含有用的系统信息。</li><li><code>go clean</code>，移除源码包中编译生成的文件</li><li><code>go doc</code>，显示包或符号的文档</li><li><code>go fix</code>，用来更新老版本的代码到新版本</li><li><code>go fmt</code>，go的代码有严格的格式要求，该命令用来做格式化，但一般IDE都会帮忙做这件事</li><li><code>go generate</code>，通过处理源码生成go文件</li><li><code>go list</code>，列出当前安装的包或模块</li><li><code>go mod</code>，模块维持</li><li><code>go test</code>，自动读取源码目录下名为<code>*_test.go</code>的文件进行测试</li><li><code>go tool</code>，运行指定的go工具，后面跟的参数是其它命令</li><li><code>go vet</code>，用于检查Go语言源码中的静态错误</li></ul><h3 id=12-topic>1.2 topic</h3><p>topic有15个，本质是对Go中的一些概念作解释，所以它实际上是一些文档说明，使用<code>go help &lt;topic></code>查看，这些topic包括</p><ul><li>buildmode：构建模式的描述</li><li>c：Go和c的相互调用</li><li>cache：构建和测试缓存</li><li>environment：环境变量</li><li>filetype：文件类型</li><li>go.mod：go.mod文件</li><li>gopath：GOPATH环境变量</li><li>gopath-get：</li><li>goproxy：模块代理协议</li><li>importpath：导入路径语法</li><li>modules：模块，模块版本等</li><li>modules-get：</li><li>packages：包列表的描述</li><li>testflag：测试符号描述</li><li>testfunc：测试函数描述</li></ul><h2 id=2-包>2. 包</h2><p>包是Go语言代码组织和代码编译的一个基本结构，一个包可能由一个或多个<code>.go</code>文件组成，而一个或多个包可以构成完整的项目(仓库)。</p><h3 id=21-包名>2.1 包名</h3><p>每个Go源文件(<code>.go</code>文件)都必须在非注释的首行声明属于哪个包</p><div class=highlight id=id-16><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>name</span></span></span></code></pre></td></tr></table></div></div><p><code>name</code>就是包名，包名的命名遵循命名规范，而且不得使用大写字母。每个Go应用程序都必须包含一个<code>main</code>包</p><p>一个Go程序通过<code>import</code>关键字将一组包衔接在一起，如</p><div class=highlight id=id-17><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;fmt&#34;</span></span></span></code></pre></td></tr></table></div></div><p>包名需要用双引号包围，多个包可以使用多个<code>import</code>语句，也可以使用一个小括号全部放在一起，如</p><div class=highlight id=id-18><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>   <span class=s>&#34;fmt&#34;</span>
</span></span><span class=line><span class=cl>   <span class=s>&#34;os&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;crypto/rot13&#34;</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;github.com/shuzang/hello&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>包名也是导入路径的最后一个字段，比如<code>crypto/rot13</code>，其包名为<code>rot13</code>；<code>github.com/shuzang/hello</code>，其包名为<code>hello</code></p><p>没有必要刻意使用不同的包名，只要导入路径保持唯一即可</p><h3 id=22-标准库>2.2 标准库</h3><p>像 <code>fmt</code>、<code>os</code> 等这样具有常用功能的内置包在 Go 语言中有 150 个以上，它们被称为标准库，大部分内置于Go本身，位于<code>C:\Go\pkg\windows_amd64</code>，即<code>$GOROOT/pkg/$GOOS__$GOARCH</code>目录下，不需要额外的下载、安装和编译，详细列表和说明可以在 <a href=https://golang.google.cn/pkg/ target=_blank rel="external nofollow noopener noreferrer">Go Packages</a> 查看，这里简单介绍一些常用包的基本功能</p><ul><li><code>unsafe</code>: 包含了一些打破 Go 语言“类型安全”的命令，一般的程序中不会被使用，可用在 C/C++ 程序的调用中</li><li>系统操作类<ul><li><code>os</code>: 提供给我们一个平台无关性的操作系统功能接口，采用类Unix设计，隐藏了不同操作系统间差异，让不同的文件系统和操作系统对象表现一致</li><li><code>os/exec</code>: 提供我们运行外部操作系统命令和程序的方式</li><li><code>syscall</code>: 底层的外部包，提供了操作系统底层调用的基本接口</li></ul></li><li><code>archive/tar</code> 和 <code>/zip-compress</code>：压缩(解压缩)文件功能。</li><li>输入输出类<ul><li><code>fmt</code>: 提供了格式化输入输出功能</li><li><code>io</code>: 提供了基本输入输出功能，大多数是围绕系统功能的封装</li><li><code>bufio</code>: 缓冲输入输出功能的封装</li><li><code>path/filepath</code>: 用来操作在当前系统中的目标文件名路径</li><li><code>flag</code>: 对命令行参数的操作　</li></ul></li><li>字符串操作类<ul><li><code>strings</code>: 提供对字符串的操作</li><li><code>strconv</code>: 提供将字符串转换为基础类型的功能</li><li><code>unicode</code>: 为 unicode 型的字符串提供特殊的功能</li><li><code>regexp</code>: 正则表达式功能</li><li><code>bytes</code>: 提供对字符型分片的操作</li><li><code>index/suffixarray</code>: 子字符串快速查询</li></ul></li><li>数学<ul><li><code>math</code>: 基本的数学函数</li><li><code>math/cmath</code>: 对复数的操作</li><li><code>math/rand</code>: 伪随机数生成</li><li><code>sort</code>: 为数组排序和自定义集合</li><li><code>math/big</code>: 大数的实现和计算</li></ul></li><li>数据结构<ul><li><code>list</code>: 双链表</li><li><code>ring</code>: 环形链表</li></ul></li><li>时间<ul><li><code>time</code>: 日期和时间的基本操作</li><li><code>log</code>: 记录程序运行时产生的日志,我们将在后面的章节使用它</li></ul></li><li>编/解码<ul><li><code>encoding/json</code>: 读取并解码和写入并编码 JSON 数据</li><li><code>encoding/xml</code>:简单的 XML1.0 解析器</li><li><code>text/template</code>:生成像 HTML 一样的数据与文本混合的数据驱动模板</li></ul></li><li>网络<ul><li><code>net</code>: 网络数据的基本操作。</li><li><code>http</code>: 提供了一个可扩展的 HTTP 服务器和基础客户端，解析 HTTP 请求和回复。</li><li><code>html</code>: HTML5 解析器</li></ul></li><li><code>runtime</code>: Go 程序运行时的交互操作，例如垃圾回收和协程创建。</li><li><code>reflect</code>: 实现通过程序运行时反射，让程序操作任意类型的变量。</li></ul><p>Go的生态远不止这些标准库，社区里存在大量的第三方包或项目，在开发自己的项目时，最好先查找下是否有已存在的第三方包或可用的库。 <a href=https://gowalker.org/ target=_blank rel="external nofollow noopener noreferrer">Go Walker</a> 支持根据包名在海量数据中查询。</p><h3 id=23-导入包>2.3 导入包</h3><p>导入包的基本格式如下</p><div class=highlight id=id-19><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;包的路径或 URL 地址&#34;</span> 
</span></span></code></pre></td></tr></table></div></div><p>”包的路径“指可以是以下这种形式</p><div class=highlight id=id-20><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;./pack1/pack1&#34;</span></span></span></code></pre></td></tr></table></div></div><p>而URL地址指的是下载的外部安装包</p><div class=highlight id=id-21><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>import</span> <span class=err>&#34;</span><span class=nx>github</span><span class=p>.</span><span class=nx>com</span><span class=o>/</span><span class=nx>org1</span><span class=o>/</span><span class=nx>pack1</span><span class=err>”</span></span></span></code></pre></td></tr></table></div></div><p>导入时可以对包进行重命名，比如</p><div class=highlight id=id-22><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>import</span> <span class=nx>packx</span> <span class=err>&#34;</span><span class=nx>github</span><span class=p>.</span><span class=nx>com</span><span class=o>/</span><span class=nx>org1</span><span class=o>/</span><span class=nx>pack1</span><span class=err>”</span></span></span></code></pre></td></tr></table></div></div><p>也可以重命名为两种特殊符号：<code>.</code>和<code>_</code>，前者可以在使用时省略包名，直接使用对外部可见的函数和变量，后者则只执行其中的init函数和初始化其全局变量，无法调用函数</p><div class=highlight id=id-23><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>import</span> <span class=p>.</span> <span class=s>&#34;./pack1&#34;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nx>_</span> <span class=s>&#34;./pack1/pack1&#34;</span></span></span></code></pre></td></tr></table></div></div><h3 id=24-使用脚本编译或安装>2.4 使用脚本编译或安装</h3><p>在 Linux/OS X 下可以用 Makefile 脚本 实现自动检测机器架构并调用正确的编译器和链接器</p><div class=highlight id=id-24><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>include</span> <span class=err>$</span><span class=p>(</span><span class=nx>GOROOT</span><span class=p>)</span><span class=o>/</span><span class=nx>src</span><span class=o>/</span><span class=nx>Make</span><span class=p>.</span><span class=nx>inc</span>
</span></span><span class=line><span class=cl><span class=nx>TARG</span><span class=p>=</span><span class=nx>pack1</span>
</span></span><span class=line><span class=cl><span class=nx>GOFILES</span><span class=p>=</span>\
</span></span><span class=line><span class=cl> 	<span class=nx>pack1</span><span class=p>.</span><span class=k>go</span>\
</span></span><span class=line><span class=cl> 	<span class=nx>pack1b</span><span class=p>.</span><span class=k>go</span>\
</span></span><span class=line><span class=cl><span class=nx>include</span> <span class=err>$</span><span class=p>(</span><span class=nx>GOROOT</span><span class=p>)</span><span class=o>/</span><span class=nx>src</span><span class=o>/</span><span class=nx>Make</span><span class=p>.</span><span class=nx>pkg</span></span></span></code></pre></td></tr></table></div></div><p>通过 <code>chmod 777 ./Makefile</code>确保它的可执行性，然后在终端使用make工具</p><h2 id=3-模块>3. 模块</h2><p>自 Go 1.11 起，开始支持使用 Go Module 进行包管理，这里参考 Go Blog 中的 <a href=https://blog.golang.org/using-go-modules target=_blank rel="external nofollow noopener noreferrer">Using Go Modules</a> 一文对其进行介绍。</p><p>模块(module)通过项目根目录下<code>go.mod</code>文件起作用，项目中使用的所有包的集合都在该文件中定义。<code>go.mod</code>文件定义了模块路径，用于项目中包的导入路径。以 delve 的<code>go.mod</code>文件为例</p><div class=highlight id=id-25><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>module</span> <span class=nx>github</span><span class=p>.</span><span class=nx>com</span><span class=o>/</span><span class=k>go</span><span class=o>-</span><span class=nx>delve</span><span class=o>/</span><span class=nx>delve</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>go</span> <span class=mf>1.10</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nf>require</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>	<span class=nx>github</span><span class=p>.</span><span class=nx>com</span><span class=o>/</span><span class=nx>cosiner</span><span class=o>/</span><span class=nx>argv</span> <span class=nx>v0</span><span class=mf>.0.0</span><span class=o>-</span><span class=mi>20170225145430</span><span class=o>-</span><span class=mi>13</span><span class=nx>bacc38a0a5</span>
</span></span><span class=line><span class=cl>	<span class=nx>github</span><span class=p>.</span><span class=nx>com</span><span class=o>/</span><span class=nx>cpuguy83</span><span class=o>/</span><span class=k>go</span><span class=o>-</span><span class=nx>md2man</span> <span class=nx>v1</span><span class=mf>.0.8</span> <span class=c1>// indirect
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nx>github</span><span class=p>.</span><span class=nx>com</span><span class=o>/</span><span class=nx>inconshreveable</span><span class=o>/</span><span class=nx>mousetrap</span> <span class=nx>v1</span><span class=mf>.0.0</span> <span class=c1>// indirect
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nx>github</span><span class=p>.</span><span class=nx>com</span><span class=o>/</span><span class=nx>kr</span><span class=o>/</span><span class=nx>pretty</span> <span class=nx>v0</span><span class=mf>.1.0</span> <span class=c1>// indirect
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nx>github</span><span class=p>.</span><span class=nx>com</span><span class=o>/</span><span class=nx>mattn</span><span class=o>/</span><span class=k>go</span><span class=o>-</span><span class=nx>colorable</span> <span class=nx>v0</span><span class=mf>.0.0</span><span class=o>-</span><span class=mi>20170327083344</span><span class=o>-</span><span class=nx>ded68f7a9561</span>
</span></span><span class=line><span class=cl>	<span class=nx>github</span><span class=p>.</span><span class=nx>com</span><span class=o>/</span><span class=nx>mattn</span><span class=o>/</span><span class=k>go</span><span class=o>-</span><span class=nx>isatty</span> <span class=nx>v0</span><span class=mf>.0.3</span>
</span></span><span class=line><span class=cl>	<span class=nx>github</span><span class=p>.</span><span class=nx>com</span><span class=o>/</span><span class=nx>onsi</span><span class=o>/</span><span class=nx>ginkgo</span> <span class=nx>v1</span><span class=mf>.8.0</span> <span class=c1>// indirect
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nx>github</span><span class=p>.</span><span class=nx>com</span><span class=o>/</span><span class=nx>onsi</span><span class=o>/</span><span class=nx>gomega</span> <span class=nx>v1</span><span class=mf>.5.0</span> <span class=c1>// indirect
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nx>github</span><span class=p>.</span><span class=nx>com</span><span class=o>/</span><span class=nx>peterh</span><span class=o>/</span><span class=nx>liner</span> <span class=nx>v0</span><span class=mf>.0.0</span><span class=o>-</span><span class=mi>20170317030525</span><span class=o>-</span><span class=mi>88609521</span><span class=nx>dc4b</span>
</span></span><span class=line><span class=cl>	<span class=nx>github</span><span class=p>.</span><span class=nx>com</span><span class=o>/</span><span class=nx>pkg</span><span class=o>/</span><span class=nx>profile</span> <span class=nx>v0</span><span class=mf>.0.0</span><span class=o>-</span><span class=mi>20170413231811</span><span class=o>-</span><span class=mo>06</span><span class=nx>b906832ed0</span>
</span></span><span class=line><span class=cl>	<span class=nx>github</span><span class=p>.</span><span class=nx>com</span><span class=o>/</span><span class=nx>russross</span><span class=o>/</span><span class=nx>blackfriday</span> <span class=nx>v0</span><span class=mf>.0.0</span><span class=o>-</span><span class=mi>20180428102519</span><span class=o>-</span><span class=mi>11635</span><span class=nx>eb403ff</span> <span class=c1>// indirect
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nx>github</span><span class=p>.</span><span class=nx>com</span><span class=o>/</span><span class=nx>sirupsen</span><span class=o>/</span><span class=nx>logrus</span> <span class=nx>v0</span><span class=mf>.0.0</span><span class=o>-</span><span class=mi>20180523074243</span><span class=o>-</span><span class=nx>ea8897e79973</span>
</span></span><span class=line><span class=cl>	<span class=nx>github</span><span class=p>.</span><span class=nx>com</span><span class=o>/</span><span class=nx>spf13</span><span class=o>/</span><span class=nx>cobra</span> <span class=nx>v0</span><span class=mf>.0.0</span><span class=o>-</span><span class=mi>20170417170307</span><span class=o>-</span><span class=nx>b6cb39589372</span>
</span></span><span class=line><span class=cl>	<span class=nx>github</span><span class=p>.</span><span class=nx>com</span><span class=o>/</span><span class=nx>spf13</span><span class=o>/</span><span class=nx>pflag</span> <span class=nx>v0</span><span class=mf>.0.0</span><span class=o>-</span><span class=mi>20170417173400</span><span class=o>-</span><span class=mf>9e4</span><span class=nx>c21054fa1</span> <span class=c1>// indirect
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nx>github</span><span class=p>.</span><span class=nx>com</span><span class=o>/</span><span class=nx>stretchr</span><span class=o>/</span><span class=nx>testify</span> <span class=nx>v1</span><span class=mf>.3.0</span> <span class=c1>// indirect
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=k>go</span><span class=p>.</span><span class=nx>starlark</span><span class=p>.</span><span class=nx>net</span> <span class=nx>v0</span><span class=mf>.0.0</span><span class=o>-</span><span class=mi>20190702223751</span><span class=o>-</span><span class=mi>32</span><span class=nx>f345186213</span>
</span></span><span class=line><span class=cl>	<span class=nx>golang</span><span class=p>.</span><span class=nx>org</span><span class=o>/</span><span class=nx>x</span><span class=o>/</span><span class=nx>arch</span> <span class=nx>v0</span><span class=mf>.0.0</span><span class=o>-</span><span class=mi>20171004143515</span><span class=o>-</span><span class=mo>077</span><span class=nx>ac972c2e4</span>
</span></span><span class=line><span class=cl>	<span class=nx>golang</span><span class=p>.</span><span class=nx>org</span><span class=o>/</span><span class=nx>x</span><span class=o>/</span><span class=nx>crypto</span> <span class=nx>v0</span><span class=mf>.0.0</span><span class=o>-</span><span class=mi>20180614174826</span><span class=o>-</span><span class=nx>fd5f17ee7299</span> <span class=c1>// indirect
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nx>golang</span><span class=p>.</span><span class=nx>org</span><span class=o>/</span><span class=nx>x</span><span class=o>/</span><span class=nx>sys</span> <span class=nx>v0</span><span class=mf>.0.0</span><span class=o>-</span><span class=mi>20190626221950</span><span class=o>-</span><span class=mo>04</span><span class=nx>f50cda93cb</span>
</span></span><span class=line><span class=cl>	<span class=nx>golang</span><span class=p>.</span><span class=nx>org</span><span class=o>/</span><span class=nx>x</span><span class=o>/</span><span class=nx>tools</span> <span class=nx>v0</span><span class=mf>.0.0</span><span class=o>-</span><span class=mi>20181120060634</span><span class=o>-</span><span class=nx>fc4f04983f62</span>
</span></span><span class=line><span class=cl>	<span class=nx>gopkg</span><span class=p>.</span><span class=nx>in</span><span class=o>/</span><span class=nx>airbrake</span><span class=o>/</span><span class=nx>gobrake</span><span class=p>.</span><span class=nx>v2</span> <span class=nx>v2</span><span class=mf>.0.9</span> <span class=c1>// indirect
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nx>gopkg</span><span class=p>.</span><span class=nx>in</span><span class=o>/</span><span class=nx>check</span><span class=p>.</span><span class=nx>v1</span> <span class=nx>v1</span><span class=mf>.0.0</span><span class=o>-</span><span class=mi>20180628173108</span><span class=o>-</span><span class=mi>788</span><span class=nx>fd7840127</span> <span class=c1>// indirect
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nx>gopkg</span><span class=p>.</span><span class=nx>in</span><span class=o>/</span><span class=nx>gemnasium</span><span class=o>/</span><span class=nx>logrus</span><span class=o>-</span><span class=nx>airbrake</span><span class=o>-</span><span class=nx>hook</span><span class=p>.</span><span class=nx>v2</span> <span class=nx>v2</span><span class=mf>.1.2</span> <span class=c1>// indirect
</span></span></span><span class=line><span class=cl><span class=c1></span>	<span class=nx>gopkg</span><span class=p>.</span><span class=nx>in</span><span class=o>/</span><span class=nx>yaml</span><span class=p>.</span><span class=nx>v2</span> <span class=nx>v2</span><span class=mf>.2.1</span>
</span></span><span class=line><span class=cl><span class=p>)</span></span></span></code></pre></td></tr></table></div></div><p>注意，使用模块进行包管理独立于原来的使用 gopath 进行包管理，可以在任意位置建立项目。如果<code>go.mod</code>文件放在<code>$GOPATH/src</code>，即原来的统一工作区，是不起作用的，会被旧的GOPATH模式屏蔽。自 Go 1.13 开始，module 模式已经成为了 Go 开发的默认模式。</p><h3 id=31-创建新模块>3.1 创建新模块</h3><p>在<code>$GOPATH/src</code>外的任意位置创建项目目录，<code>cd</code>进入该目录，创建<code>hello.go</code>文件</p><div class=highlight id=id-26><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>hello</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>Hello</span><span class=p>()</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s>&#34;Hello, world.&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div><p>为它写一个测试文件<code>hello_test.go</code></p><div class=highlight id=id-27><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>hello</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;testing&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>TestHello</span><span class=p>(</span><span class=nx>t</span> <span class=o>*</span><span class=nx>testing</span><span class=p>.</span><span class=nx>T</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>want</span> <span class=o>:=</span> <span class=s>&#34;Hello, world.&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>got</span> <span class=o>:=</span> <span class=nf>Hello</span><span class=p>();</span> <span class=nx>got</span> <span class=o>!=</span> <span class=nx>want</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>t</span><span class=p>.</span><span class=nf>Errorf</span><span class=p>(</span><span class=s>&#34;Hello() = %q, want %q&#34;</span><span class=p>,</span> <span class=nx>got</span><span class=p>,</span> <span class=nx>want</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div><p>现在，项目中有了一个包，因为项目目录位于<code>F:/hello</code>，执行<code>go test</code>的结果如下</p><div class=highlight id=id-28><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ go <span class=nb>test</span>
</span></span><span class=line><span class=cl>PASS
</span></span><span class=line><span class=cl>ok      _/F_/hello 0.240s</span></span></code></pre></td></tr></table></div></div><p>因为我们在 <code>$GOPATH</code> 外进行的测试，而且现在还没有<code>go.mod</code>文件，所以Go命令不知道导入路径，只能根据目录名生成一个导入路径。现在我们来创建<code>go.mod</code>文件并再次执行<code>go test</code>命令</p><div class=highlight id=id-29><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ go mod init example.com/hello
</span></span><span class=line><span class=cl>go: creating new go.mod: module example.com/hello
</span></span><span class=line><span class=cl>$ go <span class=nb>test</span>
</span></span><span class=line><span class=cl>PASS
</span></span><span class=line><span class=cl>ok      example.com/hello       0.214s</span></span></code></pre></td></tr></table></div></div><p><code>go mod init</code>命令用于创建<code>go.mod</code>文件，初始化Go模块，其内容如下</p><div class=highlight id=id-30><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>pwd</span>
</span></span><span class=line><span class=cl>/f/hello
</span></span><span class=line><span class=cl>$ ls
</span></span><span class=line><span class=cl>go.mod  hello.go  hello_test.go
</span></span><span class=line><span class=cl>$ cat go.mod
</span></span><span class=line><span class=cl>module example.com/hello
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>go 1.13</span></span></code></pre></td></tr></table></div></div><p><code>go.mod</code>文件位于项目根目录，其中的模块路径也只显示到项目根目录，子目录中包的导入路径由模块路径+子目录路径组成。我们在当前项目目录下创建<code>world</code>子目录，其导入路径将会是<code>example.com/hello/world</code></p><h3 id=32-添加依赖>3.2 添加依赖</h3><p>使用Go模块的首要目的是提升别的开发者使用我们编写的代码的体验。编辑<code>hello.go</code>文件，导入<code>rsc.io/quote</code>，然后用它来实施<code>Hello</code></p><div class=highlight id=id-31><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>hello</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;rsc.io/quote&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>Hello</span><span class=p>()</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>quote</span><span class=p>.</span><span class=nf>Hello</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div><p>现在运行<code>go test</code></p><div class=highlight id=id-32><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ go <span class=nb>test</span>
</span></span><span class=line><span class=cl>go: finding rsc.io/quote v1.5.2
</span></span><span class=line><span class=cl>go: downloading rsc.io/quote v1.5.2
</span></span><span class=line><span class=cl>go: extracting rsc.io/quote v1.5.2
</span></span><span class=line><span class=cl>go: finding rsc.io/sampler v1.3.0
</span></span><span class=line><span class=cl>go: finding golang.org/x/text v0.0.0-20170915032832-14c0d48ead0c
</span></span><span class=line><span class=cl>go: downloading rsc.io/sampler v1.3.0
</span></span><span class=line><span class=cl>go: extracting rsc.io/sampler v1.3.0
</span></span><span class=line><span class=cl>go: downloading golang.org/x/text v0.0.0-20170915032832-14c0d48ead0c
</span></span><span class=line><span class=cl>go: extracting golang.org/x/text v0.0.0-20170915032832-14c0d48ead0c
</span></span><span class=line><span class=cl>PASS
</span></span><span class=line><span class=cl>ok      example.com/hello    0.023s</span></span></code></pre></td></tr></table></div></div><p>Go使用<code>go.mod</code>文件中列举的依赖模块版本来解析导入的包，但是当在<code>go.mod</code>文件中找不到这个包是，就会自动的查找包含这个包的模块的最新版本，然后添加到<code>go.mod</code>文件。上例中自动下载了模块<code>rsc.io/quote v1.5.2</code>，还下载了它依赖的两个其它模块：<code>rsc.io/sampler</code>和<code>golang.org/x/text</code>。不过只有直接依赖会被记录到<code>go.mod</code>文件</p><div class=highlight id=id-33><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ cat go.mod
</span></span><span class=line><span class=cl>module example.com/hello
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>go 1.13
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>require rsc.io/quote v1.5.2</span></span></code></pre></td></tr></table></div></div><p>下载的包位于<code>$GOPATH/pkg/mod</code>，再次运行<code>go test</code>命令，就不会重新下载了，因为已经存在。</p><div class=highlight id=id-34><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ go <span class=nb>test</span>
</span></span><span class=line><span class=cl>PASS
</span></span><span class=line><span class=cl>ok      example.com/hello    0.020s</span></span></code></pre></td></tr></table></div></div><p>需要注意的是，尽管使用模块使得添加包管理简单轻松，但并非没有代价，当前代码的安全性、正确性和许可等都依赖于导入的模块，关于这个问题的详细描述可以查看 <a href=https://research.swtch.com/deps target=_blank rel="external nofollow noopener noreferrer">Our Software Dependency Problem</a>.</p><p>如上所述，添加一个直接依赖通常会引入一些间接的依赖，使用<code>go list -m all</code>可以列举当前模块和它们所有的依赖。</p><div class=highlight id=id-35><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ go list -m all
</span></span><span class=line><span class=cl>example.com/hello
</span></span><span class=line><span class=cl>golang.org/x/text v0.0.0-20170915032832-14c0d48ead0c
</span></span><span class=line><span class=cl>rsc.io/quote v1.5.2
</span></span><span class=line><span class=cl>rsc.io/sampler v1.3.0</span></span></code></pre></td></tr></table></div></div><p>在<code>go list</code>的输出中，当前模块是主模块，总是位于第一行，其它的模块按模块路径顺序显示。</p><p><code>go.mod</code>文件外，Go还维持一个名为<code>go.sum</code>的文件，包含特定模块版本内容的加密哈希。Go使用该文件确保将来下载该模块时内容与第一次下载的内容相同，从而保证所依赖的模块没有被恶意或非恶意的更改。</p><div class=highlight id=id-36><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ls
</span></span><span class=line><span class=cl>go.mod  go.sum  hello.go  hello_test.go
</span></span><span class=line><span class=cl>$ cat go.sum
</span></span><span class=line><span class=cl>golang.org/x/text v0.0.0-20170915032832-14c0d48ead0c h1:qgOY6WgZO...
</span></span><span class=line><span class=cl>golang.org/x/text v0.0.0-20170915032832-14c0d48ead0c/go.mod h1:Nq...
</span></span><span class=line><span class=cl>rsc.io/quote v1.5.2 h1:w5fcysjrx7yqtD/aO+QwRjYZOKnaM9Uh2b40tElTs3...
</span></span><span class=line><span class=cl>rsc.io/quote v1.5.2/go.mod h1:LzX7hefJvL54yjefDEDHNONDjII0t9xZLPX...
</span></span><span class=line><span class=cl>rsc.io/sampler v1.3.0 h1:7uVkIFmeBqHfdjD+gZwtXXI+RODJ2Wc4O7MPEh/Q...
</span></span><span class=line><span class=cl>rsc.io/sampler v1.3.0/go.mod h1:T1hPZKmBbMNahiBKFy5HrXp6adAjACjK9...</span></span></code></pre></td></tr></table></div></div><p><code>go.mod</code>和<code>go.sum</code>文件都应该包含到版本控制系统中，也就是说随着源代码文件一起提交到远程仓库。</p><h3 id=33-更新依赖>3.3 更新依赖</h3><p>Go模块使用的版本号分三部分：主版本号(major)，次版本号(minor)和修订版本号(patch)。例如，<code>v0.1.2</code>，主版本号是<code>0</code>，次版本号是<code>1</code>，修订版本号是<code>2</code>。首先以一个次版本号的更新举例说明</p><p>前面<code>go list -m all</code>的输出中我们可以看到<code>golang.org/x/text</code>使用的不是标准的版本号，我们可以使用<code>go get</code>命令将其更新</p><div class=highlight id=id-37><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ go get golang.org/x/text
</span></span><span class=line><span class=cl>go: finding golang.org/x/text v0.3.0
</span></span><span class=line><span class=cl>go: downloading golang.org/x/text v0.3.0
</span></span><span class=line><span class=cl>go: extracting golang.org/x/text v0.3.0
</span></span><span class=line><span class=cl>$ go <span class=nb>test</span>
</span></span><span class=line><span class=cl>PASS
</span></span><span class=line><span class=cl>ok      example.com/hello    0.013s</span></span></code></pre></td></tr></table></div></div><p>现在再次列举所有的模块以及查看<code>go.mod</code>文件</p><div class=highlight id=id-38><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ go list -m all
</span></span><span class=line><span class=cl>example.com/hello
</span></span><span class=line><span class=cl>golang.org/x/text v0.3.0
</span></span><span class=line><span class=cl>rsc.io/quote v1.5.2
</span></span><span class=line><span class=cl>rsc.io/sampler v1.3.0
</span></span><span class=line><span class=cl>$ cat go.mod
</span></span><span class=line><span class=cl>module example.com/hello
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>go 1.12
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>require <span class=o>(</span>
</span></span><span class=line><span class=cl>    golang.org/x/text v0.3.0 // indirect
</span></span><span class=line><span class=cl>    rsc.io/quote v1.5.2
</span></span><span class=line><span class=cl><span class=o>)</span></span></span></code></pre></td></tr></table></div></div><p>可以看到两者中<code>golang.org/x/text</code>都已经更新到了最新的版本号<code>v0.3.0</code>，注释中的<code>indirect</code>说明这个依赖不是直接被引用的，只是被其它的模块间接引用。</p><p>现在我们更新<code>rsc.io/sampler</code>的次版本号</p><div class=highlight id=id-39><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ go get rsc.io/sampler
</span></span><span class=line><span class=cl>go: finding rsc.io/sampler v1.99.99
</span></span><span class=line><span class=cl>go: downloading rsc.io/sampler v1.99.99
</span></span><span class=line><span class=cl>go: extracting rsc.io/sampler v1.99.99
</span></span><span class=line><span class=cl>$ go <span class=nb>test</span>
</span></span><span class=line><span class=cl>--- FAIL: TestHello <span class=o>(</span>0.00s<span class=o>)</span>
</span></span><span class=line><span class=cl>    hello_test.go:8: Hello<span class=o>()</span> <span class=o>=</span> <span class=s2>&#34;99 bottles of beer on the wall, 99 bottles of beer, ...&#34;</span>, want <span class=s2>&#34;Hello, world.&#34;</span>
</span></span><span class=line><span class=cl>FAIL
</span></span><span class=line><span class=cl><span class=nb>exit</span> status <span class=m>1</span>
</span></span><span class=line><span class=cl>FAIL    example.com/hello    0.014s</span></span></code></pre></td></tr></table></div></div><p>测试失败说明版本不匹配，列举所有可用版本</p><div class=highlight id=id-40><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ go list -m -versions rsc.io/sampler
</span></span><span class=line><span class=cl>rsc.io/sampler v1.0.0 v1.2.0 v1.2.1 v1.3.0 v1.3.1 v1.99.99</span></span></code></pre></td></tr></table></div></div><p>之前使用的是v1.3.0，v1.99.99也被证明无法使用，因此换用v1.3.1</p><div class=highlight id=id-41><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ go get rsc.io/sampler@v1.3.1
</span></span><span class=line><span class=cl>go: finding rsc.io/sampler v1.3.1
</span></span><span class=line><span class=cl>go: downloading rsc.io/sampler v1.3.1
</span></span><span class=line><span class=cl>go: extracting rsc.io/sampler v1.3.1
</span></span><span class=line><span class=cl>$ go <span class=nb>test</span>
</span></span><span class=line><span class=cl>PASS
</span></span><span class=line><span class=cl>ok      example.com/hello    0.022s</span></span></code></pre></td></tr></table></div></div><p>通过<code>@</code>来指定具体的版本号，<code>go get</code>的参数实际上应该带有版本号，不明确指定会使用默认的<code>@latest</code>，从而使用最新版本。</p><h3 id=34-在主版本号上添加依赖>3.4 在主版本号上添加依赖</h3><p>主版本号的更新是不同的，会看作一个独立的依赖。在<code>hello.go</code>中添加一个新的函数<code>Proverb()</code>，它使用了<code>rsc.io/quote</code>的<code>v3</code>版本，导入格式为<code>rsc.io/quote/v3</code></p><div class=highlight id=id-42><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>hello</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=s>&#34;rsc.io/quote&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nx>quoteV3</span> <span class=s>&#34;rsc.io/quote/v3&#34;</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>Hello</span><span class=p>()</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>quote</span><span class=p>.</span><span class=nf>Hello</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>Proverb</span><span class=p>()</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>quoteV3</span><span class=p>.</span><span class=nf>Concurrency</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div><p>然后为其添加测试函数</p><div class=highlight id=id-43><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=nf>TestProverb</span><span class=p>(</span><span class=nx>t</span> <span class=o>*</span><span class=nx>testing</span><span class=p>.</span><span class=nx>T</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nx>want</span> <span class=o>:=</span> <span class=s>&#34;Concurrency is not parallelism.&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=nx>got</span> <span class=o>:=</span> <span class=nf>Proverb</span><span class=p>();</span> <span class=nx>got</span> <span class=o>!=</span> <span class=nx>want</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>t</span><span class=p>.</span><span class=nf>Errorf</span><span class=p>(</span><span class=s>&#34;Proverb() = %q, want %q&#34;</span><span class=p>,</span> <span class=nx>got</span><span class=p>,</span> <span class=nx>want</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div><p>测试结果如下</p><div class=highlight id=id-44><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ go <span class=nb>test</span>
</span></span><span class=line><span class=cl>go: finding rsc.io/quote/v3 v3.1.0
</span></span><span class=line><span class=cl>go: downloading rsc.io/quote/v3 v3.1.0
</span></span><span class=line><span class=cl>go: extracting rsc.io/quote/v3 v3.1.0
</span></span><span class=line><span class=cl>PASS
</span></span><span class=line><span class=cl>ok      example.com/hello    0.024s</span></span></code></pre></td></tr></table></div></div><p>现在我们的模块同时依赖于<code>rsc.io/quote</code>和<code>rsc.io/quote/v3</code></p><div class=highlight id=id-45><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ go list -m rsc.io/q...
</span></span><span class=line><span class=cl>rsc.io/quote v1.5.2
</span></span><span class=line><span class=cl>rsc.io/quote/v3 v3.1.0</span></span></code></pre></td></tr></table></div></div><p>Go模块的每个主版本号(v1, v2, and so on)都使用一个不同的模块路径，从<code>v2</code>开始，路径必须以主版本号结尾，比如<code>rsc.io/quote</code>的<code>v3</code>版本模块路径为<code>rsc.io/quote/v3</code>，这种惯例称作 <a href=https://research.swtch.com/vgo-import target=_blank rel="external nofollow noopener noreferrer">semantic import versioning</a> ，给不兼容的包提供了不同的名字。相反，同一个主版本号，如<code>v1.6.0</code>应该向前兼容，和<code>rsc.io/quote</code>使用同一个名字，在同一个项目中，每个主版本号Go只允许出现一种，比如<code>v1.5.2</code>和<code>v1.6.0</code>不能同时存在，但不同的主版本号可以同时存在，这是为了使程序可以逐步过渡到新的版本。</p><h3 id=35-更新依赖到新的主版本号>3.5 更新依赖到新的主版本号</h3><p>比如从<code>rsc.io/quote</code>迁移到<code>rsc.io/quote/v3</code>，由于大版本更新，某些不兼容的API可能被删除、重命名或做其它的更改，阅读文档，我们可以发现<code>HelloV3</code>相对于<code>Hello</code>做了如下改动</p><div class=highlight id=id-46><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ go doc rsc.io/quote/v3
</span></span><span class=line><span class=cl>package quote // import <span class=s2>&#34;rsc.io/quote&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Package quote collects pithy sayings.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>func Concurrency<span class=o>()</span> string
</span></span><span class=line><span class=cl>func GlassV3<span class=o>()</span> string
</span></span><span class=line><span class=cl>func GoV3<span class=o>()</span> string
</span></span><span class=line><span class=cl>func HelloV3<span class=o>()</span> string
</span></span><span class=line><span class=cl>func OptV3<span class=o>()</span> string</span></span></code></pre></td></tr></table></div></div><p>检查并更新我们的源码</p><div class=highlight id=id-47><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>hello</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nx>quoteV3</span> <span class=s>&#34;rsc.io/quote/v3&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>Hello</span><span class=p>()</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>quoteV3</span><span class=p>.</span><span class=nf>HelloV3</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>Proverb</span><span class=p>()</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>quoteV3</span><span class=p>.</span><span class=nf>Concurrency</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div><p>由于没有冲突，这里导入的包不再需要重命名，因此可以继续简化</p><div class=highlight id=id-48><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kn>package</span> <span class=nx>hello</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=s>&#34;rsc.io/quote/v3&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>Hello</span><span class=p>()</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>quote</span><span class=p>.</span><span class=nf>HelloV3</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>Proverb</span><span class=p>()</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nx>quote</span><span class=p>.</span><span class=nf>Concurrency</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span></span></span></code></pre></td></tr></table></div></div><p>运行测试</p><div class=highlight id=id-49><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ go <span class=nb>test</span>
</span></span><span class=line><span class=cl>PASS
</span></span><span class=line><span class=cl>ok      example.com/hello       0.014s</span></span></code></pre></td></tr></table></div></div><h3 id=36-移除不使用的依赖>3.6 移除不使用的依赖</h3><p>我们已经不再使用<code>rsc.io/quote</code>，但它依然存在于<code>go list -m all</code>的输出和<code>go.mod</code>文件中</p><div class=highlight id=id-50><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ go list -m all
</span></span><span class=line><span class=cl>example.com/hello
</span></span><span class=line><span class=cl>golang.org/x/text v0.3.0
</span></span><span class=line><span class=cl>rsc.io/quote v1.5.2
</span></span><span class=line><span class=cl>rsc.io/quote/v3 v3.1.0
</span></span><span class=line><span class=cl>rsc.io/sampler v1.3.1
</span></span><span class=line><span class=cl>$ cat go.mod
</span></span><span class=line><span class=cl>module example.com/hello
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>go 1.12
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>require <span class=o>(</span>
</span></span><span class=line><span class=cl>    golang.org/x/text v0.3.0 // indirect
</span></span><span class=line><span class=cl>    rsc.io/quote v1.5.2
</span></span><span class=line><span class=cl>    rsc.io/quote/v3 v3.0.0
</span></span><span class=line><span class=cl>    rsc.io/sampler v1.3.1 // indirect
</span></span><span class=line><span class=cl><span class=o>)</span></span></span></code></pre></td></tr></table></div></div><p>这是因为编译单个包时无法自动检测是否可以安全的移除某个包，只能通过手动执行<code>go mod tidy</code>命令清理不再使用的依赖</p><div class=highlight id=id-51><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ go mod tidy
</span></span><span class=line><span class=cl>$ go list -m all
</span></span><span class=line><span class=cl>example.com/hello
</span></span><span class=line><span class=cl>golang.org/x/text v0.3.0
</span></span><span class=line><span class=cl>rsc.io/quote/v3 v3.1.0
</span></span><span class=line><span class=cl>rsc.io/sampler v1.3.1
</span></span><span class=line><span class=cl>$ cat go.mod
</span></span><span class=line><span class=cl>module example.com/hello
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>go 1.12
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>require <span class=o>(</span>
</span></span><span class=line><span class=cl>    golang.org/x/text v0.3.0 // indirect
</span></span><span class=line><span class=cl>    rsc.io/quote/v3 v3.1.0
</span></span><span class=line><span class=cl>    rsc.io/sampler v1.3.1 // indirect
</span></span><span class=line><span class=cl><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>$ go <span class=nb>test</span>
</span></span><span class=line><span class=cl>PASS
</span></span><span class=line><span class=cl>ok      example.com/hello    0.020s
</span></span><span class=line><span class=cl>$</span></span></code></pre></td></tr></table></div></div><p>最后是关于发布自己的模块版本的注意，参考两篇文章</p><ul><li><a href=https://blog.golang.org/publishing-go-modules target=_blank rel="external nofollow noopener noreferrer">Publishing Go Modules</a></li><li><a href=https://blog.golang.org/v2-go-modules target=_blank rel="external nofollow noopener noreferrer">Go Modules: v2 and Beyond</a></li></ul></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="更新于 2020-09-28 00:00:00">更新于 2020-09-28&nbsp;</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md><span><a href=/2019/golang-basic-grammer-2-command-package-module/index.md title=阅读原始文档 class=link-to-markdown>阅读原始文档</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Twitter" data-sharer=twitter data-url=https://shuzang.github.io/2019/golang-basic-grammer-2-command-package-module/ data-title=Golang语法基础2-命令、包与模块 data-hashtags=Golang><i class="fa-brands fa-twitter fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://shuzang.github.io/2019/golang-basic-grammer-2-command-package-module/ data-hashtag=Golang><i class="fa-brands fa-facebook-square fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://shuzang.github.io/2019/golang-basic-grammer-2-command-package-module/ data-title=Golang语法基础2-命令、包与模块><i class="fa-brands fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/tags/golang/ class=post-tag>Golang</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/2019/%E8%80%81%E8%88%8D%E5%B9%BD%E9%BB%98%E5%B0%8F%E8%AF%B4/ class=post-nav-item rel=prev title=老舍幽默小说><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>老舍幽默小说</a>
<a href=/2019/%E5%BA%9F%E5%90%8D%E7%94%B0%E5%9B%AD%E5%B0%8F%E8%AF%B4/ class=post-nav-item rel=next title=废名田园小说>废名田园小说<i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></main><footer class=footer><div class=footer-container><div class="footer-line powered">由 <a href=https://gohugo.io/ target=_blank rel="external nofollow noopener noreferrer" title="Hugo 0.117.0">Hugo</a> 强力驱动 | 主题 - <a href=https://github.com/hugo-fixit/FixIt target=_blank rel=external title="FixIt v0.2.18"><img class=fixit-icon src=/fixit.min.svg alt="FixIt logo">&nbsp;FixIt</a></div><div class="footer-line copyright" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2018 - 2023</span><span class=author itemprop=copyrightHolder>
<a href=/>Shuzang</a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div><div class="footer-line statistics"></div><div class="footer-line visitor"><span id=busuanzi_container_site_uv title=总访客数><i class="fa-regular fa-user fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_site_uv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span><span id=busuanzi_container_site_pv class=footer-divider title=总访问量><i class="fa-regular fa-eye fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_site_pv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label=回到顶部><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class="variant-numeric d-none">0%</span></div></div><a href=https://github.com/shuzang title="View source on GitHub" target=_blank rel="external nofollow" class="github-corner right d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div id=mask></div><div class=reading-progress-bar style=left:0;top:0></div><noscript><div class=noscript-warning>FixIt 主题在启用 JavaScript 的情况下效果最佳。</div></noscript></div><link rel=stylesheet href=/lib/lightgallery/css/lightgallery-bundle.min.css><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><link rel=stylesheet href=/lib/pace/themes/blue/pace-theme-minimal.css><script src=/lib/autocomplete/autocomplete.min.js defer></script><script src=/lib/fuse/fuse.min.js defer></script><script src=/lib/twemoji/twemoji.min.js defer></script><script src=/lib/lightgallery/lightgallery.min.js defer></script><script src=/lib/lightgallery/plugins/thumbnail/lg-thumbnail.min.js defer></script><script src=/lib/lightgallery/plugins/zoom/lg-zoom.min.js defer></script><script src=/lib/sharer/sharer.min.js async defer></script><script src=/lib/katex/katex.min.js defer></script><script src=/lib/katex/auto-render.min.js defer></script><script src=/lib/katex/copy-tex.min.js defer></script><script src=/lib/katex/mhchem.min.js defer></script><script src=/lib/cookieconsent/cookieconsent.min.js defer></script><script src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js async defer></script><script src=/lib/pace/pace.min.js async defer></script><script>window.config={code:{copyTitle:"复制到剪贴板",editLockTitle:"锁定可编辑代码块",editUnLockTitle:"解锁可编辑代码块",editable:!0,maxShownLines:10},comment:{enable:!1},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验。"},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},lightgallery:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{distance:100,findAllMatches:!1,fuseIndexURL:"/index.json",highlightTag:"em",ignoreFieldNorm:!1,ignoreLocation:!1,isCaseSensitive:!1,location:0,maxResultLength:10,minMatchCharLength:2,noResultsFound:"没有找到结果",snippetLength:30,threshold:.3,type:"fuse",useExtendedSearch:!1},twemoji:!0}</script><script src=/js/theme.min.js defer></script></body></html>