<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>Golang语法基础1-背景与初探 - Shuzang's Blog</title><meta name=Description content="书藏的个人博客，记录学习，记录生活"><meta property="og:title" content="Golang语法基础1-背景与初探"><meta property="og:description" content="1. 起源与发展 Go/Golang 起源于2007年，并于2009年正式对外发布，是一个完全开源的项目，背后的支持者是谷歌公司，核心设计者是三位著名IT工程师：K"><meta property="og:type" content="article"><meta property="og:url" content="https://shuzang.github.io/2019/golang-basic-grammar-1-background-and-preliminary-exploration/"><meta property="og:image" content="https://shuzang.github.io/logo.png"><meta property="article:published_time" content="2019-09-13T00:00:00+00:00"><meta property="article:modified_time" content="2020-06-13T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://shuzang.github.io/logo.png"><meta name=twitter:title content="Golang语法基础1-背景与初探"><meta name=twitter:description content="1. 起源与发展 Go/Golang 起源于2007年，并于2009年正式对外发布，是一个完全开源的项目，背后的支持者是谷歌公司，核心设计者是三位著名IT工程师：K"><meta name=application-name content="Shuzang's Blog"><meta name=apple-mobile-web-app-title content="Shuzang's Blog"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://shuzang.github.io/2019/golang-basic-grammar-1-background-and-preliminary-exploration/><link rel=prev href=https://shuzang.github.io/2019/using-virtual-machine-to-build-experimental-platform/><link rel=next href=https://shuzang.github.io/2019/scaleless-net-light-tower/><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Golang语法基础1-背景与初探","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/shuzang.github.io\/2019\/golang-basic-grammar-1-background-and-preliminary-exploration\/"},"image":["https:\/\/shuzang.github.io\/images\/Apple-Devices-Preview.png"],"genre":"posts","keywords":"Go语法","wordcount":5924,"url":"https:\/\/shuzang.github.io\/2019\/golang-basic-grammar-1-background-and-preliminary-exploration\/","datePublished":"2019-09-13T00:00:00+00:00","dateModified":"2020-06-13T00:00:00+00:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"xxxx","logo":"https:\/\/shuzang.github.io\/images\/avatar.png"},"author":{"@type":"Person","name":"Shuzang"},"description":""}</script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':('auto'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'auto'==='dark'))&&document.body.setAttribute('theme','dark');</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Shuzang's Blog">Shuzang's Blog</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>所有文章 </a><a class=menu-item href=/tags/>标签 </a><a class=menu-item href=/categories/>分类 </a><a class=menu-item href=/about/>关于 </a><a class=menu-item href=https://github.com/shuzang title=GitHub rel="noopener noreffer" target=_blank><i class="fab fa-github fa-fw"></i></a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item language" title=选择语言>简体中文<i class="fas fa-chevron-right fa-fw"></i>
<select class=language-select id=language-select-desktop onchange="location=this.value;"><option value=/2019/golang-basic-grammar-1-background-and-preliminary-exploration/ selected>简体中文</option></select>
</a><span class="menu-item search" id=search-desktop><input type=text placeholder=搜索文章标题或内容... id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fas fa-search fa-fw"></i></a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fas fa-times-circle fa-fw"></i></a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i></span></span><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Shuzang's Blog">Shuzang's Blog</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容... id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fas fa-search fa-fw"></i></a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fas fa-times-circle fa-fw"></i></a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></div><a class=menu-item href=/posts/>所有文章</a><a class=menu-item href=/tags/>标签</a><a class=menu-item href=/categories/>分类</a><a class=menu-item href=/about/>关于</a><a class=menu-item href=https://github.com/shuzang title=GitHub rel="noopener noreffer" target=_blank><i class="fab fa-github fa-fw"></i></a><a href=javascript:void(0); class="menu-item theme-switch" title=切换主题>
<i class="fas fa-adjust fa-fw"></i></a><a href=javascript:void(0); class=menu-item title=选择语言>简体中文<i class="fas fa-chevron-right fa-fw"></i>
<select class=language-select onchange="location=this.value;"><option value=/2019/golang-basic-grammar-1-background-and-preliminary-exploration/ selected>简体中文</option></select></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>目录</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animated flipInX">Golang语法基础1-背景与初探</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>Shuzang</a></span>&nbsp;<span class=post-category>收录于 <a href=/categories/golang%E5%AD%A6%E4%B9%A0%E4%B9%8B%E8%B7%AF/><i class="far fa-folder fa-fw"></i>Golang学习之路</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2019-09-13>2019-09-13</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 5924 字&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 12 分钟&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#1-起源与发展>1. 起源与发展</a></li><li><a href=#2-跟踪最新动态>2. 跟踪最新动态</a></li><li><a href=#3-下载安装>3. 下载安装</a><ul><li><a href=#31-下载>3.1 下载</a></li><li><a href=#32-安装>3.2 安装</a><ul><li><a href=#windows>windows</a></li><li><a href=#linux>Linux</a></li></ul></li><li><a href=#33-环境变量说明>3.3 环境变量说明</a></li><li><a href=#34-安装目录清单>3.4 安装目录清单</a></li><li><a href=#35-代码目录结构>3.5 代码目录结构</a></li></ul></li><li><a href=#4-第一个程序>4. 第一个程序</a></li><li><a href=#5-编辑器ide>5. 编辑器/IDE</a><ul><li><a href=#51-go工具链>5.1 Go工具链</a></li><li><a href=#52-用户和工作区设置>5.2 用户和工作区设置</a></li><li><a href=#53-特性说明>5.3 特性说明</a></li><li><a href=#54-使用>5.4 使用</a></li></ul></li></ul></nav></div></div><div class=content id=content><h2 id=1-起源与发展>1. 起源与发展</h2><p>Go/Golang 起源于2007年，并于2009年正式对外发布，是一个完全开源的项目，背后的支持者是谷歌公司，核心设计者是三位著名IT工程师：Ken Thompson，Rob Pike，Robert Griesemer。分别是如下从左到右三位</p><p><img class=lazyload src=/svg/loading.min.svg data-src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/Go_20190913_3AxHPJ.jpg data-srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/Go_20190913_3AxHPJ.jpg, https://picped-1301226557.cos.ap-beijing.myqcloud.com/Go_20190913_3AxHPJ.jpg 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/Go_20190913_3AxHPJ.jpg 2x" data-sizes=auto alt=https://picped-1301226557.cos.ap-beijing.myqcloud.com/Go_20190913_3AxHPJ.jpg title=Go语言核心设计者></p><p>其中 Ken Thompson 是 Unix 操作系统的设计者，并因此获得图灵奖，也是C语言前身B语言的设计者，UTF-8 编码设计者之一，计算机史的重要人物，2006年加入谷歌，和另外两人一起设计了Go语言。 Rob Pike 是 Ken 的老搭档。</p><p>随后又有 lan Lance Taylor 和 Russ Cox 两人加入团队，前者是 gccgo 编译器的作者和 cgo工具链的维护者，后者加入团队后着手Go语言标准库的开发。下图分别是他们两个</p><p><img class=lazyload src=/svg/loading.min.svg data-src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/Go_20190913_3AxT54.jpg data-srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/Go_20190913_3AxT54.jpg, https://picped-1301226557.cos.ap-beijing.myqcloud.com/Go_20190913_3AxT54.jpg 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/Go_20190913_3AxT54.jpg 2x" data-sizes=auto alt=https://picped-1301226557.cos.ap-beijing.myqcloud.com/Go_20190913_3AxT54.jpg title=Go语言核心开发者></p><p>Go语言以囊地鼠(Gopher)为图标和吉祥物，这是一种原产于加拿大的啮齿类动物，Go语言开发者也一般自称为 Gopher。下图中左边是囊地鼠，右边是 Go logo.</p><p><img class=lazyload src=/svg/loading.min.svg data-src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/Go_20190913_3AxXKx.jpg data-srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/Go_20190913_3AxXKx.jpg, https://picped-1301226557.cos.ap-beijing.myqcloud.com/Go_20190913_3AxXKx.jpg 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/Go_20190913_3AxXKx.jpg 2x" data-sizes=auto alt=https://picped-1301226557.cos.ap-beijing.myqcloud.com/Go_20190913_3AxXKx.jpg title=Gopher></p><p>Go语言相比于其它语言的最大优势在于它的执行性能与开发效率，这得益于Go在并发编程、内存回收等许多方面的良好设计，并因此大规模用于服务器编程、网络编程、数据库和云平台领域。</p><p>比较出名的Go语言项目有(不限于这些)</p><ul><li>Go语言本身： <a href=https://github.com/golang/go>https://github.com/golang/go</a></li><li>Docker： <a href=https://www.docker.com/>https://www.docker.com/</a></li><li>kubernetes： <a href=https://github.com/kubernetes/kubernetes>https://github.com/kubernetes/kubernetes</a></li><li>Ethereum： <a href=https://github.com/ethereum/go-ethereum>https://github.com/ethereum/go-ethereum</a></li><li>fabric： <a href=https://github.com/hyperledger/fabric>https://github.com/hyperledger/fabric</a></li><li>Hugo： <a href=https://github.com/gohugoio/hugo>https://github.com/gohugoio/hugo</a></li><li>TiDB： <a href=https://github.com/pingcap/tidb>https://github.com/pingcap/tidb</a></li><li>InfluxDB： <a href=https://github.com/influxdata/influxdb>https://github.com/influxdata/influxdb</a></li><li>ETCD： <a href=https://github.com/etcd-io/etcd>https://github.com/etcd-io/etcd</a></li></ul><p>使用Go的国外公司有：Google, Docker, NetFlix, CloudFlare, Dropbox, MongoDB, Uber等</p><p>使用Go的国内公司有：七牛、字节跳动、bilibili、京东、<a href=https://github.com/baidu/bfe target=_blank rel="noopener noreffer">百度</a>，其它公司如小米、腾讯、阿里等也都在使用Go，但可能不是主力</p><h2 id=2-跟踪最新动态>2. 跟踪最新动态</h2><p>最直接的方式是跟踪Go语言的源码库，关注提交历史和<a href=https://github.com/golang/go/issues target=_blank rel="noopener noreffer">issue</a></p><ol><li>原始代码库： <a href=https://go.googlesource.com/go>https://go.googlesource.com/go</a></li><li>github镜像： <a href=https://github.com/golang/go>https://github.com/golang/go</a></li></ol><p>其它活跃论坛或动态</p><ul><li><a href=https://groups.google.com/forum/#!forum/golang-dev target=_blank rel="noopener noreffer">golang-dev</a>：Google邮件列表的Go开发组讨论区</li><li><a href=https://groups.google.com/forum/#!forum/golang-nuts target=_blank rel="noopener noreffer">golang-nuts</a>：Google邮件列表的Go讨论社区</li><li><a href=https://groups.google.com/forum/#!forum/golang-announce target=_blank rel="noopener noreffer">golang-announce</a>：发布Go版本或Go开发的最新状态</li><li><a href=https://go.dev/ target=_blank rel="noopener noreffer">go.dev</a>：刚刚上线(2019.11.14)的Go开发人员中心</li><li><a href=https://changelog.com/gotime target=_blank rel="noopener noreffer">gotime</a>：Go的一个播客，每周一更，内容有干货</li><li><a href=https://twitter.com/golang target=_blank rel="noopener noreffer">@golang</a>：Go 语言在 Twitter 的官方帐号</li></ul><p>此外还有每年举办的几个大会</p><ul><li><a href=https://www.gophercon.com/ target=_blank rel="noopener noreffer">Gopher Con</a>，举办地在美国，时间不定，今年在7月，2020年会在6月份举行。<a href=https://github.com/gophercon target=_blank rel="noopener noreffer">会议总结</a></li><li><a href=https://gopherchina.org/ target=_blank rel="noopener noreffer">GopherChina</a>，举办地在中国，每年4月份。<a href=https://github.com/gopherchina/conference target=_blank rel="noopener noreffer">会议总结</a></li><li><a href=https://www.dotgo.eu/ target=_blank rel="noopener noreffer">dotGo</a>，举办地在欧洲，每年3月份</li><li>详细的会议列表可查看 <a href=https://github.com/golang/go/wiki/Conferences>https://github.com/golang/go/wiki/Conferences</a></li></ul><p>Go 下载地址和相关的文档、标准库等访问地址为</p><ul><li>官网 <a href=https://golang.org/>https://golang.org/</a></li><li>国内的镜像网站 <a href=https://golang.google.cn/>https://golang.google.cn/</a></li></ul><p><a href=https://studygolang.com/ target=_blank rel="noopener noreffer">Go语言中文网</a> 是国内最活跃的Go社区，每周会发行一份<a href=https://studygolang.com/go/weekly target=_blank rel="noopener noreffer">Go语言爱好者周刊</a></p><p>Go相关资料聚集最多的还是<a href=https://github.com/golang/go/wiki/Articles target=_blank rel="noopener noreffer">go wiki</a></p><h2 id=3-下载安装>3. 下载安装</h2><p>Windowns下快速安装可以使用 chocolatey ，执行如下命令即可</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-powershell data-lang=powershell><span class=p>&gt;</span> <span class=n>choco</span> <span class=n>install</span> <span class=n>golang</span>
</code></pre></td></tr></table></div></div><p>自动配置环境变量，安装完重启终端即可使用。下面开始介绍常规的安装方法，以win10和Ubuntu为例。</p><h3 id=31-下载>3.1 下载</h3><p>Golang中国官网下载页面为 <a href=https://golang.google.cn/dl/ target=_blank rel="noopener noreffer">golang.google.cn/dl</a>，为windows，macOS和Linux三种环境都提供了安装包。</p><p><img class=lazyload src=/svg/loading.min.svg data-src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/Go_20190913_Golang%E4%B8%8B%E8%BD%BD%E9%A1%B5%E9%9D%A2.png data-srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/Go_20190913_Golang%E4%B8%8B%E8%BD%BD%E9%A1%B5%E9%9D%A2.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/Go_20190913_Golang%E4%B8%8B%E8%BD%BD%E9%A1%B5%E9%9D%A2.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/Go_20190913_Golang%E4%B8%8B%E8%BD%BD%E9%A1%B5%E9%9D%A2.png 2x" data-sizes=auto alt=https://picped-1301226557.cos.ap-beijing.myqcloud.com/Go_20190913_Golang%E4%B8%8B%E8%BD%BD%E9%A1%B5%E9%9D%A2.png title=Golang下载页面></p><p>windows默认下载文件为<code>go1.14.windows-amd64.msi</code>，双击启动即可安装，默认安装位置为<code>C:\Go</code>，环境变量将自动设置。但如果下载了以<code>.zip</code>为后缀的版本，则需要自己解压到合适的路径，并自己设置环境变量。</p><p>Linux默认下载文件为<code>go1.14.linux-amd64.tar.gz</code>，将其解压缩到<code>/usr/local</code>，然后手动将<code>/usr/local/go/bin</code>添加到 PATH 环境变量中。</p><h3 id=32-安装>3.2 安装</h3><h4 id=windows>windows</h4><p><code>msi</code>后缀的安装版本双击安装，环境变量将会自动设置，打开powershell，使用<code>go env</code>命令查看环境变量</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-powershell data-lang=powershell><span class=p>&gt;</span> <span class=n>go</span> <span class=n>env</span>
<span class=nb>set </span><span class=n>GO111MODULE</span><span class=p>=</span>
<span class=nb>set </span><span class=n>GOARCH</span><span class=p>=</span><span class=n>amd64</span>
<span class=nb>set </span><span class=n>GOBIN</span><span class=p>=</span>
<span class=nb>set </span><span class=n>GOCACHE</span><span class=p>=</span><span class=n>C:</span><span class=p>\</span><span class=n>Users</span><span class=p>\</span><span class=n>lylw1</span><span class=p>\</span><span class=n>AppData</span><span class=p>\</span><span class=n>Local</span><span class=p>\</span><span class=n>go</span><span class=n>-build</span>
<span class=nb>set </span><span class=n>GOENV</span><span class=p>=</span><span class=n>C:</span><span class=p>\</span><span class=n>Users</span><span class=p>\</span><span class=n>lylw1</span><span class=p>\</span><span class=n>AppData</span><span class=p>\</span><span class=n>Roaming</span><span class=p>\</span><span class=n>go</span><span class=p>\</span><span class=n>env</span>
<span class=nb>set </span><span class=n>GOEXE</span><span class=p>=</span><span class=p>.</span><span class=n>exe</span>
<span class=nb>set </span><span class=n>GOFLAGS</span><span class=p>=</span>
<span class=nb>set </span><span class=n>GOHOSTARCH</span><span class=p>=</span><span class=n>amd64</span>
<span class=nb>set </span><span class=n>GOHOSTOS</span><span class=p>=</span><span class=n>windows</span>
<span class=nb>set </span><span class=n>GOINSECURE</span><span class=p>=</span>
<span class=nb>set </span><span class=n>GONOPROXY</span><span class=p>=</span>
<span class=nb>set </span><span class=n>GONOSUMDB</span><span class=p>=</span>
<span class=nb>set </span><span class=n>GOOS</span><span class=p>=</span><span class=n>windows</span>
<span class=nb>set </span><span class=n>GOPATH</span><span class=p>=</span><span class=n>C:</span><span class=p>\</span><span class=n>Users</span><span class=p>\</span><span class=n>lylw1</span><span class=p>\</span><span class=n>go</span>
<span class=nb>set </span><span class=n>GOPRIVATE</span><span class=p>=</span>
<span class=nb>set </span><span class=n>GOPROXY</span><span class=p>=</span><span class=n>https</span><span class=err>:</span><span class=p>/</span><span class=p>/</span><span class=n>goproxy</span><span class=p>.</span><span class=n>cn</span><span class=p>,</span><span class=n>direct</span>
<span class=nb>set </span><span class=n>GOROOT</span><span class=p>=</span><span class=n>c:</span><span class=p>\</span><span class=n>go</span>
<span class=nb>set </span><span class=n>GOSUMDB</span><span class=p>=</span><span class=n>sum</span><span class=p>.</span><span class=n>golang</span><span class=p>.</span><span class=n>org</span>
<span class=nb>set </span><span class=n>GOTMPDIR</span><span class=p>=</span>
<span class=nb>set </span><span class=n>GOTOOLDIR</span><span class=p>=</span><span class=n>c:</span><span class=p>\</span><span class=n>go</span><span class=p>\</span><span class=n>pkg</span><span class=p>\</span><span class=n>tool</span><span class=p>\</span><span class=n>windows_amd64</span>
<span class=nb>set </span><span class=n>GCCGO</span><span class=p>=</span><span class=n>gccgo</span>
<span class=nb>set </span><span class=n>AR</span><span class=p>=</span><span class=n>ar</span>
<span class=nb>set </span><span class=n>CC</span><span class=p>=</span><span class=n>gcc</span>
<span class=nb>set </span><span class=n>CXX</span><span class=p>=</span><span class=n>g</span><span class=p>+</span><span class=p>+</span>
<span class=nb>set </span><span class=n>CGO_ENABLED</span><span class=p>=</span><span class=n>1</span>
<span class=nb>set </span><span class=n>GOMOD</span><span class=p>=</span>
<span class=nb>set </span><span class=n>CGO_CFLAGS</span><span class=p>=</span><span class=n>-g</span> <span class=n>-O2</span>
<span class=nb>set </span><span class=n>CGO_CPPFLAGS</span><span class=p>=</span>
<span class=nb>set </span><span class=n>CGO_CXXFLAGS</span><span class=p>=</span><span class=n>-g</span> <span class=n>-O2</span>
<span class=nb>set </span><span class=n>CGO_FFLAGS</span><span class=p>=</span><span class=n>-g</span> <span class=n>-O2</span>
<span class=nb>set </span><span class=n>CGO_LDFLAGS</span><span class=p>=</span><span class=n>-g</span> <span class=n>-O2</span>
<span class=nb>set </span><span class=n>PKG_CONFIG</span><span class=p>=</span><span class=n>pkg</span><span class=n>-config</span>
<span class=nb>set </span><span class=n>GOGCCFLAGS</span><span class=p>=</span><span class=n>-m64</span> <span class=n>-mthreads</span> <span class=n>-fno</span><span class=n>-caret</span><span class=n>-diagnostics</span> <span class=n>-Qunused</span><span class=n>-arguments</span> <span class=n>-fmessage</span><span class=n>-length</span><span class=p>=</span><span class=n>0</span> <span class=n>-fdebug</span><span class=n>-prefix</span><span class=n>-map</span><span class=p>=</span><span class=n>C:</span><span class=p>\</span><span class=n>Users</span><span class=p>\</span><span class=n>lylw1</span><span class=p>\</span><span class=n>AppData</span><span class=p>\</span><span class=n>Local</span><span class=p>\</span><span class=n>Temp</span><span class=p>\</span><span class=n>go</span><span class=n>-build192094374</span><span class=p>=</span><span class=p>/</span><span class=n>tmp</span><span class=p>/</span><span class=n>go</span><span class=n>-build</span> <span class=n>-gno</span><span class=n>-record</span><span class=n>-gcc</span><span class=n>-switches</span>
</code></pre></td></tr></table></div></div><p>使用 <code>go version</code> 查看版本同时验证安装</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=p>&gt;</span> <span class=k>go</span> <span class=nx>version</span>
<span class=k>go</span> <span class=nx>version</span> <span class=nx>go1</span><span class=mf>.13</span><span class=mf>.4</span> <span class=nx>windows</span><span class=o>/</span><span class=nx>amd64</span>
</code></pre></td></tr></table></div></div><h4 id=linux>Linux</h4><p>以Ubuntu 20.04 LTS 为例说明，首先在 <a href=https://golang.org/dl/ target=_blank rel="noopener noreffer">golang.org/dl</a> 页面右击要下载的版本获取下载链接，使用wget下载文件。也可以直接下载。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ wget https://dl.google.com/go/go1.14.linux-amd64.tar.gz
</code></pre></td></tr></table></div></div><p>将文件解压缩到指定目录/usr/local，<code>-C</code>参数用于指定目标文件夹，解压缩后删除压缩文件。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ sudo tar -xzf go1.14.linux-amd64.tar.gz -C /usr/local
$ rm go1.14.linux-amd64.tar.gz
</code></pre></td></tr></table></div></div><p>查看安装目录</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ ls /usr/local
bin  etc  games  go  include  lib  man  sbin  share  src
$ ls /usr/local/go
AUTHORS          CONTRIBUTORS  PATENTS    SECURITY.md  api  doc          lib   pkg         src
CONTRIBUTING.md  LICENSE       README.md  VERSION      bin  favicon.ico  misc  robots.txt  <span class=nb>test</span>
</code></pre></td></tr></table></div></div><p>设置环境变量</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ sudo nano /etc/profile
<span class=c1># 在打开的文件末尾添加下列语句</span>
<span class=nb>export</span> <span class=nv>PATH</span><span class=o>=</span><span class=nv>$PATH</span>:/usr/local/go/bin
</code></pre></td></tr></table></div></div><p>更新的环境变量可以通过下面的命令使其直接生效</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ <span class=nb>source</span> /etc/profile
<span class=c1># 查看生效后的环境变量设置</span>
$ go version
go version go1.14 linux/amd64
</code></pre></td></tr></table></div></div><p>Linux 全部环境变量如下</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ go env
<span class=nv>GO111MODULE</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
<span class=nv>GOARCH</span><span class=o>=</span><span class=s2>&#34;amd64&#34;</span>
<span class=nv>GOBIN</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
<span class=nv>GOCACHE</span><span class=o>=</span><span class=s2>&#34;/home/shuzang/.cache/go-build&#34;</span>
<span class=nv>GOENV</span><span class=o>=</span><span class=s2>&#34;/home/shuzang/.config/go/env&#34;</span>
<span class=nv>GOEXE</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
<span class=nv>GOFLAGS</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
<span class=nv>GOHOSTARCH</span><span class=o>=</span><span class=s2>&#34;amd64&#34;</span>
<span class=nv>GOHOSTOS</span><span class=o>=</span><span class=s2>&#34;linux&#34;</span>
<span class=nv>GOINSECURE</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
<span class=nv>GONOPROXY</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
<span class=nv>GONOSUMDB</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
<span class=nv>GOOS</span><span class=o>=</span><span class=s2>&#34;linux&#34;</span>
<span class=nv>GOPATH</span><span class=o>=</span><span class=s2>&#34;/home/shuzang/go&#34;</span>
<span class=nv>GOPRIVATE</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
<span class=nv>GOPROXY</span><span class=o>=</span><span class=s2>&#34;https://proxy.golang.org,direct&#34;</span>
<span class=nv>GOROOT</span><span class=o>=</span><span class=s2>&#34;/usr/local/go&#34;</span>
<span class=nv>GOSUMDB</span><span class=o>=</span><span class=s2>&#34;sum.golang.org&#34;</span>
<span class=nv>GOTMPDIR</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
<span class=nv>GOTOOLDIR</span><span class=o>=</span><span class=s2>&#34;/usr/local/go/pkg/tool/linux_amd64&#34;</span>
<span class=nv>GCCGO</span><span class=o>=</span><span class=s2>&#34;gccgo&#34;</span>
<span class=nv>AR</span><span class=o>=</span><span class=s2>&#34;ar&#34;</span>
<span class=nv>CC</span><span class=o>=</span><span class=s2>&#34;gcc&#34;</span>
<span class=nv>CXX</span><span class=o>=</span><span class=s2>&#34;g++&#34;</span>
<span class=nv>CGO_ENABLED</span><span class=o>=</span><span class=s2>&#34;1&#34;</span>
<span class=nv>GOMOD</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
<span class=nv>CGO_CFLAGS</span><span class=o>=</span><span class=s2>&#34;-g -O2&#34;</span>
<span class=nv>CGO_CPPFLAGS</span><span class=o>=</span><span class=s2>&#34;&#34;</span>
<span class=nv>CGO_CXXFLAGS</span><span class=o>=</span><span class=s2>&#34;-g -O2&#34;</span>
<span class=nv>CGO_FFLAGS</span><span class=o>=</span><span class=s2>&#34;-g -O2&#34;</span>
<span class=nv>CGO_LDFLAGS</span><span class=o>=</span><span class=s2>&#34;-g -O2&#34;</span>
<span class=nv>PKG_CONFIG</span><span class=o>=</span><span class=s2>&#34;pkg-config&#34;</span>
<span class=nv>GOGCCFLAGS</span><span class=o>=</span><span class=s2>&#34;-fPIC -m64 -pthread -fno-caret-diagnostics -Qunused-arguments -fmessage-length=0 -fdebug-prefix-map=/tmp/go-build153919612=/tmp/go-build -gno-record-gcc-switches&#34;</span>
</code></pre></td></tr></table></div></div><p>注：将环境变量添加到/etc/profile可使go全局启用，也可添加到$HOME/.profile，对当前登录用户起作用。</p><p><em>注：可以使用apt-get命令安装，但安装的go不会是最新版本，同样，也可以使用snap安装，可以安装最新版本。</em></p><h3 id=33-环境变量说明>3.3 环境变量说明</h3><p>常规的使用除了GOPATH外无需关心其它环境变量，但在进行交叉编译时，需要进行一定的设置，详细的环境变量说明可以查看 <a href=https://golang.org/doc/install/source#gopath target=_blank rel="noopener noreffer">$GOPATH environment variable set correctly</a>，以下解释几个主要的环境变量。</p><ul><li><code>GOOS</code>与<code>GOARCH</code>：目标操作系统和处理器架构，</li><li><code>GOHOSTOS</code>和<code>GOHOSTARCH</code>是宿主机操作系统和处理器架构。</li><li><code>GOBIN</code>：编译器和链接器的安装位置，默认是<code>$GOROOT/bin</code>，一般将其设置为空值，Go会使用默认值。</li><li><code>GOROOT</code>：电脑上安装的Go的根目录，Linux下一般为<code>$HOME/go</code>，windows下为<code>C:\go</code></li><li><code>GOPATH</code>：go install、go get等命令默认路径都是<code>GOPATH</code>，是编译后二进制文件的存放目的地、下载后包的存放路径以及 import 包时的搜索路径</li></ul><p>我们需要关心的唯一一个环境变量是GOPATH，可以看到，默认的GOPATH是<code>c:\Users\lylw1\go</code>，其中<code>lylw1</code>是自己的用户名。</p><p>GOPATH 所代表的路径是 go 的工作区，可以选择任意自己喜欢的文件夹作为go的工作区，如果不想使用默认的路径，需要自己进行修改，使用 <code>go env</code> 命令</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-powershell data-lang=powershell><span class=p>&gt;</span> <span class=n>go</span> <span class=n>env</span> <span class=n>-w</span> <span class=n>GOPATH</span><span class=p>=</span><span class=p>/</span><span class=n>somewhere</span><span class=p>/</span><span class=k>else</span>
</code></pre></td></tr></table></div></div><p>更多的环境变量修改方式可以查看<a href=https://github.com/golang/go/wiki/SettingGOPATH#windows target=_blank rel="noopener noreffer">Setting GOPATH</a>，需要注意的一点是GOPATH不能设置为Go的安装目录<code>C:\go</code></p><h3 id=34-安装目录清单>3.4 安装目录清单</h3><p>安装完成的Go根目录（$GOROOT）文件夹结构除了README.md，AUTHORS，LICENSE等常规文件外，基本结构应如下所示：</p><ul><li><code>/bin</code>：包含可执行文件，如：编译器，Go 工具</li><li><code>/doc</code>：包含示例程序，代码工具，本地文档等</li><li><code>/lib</code>：包含文档模版</li><li><code>/misc</code>：包含与支持 Go 编辑器有关的配置文件以及 cgo 的示例</li><li><code>/pkg/os_arch</code>：包含标准库的包的对象文件（<code>.a</code>）</li><li><code>/src</code>：包含源代码构建脚本和标准库的包的完整源代码（Go 是一门开源语言）</li><li><code>/src/cmd</code>：包含 Go 和 C 的编译器和命令行脚本</li></ul><p>这是之前的介绍，网上搜到的多是这个说明，但当前还多了<code>api</code>和<code>test</code>两个文件夹。</p><h3 id=35-代码目录结构>3.5 代码目录结构</h3><p>Go 1.13之前，所有代码在一个工作区，Go 1.13及之后，使用 Go module 进行管理，项目代码不再必须放到 GOPATH 下。本文假设使用 Go 1.13 及以后的版本。对于之前的方式不再介绍。</p><p>Go 程序以包（package）的形式进行组织，一个包就是一个目录，该目录下可能有一个或多个源文件，同一个包的所有代码会被一起编译。另外，同一个包中定义的变量、常量、类型、函数，即使在不同的源文件中，也可以相互访问。</p><p>Go 项目以模块的方式进行组织，模块（module）是一组相关包的集合。一个项目通常是一个仓库（repository），而一个 Go 仓库（repository）只能包含一个模块，但可导入使用多个其它模块，仓库根目录下的 <code>go.mod</code> 文件用来声明这些导入模块的路径。和 <code>go.mod</code> 文件一起位于仓库根目录的是一个一个的子目录，每个子目录可能是一个包，也可能是一个子模块，是否为子模块要看子目录下是否存在 <code>go.mod</code> 文件。</p><p>值得注意的是，尽管项目代码以仓库的方式进行组织，但在编写完成构建之前，代码不需要上传到云端，模块可以本地存在，仓库形式仅仅是因为我们总有一天会将代码上传到云的。</p><p>模块的路径不仅作为导入路径，同样也说明了模块的下载路径，比如 <code>golang.org/x/tools</code>， Go 命令将知道从 <code>https://golang.org/x/tools</code> 去下载它。包的导入路径是模块路径 + 包名，比如，模块 <code>github.com/google/go-cmp</code> 包含一个包（子目录）<code>cmp</code>，这个包的导入路径就是 <code>github.com/google.go-cmp/cmp</code>。Go 的标准库导入不需要模块路径前缀，可以仅使用包名。</p><p>最后，所有的模块都会下载到 GOPATH 的 <code>pkg/mod</code> 目录下，并被所有项目共享，因此，模块代码是只读的。</p><p>本部分说明可以阅读第二篇文章后再来看。</p><h2 id=4-第一个程序>4. 第一个程序</h2><p>编辑并运行我们的第一个程序，按照编程界的惯例，输出<code>hello, world!</code>。</p><p>首先创建项目文件夹并初始化模块，模块路径自行选择</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ mkdir hello
$ <span class=nb>cd</span> hello
$ go mod init example.com/user/hello
go: creating new go.mod: module example.com/user/hello
$ cat go.mod
module example.com/user/hello

go 1.14
$
</code></pre></td></tr></table></div></div><p>然后在该目录下创建<code>hello.go</code>文件，使其包含如下代码</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=kn>package</span> <span class=nx>main</span>

<span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>(</span><span class=p>)</span> <span class=p>{</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Hello, world.&#34;</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p>使用<code>go install</code>命令编译安装</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>&gt; go install github.com/shuzang/hello
</code></pre></td></tr></table></div></div><p>该命令会编译程序并产生一个二进制包，然后将该二进制包安装到 <code>$HOME/go/bin/hello</code> ，如果是 Windows，会安装到 <code>%USERPROFILE%\go\bin\hello.exe</code>。</p><p>安装目录受 GOPATH 和 GOBIN 影响，如果 GOBIN 被设置，则二进制包会被安装到设置的目录，如果 GOPATH 被设置，二进制包将按照到 GOPATH 列表的第一个目录的 bin 子目录，如果都没有被设置，就会安装到默认 GOPATH 的 bin 子目录(<code>$HOME/go</code> or <code>%USERPROFILE%\go</code>)。</p><p><code>go install</code> 命令执行需要在仓库根目录下，且下面三个命令是等效的</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ go install example.com/user/hello
$ go install .
$ go install
</code></pre></td></tr></table></div></div><p>将<code>$GOPATH/bin</code>添加到电脑的<code>PATH</code>环境变量中，这样可以直接执行</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-powershell data-lang=powershell><span class=p>$</span> <span class=n>hello</span>
<span class=n>Hello</span><span class=p>,</span> <span class=n>world</span><span class=p>!</span>
</code></pre></td></tr></table></div></div><p>可能是因为我使用chocolatey安装的原因，这一环境变量也已经自动设好了，所以我可以直接执行命令。</p><p>完成编辑后，就可以使用版本控制工具初始化仓库并上传代码了，示例如下（这一步不是必须的）</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-powershell data-lang=powershell><span class=p>$</span> <span class=n>git</span> <span class=n>init</span>
<span class=n>Initialized</span> <span class=n>empty</span> <span class=n>Git</span> <span class=n>repository</span> <span class=k>in</span> <span class=n>C:</span><span class=p>/</span><span class=n>Users</span><span class=p>/</span><span class=n>lylw1</span><span class=p>/</span><span class=n>go</span><span class=p>/</span><span class=n>src</span><span class=p>/</span><span class=n>github</span><span class=p>.</span><span class=n>com</span><span class=p>/</span><span class=n>shuzang</span><span class=p>/</span><span class=n>hello</span><span class=p>/</span><span class=p>.</span><span class=n>git</span><span class=p>/</span>
<span class=p>$</span> <span class=n>git</span> <span class=n>add</span> <span class=n>go</span><span class=p>.</span><span class=n>mod</span> <span class=n>hello</span><span class=p>.</span><span class=n>go</span>
<span class=p>$</span> <span class=n>git</span> <span class=n>commit</span> <span class=n>-m</span> <span class=s2>&#34;</span><span class=s2>initial commit</span><span class=s2>&#34;</span>
<span class=p>[</span><span class=n>master</span> <span class=p>(</span><span class=n>root</span><span class=n>-commit</span><span class=p>)</span> <span class=n>0b4507d</span><span class=p>]</span> <span class=n>initial</span> <span class=n>commit</span>
 <span class=n>1</span> <span class=n>file</span> <span class=n>changed</span><span class=p>,</span> <span class=n>7</span> <span class=n>insertion</span><span class=p>(</span><span class=p>+</span><span class=p>)</span>
 <span class=n>create</span> <span class=n>mode</span> <span class=n>100644</span> <span class=n>go</span><span class=p>.</span><span class=n>mod</span> <span class=n>hello</span><span class=p>.</span><span class=n>go</span>
</code></pre></td></tr></table></div></div><p>一种最方便的方式是将模块路径与仓库路径匹配，比如将以上模块声明为 <code>github.com/username/hello</code>，多数版本控制服务商都支持这种格式。</p><h2 id=5-编辑器ide>5. 编辑器/IDE</h2><p>Golang 开发最流行的两个工具是 Goland 和 VScode，我自己是 VScode 的使用者。除了这两个工具外，官方还提供了一份<a href=https://github.com/golang/go/wiki/IDEsAndTextEditorPlugins target=_blank rel="noopener noreffer">IDE和插件列表</a>。</p><p>VScode 中的 Go 扩展提供了大量的特性，如自动补全、悬停信息显示、括号匹配等，原本属于第三方开发者维护，现在交给了 Go 团队。详细的特性说明查看<a href=https://code.visualstudio.com/docs/languages/go target=_blank rel="noopener noreffer">官网</a>，下面进行一些简单介绍。</p><h3 id=51-go工具链>5.1 Go工具链</h3><p>微软在开发 VS Code 过程中, 定义了一种协议： <a href="https://link.zhihu.com/?target=https%3A//microsoft.github.io/language-server-protocol/" target=_blank rel="noopener noreffer">语言服务器协议</a> ，用来为每种语言提供诸如自动完成，代码提示等功能。gopls 就是Go语言的服务器, 安装命令为</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ go get -v golang.org/x/tools/gopls
</code></pre></td></tr></table></div></div><p>事实上，编辑 Go 代码时如果没有安装，VScode 会在右下角弹出提示，只要直接点击 <code>Install</code> 即可，不需要自己输入命令。同时，因为没有设置go.toolsGopath，默认使用了 GOPATH 作为安装路径</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>go.toolsGopath setting is not set. Using GOPATH C:<span class=se>\U</span>sers<span class=se>\l</span>ylw1<span class=se>\g</span>o
Installing <span class=m>1</span> tool at C:<span class=se>\U</span>sers<span class=se>\l</span>ylw1<span class=se>\g</span>o<span class=se>\b</span>in in module mode.
  gopls

Installing golang.org/x/tools/gopls SUCCEEDED

Reload VS Code window to use the Go language server
All tools successfully installed. You<span class=err>&#39;</span>re ready to Go :<span class=o>)</span>.

</code></pre></td></tr></table></div></div><p>Go代码的调试需要 delve 工具</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=err>$</span> <span class=k>go</span> <span class=nx>get</span> <span class=o>-</span><span class=nx>v</span> <span class=nx>github</span><span class=p>.</span><span class=nx>com</span><span class=o>/</span><span class=k>go</span><span class=o>-</span><span class=nx>delve</span><span class=o>/</span><span class=nx>delve</span><span class=o>/</span><span class=nx>cmd</span><span class=o>/</span><span class=nx>dlv</span>
</code></pre></td></tr></table></div></div><p>除此之外，还有一批需要安装的分析工具，如下</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=c1># Below tools are needed for the basic features of the Go extension.</span>
gocode
gopkgs
go-outline
gocode-gomod
godef
goreturns
</code></pre></td></tr></table></div></div><p>所有这些工具只需要在右下角弹出提示后点击 <code>Install</code> 即可</p><p><del>不过上述提到的很多插件不翻墙都无法下载，可以自己手动到github下载然后解压到<code>GOPATH/src</code>，建立起对应的目录结构，然后运行<code>go install</code>将其安装</del></p><p>微软设置了默认的代理服务器，现在(2020.03.18)所有插件均可在不翻墙的情况下顺利安装，而且速度很快</p><h3 id=52-用户和工作区设置>5.2 用户和工作区设置</h3><p>使用 VScode 需要关心的一个重要部分是用户和工作区设置，几乎所有的事情都和它们有关。</p><p><img class=lazyload src=/svg/loading.min.svg data-src=https://code.visualstudio.com/assets/docs/getstarted/settings/hero.png data-srcset="https://code.visualstudio.com/assets/docs/getstarted/settings/hero.png, https://code.visualstudio.com/assets/docs/getstarted/settings/hero.png 1.5x, https://code.visualstudio.com/assets/docs/getstarted/settings/hero.png 2x" data-sizes=auto alt=https://code.visualstudio.com/assets/docs/getstarted/settings/hero.png title=https://code.visualstudio.com/assets/docs/getstarted/settings/hero.png></p><p>这是两种不同的设置范围</p><ul><li>用户设置：是一个全局的设置，适用于打开的任何VScode窗口</li><li>工作区设置：如题，项目工作区的设置，只适用于对应的工作区</li></ul><p>工作区的设置会覆盖掉用户设置，它针对具体的项目，配置文件位于项目根目录<code>.vscode</code>文件夹，可与其它开发者共享。<code>.vscode</code>文件夹还用于存放调试配置和任务配置。</p><p>点击左下角的齿轮，选择<code>设置</code>，默认的设置界面如上，是一个可视化的界面，不过也可以使用<code>settings.json</code>配置文件</p><ul><li>用户设置文件在windows中位于<code>%APPDATA%\Code\User\settings.json</code></li><li>工作区设置文件位于根目录的<code>.vscode</code>文件夹中</li></ul><p>最后，VScode大量的操作都可以通过命令完成，使用快捷键<code>Ctrl+Shift+P</code>可以打开命令输入框。</p><h3 id=53-特性说明>5.3 特性说明</h3><p>在用户或工作区设置中，将 <code>go.autocompleteUnimportedPackages</code> 设为<code>true</code> ，可以在代码中点击包名跳转查看包的具体内容。</p><p>鼠标悬停在变量、函数和结构体的名称上方可以查看它们的签名等信息，这一功能由前面安装的<code>godef</code>工具实现，同样可完成这一功能的工具还有<code>godoc</code>和<code>gogetdoc</code>，通过在用户或工作区设置中调整<code>go.docsTool</code>来切换工具。</p><p>代码导航功能无需设置默认实现。</p><p>对源码的保存操作会自动触发格式化、编译和代码质量检查。格式化工具为<code>gofmt</code>，可选的替代工具有<code>goreturns</code>和<code>goimports</code>，在用户或工作区设置中调整<code>go.formatTool</code>来设置。编译的过程使用<code>go build</code>命令。代码质量检查的工具为<code>golint</code>，也可以使用<code>gometalinter</code>，用来检查代码的规范性，检查得到的<code>errors</code>和<code>warning</code>会在编辑器里以红色/绿色波浪线标出来，下面的输出窗口也会显示详细信息。</p><p>所有可选的替代工具都需要自己安装，使用快捷键打开命令面板，输入 <code>Go: Install/Update Tools </code>，选择要安装的工具，点击确定即可。</p><h3 id=54-使用>5.4 使用</h3><p><strong>调试</strong>使用的是前面安装的<code>delve</code>工具。在 VScode 中，按<code>F5</code>启动调试，一般情况下使用默认的调试配置即可，不过还是应当对调试配置选项有一定的了解。</p><p>默认是没有调试配置文件的，当我们需要进行配置时，输入命令 <code>Debug: Open launch.json </code>，第一次会在工作区根目录的<code>.vscode</code>文件夹中创建<code>launch.json</code>文件，文件中默认的配置信息如下</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-json data-lang=json><span class=p>{</span>
    <span class=nt>&#34;version&#34;</span><span class=p>:</span> <span class=s2>&#34;0.2.0&#34;</span><span class=p>,</span>
    <span class=nt>&#34;configurations&#34;</span><span class=p>:</span> <span class=p>[</span>
        <span class=p>{</span>
            <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;Launch&#34;</span><span class=p>,</span>
            <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;go&#34;</span><span class=p>,</span>
            <span class=nt>&#34;request&#34;</span><span class=p>:</span> <span class=s2>&#34;launch&#34;</span><span class=p>,</span>
            <span class=nt>&#34;mode&#34;</span><span class=p>:</span> <span class=s2>&#34;auto&#34;</span><span class=p>,</span>
            <span class=nt>&#34;program&#34;</span><span class=p>:</span> <span class=s2>&#34;${fileDirname}&#34;</span><span class=p>,</span>
            <span class=nt>&#34;env&#34;</span><span class=p>:</span> <span class=p>{</span><span class=p>}</span><span class=p>,</span>
            <span class=nt>&#34;args&#34;</span><span class=p>:</span> <span class=p>[</span><span class=p>]</span>
        <span class=p>}</span>
    <span class=p>]</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p>可设置的配置属性可查看<a href=https://github.com/Microsoft/vscode-go/wiki/Debugging-Go-code-using-VS-Code target=_blank rel="noopener noreffer">Debugging Go code using VS Code</a>，更多关于VScode中Go调试的相关信息都可查看该文档。</p><p>这里需要注意的是<code>args</code>，调试时程序需要传入的参数数组是该配置参数的值</p><p><strong>运行</strong>程序使用快捷键<code>Ctrl+F5</code>，和调试使用的是同一个配置文件。</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>更新于 2020-06-13</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/2019/golang-basic-grammar-1-background-and-preliminary-exploration/index.md target=_blank>阅读原始文档</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Twitter" data-sharer=twitter data-url=https://shuzang.github.io/2019/golang-basic-grammar-1-background-and-preliminary-exploration/ data-title=Golang语法基础1-背景与初探 data-hashtags=Go语法><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://shuzang.github.io/2019/golang-basic-grammar-1-background-and-preliminary-exploration/ data-hashtag=Go语法><i class="fab fa-facebook-square fa-fw"></i></a><a href=javascript:void(0); title="分享到 Hacker News" data-sharer=hackernews data-url=https://shuzang.github.io/2019/golang-basic-grammar-1-background-and-preliminary-exploration/ data-title=Golang语法基础1-背景与初探><i class="fab fa-hacker-news fa-fw"></i></a><a href=javascript:void(0); title="分享到 Line" data-sharer=line data-url=https://shuzang.github.io/2019/golang-basic-grammar-1-background-and-preliminary-exploration/ data-title=Golang语法基础1-背景与初探><i data-svg-src=https://cdn.jsdelivr.net/npm/simple-icons@2.14.0/icons/line.svg></i></a><a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://shuzang.github.io/2019/golang-basic-grammar-1-background-and-preliminary-exploration/ data-title=Golang语法基础1-背景与初探><i class="fab fa-weibo fa-fw"></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/go%E8%AF%AD%E6%B3%95/>Go语法</a></section><section><span><a href=javascript:void(0); onclick=window.history.back();>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/2019/using-virtual-machine-to-build-experimental-platform/ class=prev rel=prev title=研究记录4-利用虚拟机搭建实验平台(失败)><i class="fas fa-angle-left fa-fw"></i>研究记录4-利用虚拟机搭建实验平台(失败)</a>
<a href=/2019/scaleless-net-light-tower/ class=next rel=next title=白塔、弥陀寺及碧霞宫>白塔、弥陀寺及碧霞宫<i class="fas fa-angle-right fa-fw"></i></a></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>由 <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.63.2">Hugo</a> 强力驱动 | 主题 - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i>LoveIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2018 - 2022</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>Shuzang</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title=回到顶部><i class="fas fa-arrow-up fa-fw"></i></a><a href=# id=view-comments class=fixed-button title=查看评论><i class="fas fa-comment fa-fw"></i></a></div><script type=text/javascript src=https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/autocomplete.js@0.37.1/dist/autocomplete.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lunr@2.3.8/lunr.min.js></script><script type=text/javascript src=/lib/lunr/lunr.stemmer.support.min.js></script><script type=text/javascript src=/lib/lunr/lunr.zh.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js></script><script type=text/javascript src=https://cdn.jsdelivr.net/npm/sharer.js@0.4.0/sharer.min.js></script><script type=text/javascript>window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"lunr"}};</script><script type=text/javascript src=/js/theme.min.js></script></body></html>