<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>VMware虚拟机使用技巧 - Shuzang's Blog</title><meta name=author content><meta name=author-link content><meta name=description content="双系统时常折腾容易坏电脑，因此一般是在虚拟机中使用Linux系统，常用的虚拟机为VMware，本文对VMware的相关知识以及使用过程中的一"><meta name=keywords content="linux"><meta itemprop=name content="VMware虚拟机使用技巧"><meta itemprop=description content="双系统时常折腾容易坏电脑，因此一般是在虚拟机中使用Linux系统，常用的虚拟机为VMware，本文对VMware的相关知识以及使用过程中的一"><meta itemprop=datePublished content="2019-09-06T00:00:00+00:00"><meta itemprop=dateModified content="2019-11-17T00:00:00+00:00"><meta itemprop=wordCount content="3041"><meta itemprop=image content="https://shuzang.github.io/logo.png"><meta itemprop=keywords content="linux,"><meta property="og:title" content="VMware虚拟机使用技巧"><meta property="og:description" content="双系统时常折腾容易坏电脑，因此一般是在虚拟机中使用Linux系统，常用的虚拟机为VMware，本文对VMware的相关知识以及使用过程中的一"><meta property="og:type" content="article"><meta property="og:url" content="https://shuzang.github.io/2019/vmware-usage/"><meta property="og:image" content="https://shuzang.github.io/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-09-06T00:00:00+00:00"><meta property="article:modified_time" content="2019-11-17T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://shuzang.github.io/logo.png"><meta name=twitter:title content="VMware虚拟机使用技巧"><meta name=twitter:description content="双系统时常折腾容易坏电脑，因此一般是在虚拟机中使用Linux系统，常用的虚拟机为VMware，本文对VMware的相关知识以及使用过程中的一"><meta name=application-name content="Shuzang's Blog"><meta name=apple-mobile-web-app-title content="Shuzang's Blog"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=https://shuzang.github.io/2019/vmware-usage/><link rel=prev href=https://shuzang.github.io/2019/%E6%A0%91%E8%8E%93%E6%B4%BE%E5%92%8C%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%BB%84%E7%BD%91%E5%87%BA%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%80%9D%E8%B7%AF/><link rel=next href=https://shuzang.github.io/2019/using-virtual-machine-to-build-experimental-platform/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=https://unpkg.com/@fortawesome/fontawesome-free@6.2.0/css/all.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://unpkg.com/@fortawesome/fontawesome-free@6.2.0/css/all.min.css></noscript><link rel=preload href=https://unpkg.com/animate.css@4.1.1/animate.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://unpkg.com/animate.css@4.1.1/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"VMware虚拟机使用技巧","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/shuzang.github.io\/2019\/vmware-usage\/"},"genre":"posts","keywords":"linux","wordcount":3041,"url":"https:\/\/shuzang.github.io\/2019\/vmware-usage\/","datePublished":"2019-09-06T00:00:00+00:00","dateModified":"2019-11-17T00:00:00+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"作者"},"description":""}</script></head><body data-header-desktop=sticky data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper data-page-style=normal><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper data-github-corner=right><div class=header-title><a href=/ title="Shuzang's Blog"><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/avatar.png data-title="Shuzang's Blog" data-alt="Shuzang's Blog" class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>Shuzang's Blog</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 文章</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li><li class=menu-item><a class=menu-link href=/collection/><i class="fa-solid fa-bookmark fa-fw fa-sm" aria-hidden=true></i> 集子</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> 关于</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder=搜索文章标题或内容…… id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Shuzang's Blog"><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/avatar.png data-title=https://picped-1301226557.cos.ap-beijing.myqcloud.com/avatar.png data-alt=https://picped-1301226557.cos.ap-beijing.myqcloud.com/avatar.png class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>Shuzang's Blog</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容…… id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></li><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 文章</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li><li class=menu-item><a class=menu-link href=/collection/><i class="fa-solid fa-bookmark fa-fw fa-sm" aria-hidden=true></i> 集子</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> 关于</a></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=container><aside class=toc id=toc-auto><h2 class=toc-title>目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>VMware虚拟机使用技巧</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><span class=author><i class="fa-solid fa-user-circle" aria-hidden=true></i></span></span>
<span class=post-category>收录于 <a href=/categories/%E7%88%B1%E7%BC%96%E7%A8%8B%E7%88%B1%E6%8A%80%E6%9C%AF%E7%9A%84%E5%AD%A9%E5%AD%90/><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> 爱编程爱技术的孩子</a></span></div><div class=post-meta-line><span title="发布于 2019-09-06 00:00:00"><i class="fa-regular fa-calendar-alt fa-fw me-1" aria-hidden=true></i><time datetime=2019-09-06>2019-09-06</time></span>&nbsp;<span title="更新于 2019-11-17 00:00:00"><i class="fa-regular fa-edit fa-fw me-1" aria-hidden=true></i><time datetime=2019-11-17>2019-11-17</time></span>&nbsp;<span title="3041 字"><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden=true></i>约 3100 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden=true></i>预计阅读 7 分钟</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#三种网络模式辨析>三种网络模式辨析</a><ul><li><a href=#1-bridged桥接模式>1. Bridged(桥接模式)</a></li><li><a href=#2-nat网络地址转换模式>2. NAT(网络地址转换模式)</a></li><li><a href=#3-host-only主机模式>3. Host-only(主机模式)</a></li></ul></li><li><a href=#静态ip设置>静态ip设置</a><ul><li><a href=#1-桥接模式>1. 桥接模式</a></li><li><a href=#3-静态ip设置>3. 静态ip设置</a></li></ul></li><li><a href=#桥接模式静态ip变动问题>桥接模式静态ip变动问题</a></li><li><a href=#过程>过程</a></li><li><a href=#ping出现dup>ping出现DUP！</a></li><li><a href=#重启后界面变小>重启后界面变小</a></li><li><a href=#参考>参考</a></li></ul></nav></div></div><div class=content id=content><div class="details admonition warning open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-exclamation-triangle fa-fw" aria-hidden=true></i>警告<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>本文最后更新于 2019-11-17，文中内容可能已过时。</div></div></div><p>双系统时常折腾容易坏电脑，因此一般是在虚拟机中使用Linux系统，常用的虚拟机为VMware，本文对VMware的相关知识以及使用过程中的一些问题做介绍。</p><h2 id=三种网络模式辨析>三种网络模式辨析</h2><p>VMware有三种网络模式，分别是桥接模式、NAT模式和主机模式</p><h3 id=1-bridged桥接模式>1. Bridged(桥接模式)</h3><p>在桥接模式下，VMware虚拟出来的操作系统就像是局域网中的一独立的主机，它可以访问网内任何一台机器。不过你需要空闲的IP地址，并且需要手工为虚拟系统配置IP地址、子网掩码，而且还要和宿主机器处于同一网段，这样虚拟系统才能和宿主机器进行通信。</p><p>如果你想利用VMware在局域网内新建一个虚拟服务器，为局域网用户提供网络服务，就应该选择桥接模式。</p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64345429-f0448a80-d022-11e9-9c6c-5a9154f2d7cd.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64345429-f0448a80-d022-11e9-9c6c-5a9154f2d7cd.png?size=small, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64345429-f0448a80-d022-11e9-9c6c-5a9154f2d7cd.png?size=medium 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64345429-f0448a80-d022-11e9-9c6c-5a9154f2d7cd.png?size=large 2x" sizes=auto data-title=桥接模式 data-alt=桥接模式 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><h3 id=2-nat网络地址转换模式>2. NAT(网络地址转换模式)</h3><p>使用NAT模式，就是让虚拟系统借助NAT(网络地址转换)功能，通过宿主机器所在的网络来访问公网。也就是说，使用NAT模式可以实现在虚拟系统里访问互联网。NAT模式下的虚拟系统的TCP/IP配置信息是由VMnet8(NAT)虚拟网络的DHCP服务器提供的，无法进行手工修改，因此虚拟系统也就无法和本局域网中的其他真实主机进行通讯。采用NAT模式最大的优势是虚拟系统接入互联网非常简单，你不需要进行任何其他的配置，只需要宿主机器能访问互联网即可。</p><p>如果你想利用VMware安装一个新的虚拟系统，在虚拟系统中不用进行任何手工配置就能直接访问互联网，建议你采用NAT模式。（也可以配置静态IP，后面会介绍）</p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64345428-efabf400-d022-11e9-87e1-228e7f09f247.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64345428-efabf400-d022-11e9-87e1-228e7f09f247.png?size=small, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64345428-efabf400-d022-11e9-87e1-228e7f09f247.png?size=medium 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64345428-efabf400-d022-11e9-87e1-228e7f09f247.png?size=large 2x" sizes=auto data-title=NAT模式 data-alt=NAT模式 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><h3 id=3-host-only主机模式>3. Host-only(主机模式)</h3><p>在某些特殊的网络调试环境中，要求将真实环境和虚拟环境隔离开，这时你就可采用Host-only模式。</p><p>在Host-only模式中，所有的虚拟系统是可以相互通信的，但虚拟系统和真实的网络是被隔离开的。可以利用Windows XP里面自带的Internet连接共享(实际上是一个简单的路由NAT)来让虚拟机 通过主机真实的网卡进行外网的访问。虚拟系统的TCP/IP配置信息(如IP地址、网关地址、DNS服务器等)，都是由VMnet1(Host-only)虚拟网络的DHCP服务器来动态分配的。如果你想利用VMware创建一个与网内其他机器相隔离的虚拟系统，进行某些特殊的网络调试工作，可以选择Host-only模式。</p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64345431-f0448a80-d022-11e9-8278-920d6587ca2c.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64345431-f0448a80-d022-11e9-8278-920d6587ca2c.png?size=small, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64345431-f0448a80-d022-11e9-8278-920d6587ca2c.png?size=medium 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64345431-f0448a80-d022-11e9-8278-920d6587ca2c.png?size=large 2x" sizes=auto data-title=主机模式 data-alt=主机模式 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><h2 id=静态ip设置>静态ip设置</h2><p>虚拟机中安装的是Ubuntu18.04，因项目需要对其进行静态IP设置</p><h3 id=1-桥接模式>1. 桥接模式</h3><p>首先查看虚拟机网络配置信息，选择菜单栏<code>编辑—>虚拟网络编辑器</code>，在三个网络中选择<code>VMnet0</code>，桥接模式中选择网卡，我选择了有线网卡，可以根据需要选择无线网卡。</p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64427296-7f18dc00-d0e3-11e9-8dad-39778fe38ba4.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64427296-7f18dc00-d0e3-11e9-8dad-39778fe38ba4.png?size=small, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64427296-7f18dc00-d0e3-11e9-8dad-39778fe38ba4.png?size=medium 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64427296-7f18dc00-d0e3-11e9-8dad-39778fe38ba4.png?size=large 2x" sizes=auto data-title=虚拟网络编辑器 data-alt=虚拟网络编辑器 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><p>其次编辑虚拟机网络模式，点击<code>编辑虚拟机设置</code>，选择<code>网络适配器</code>，在<code>网络连接</code>部分选择<code>桥接模式</code>。</p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64427318-8c35cb00-d0e3-11e9-9d13-4aaf367e5b7b.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64427318-8c35cb00-d0e3-11e9-9d13-4aaf367e5b7b.png?size=small, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64427318-8c35cb00-d0e3-11e9-9d13-4aaf367e5b7b.png?size=medium 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64427318-8c35cb00-d0e3-11e9-9d13-4aaf367e5b7b.png?size=large 2x" sizes=auto data-title=虚拟机网络设置 data-alt=虚拟机网络设置 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><p>###　2. NAT模式</p><p>首先依然是查看虚拟机网络配置信息，选择菜单栏<code>编辑—>虚拟网络编辑器</code>，在三个网络中选择<code>VMnet8</code>，点击<code>NAT设置</code>，查看并记录子网ip和网关。虚拟网络编辑器中的<code>使用本地DHCP服务将IP地址分配给虚拟机</code>选项不要取消勾选，因为看到很多教程说要取消勾选，实际上取消掉之后就没网了。</p><p><em>注：这一步是查看，没有需要更改的内容。</em></p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64344984-13bb0580-d022-11e9-9a8c-37744441d088.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64344984-13bb0580-d022-11e9-9a8c-37744441d088.png?size=small, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64344984-13bb0580-d022-11e9-9a8c-37744441d088.png?size=medium 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64344984-13bb0580-d022-11e9-9a8c-37744441d088.png?size=large 2x" sizes=auto data-title=虚拟网络编辑器 data-alt=虚拟网络编辑器 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><p>然后编辑虚拟机网络模式。查看完配置信息后，在要设置静态ip的虚拟机界面下，点击<code>编辑虚拟机设置</code>，进入后选择<code>网络适配器</code>，在<code>网络连接</code>部分从<code>NAT模式</code>切换到<code>自定义特点虚拟网络</code>，并选择<code>VMnet8(NAT模式)</code>。点击确定后退出。</p><p><em>注：这一步需要在关闭虚拟机的状态下进行，挂起状态无法设置</em></p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64344983-13bb0580-d022-11e9-896c-4b2149636e34.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64344983-13bb0580-d022-11e9-896c-4b2149636e34.png?size=small, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64344983-13bb0580-d022-11e9-896c-4b2149636e34.png?size=medium 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64344983-13bb0580-d022-11e9-896c-4b2149636e34.png?size=large 2x" sizes=auto data-title=虚拟机网络适配器设置 data-alt=虚拟机网络适配器设置 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><h3 id=3-静态ip设置>3. 静态ip设置</h3><p>Ubuntu18.04的静态ip设置是通用的，不因使用虚拟机不同。官方对静态ip设置的说明位于<a href=https://help.ubuntu.com/lts/serverguide/network-configuration.html target=_blank rel="external nofollow noopener noreferrer">Network Configuration</a>，步骤如下：</p><ol><li><p>使用<code>ifconfig</code>可以查看当前ip和网关地址和网卡名，若有必要可以自己测试一下网络是否畅通。</p></li><li><p>在<code>/etc/netplan</code>目录下创建配置文件<code>02_config.yaml</code>，因为该目录下已有01开头的文件。</p><div class=highlight id=id-1><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>$ sudo nano /etc/netplan/02_config.yaml</span></span></code></pre></td></tr></table></div></div></li><li><p>在配置文件中添加如下信息</p><div class=highlight id=id-2><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>network</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=m>2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>renderer</span><span class=p>:</span><span class=w> </span><span class=l>networkd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ethernets</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ens33</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>addresses</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=m>192.168.191.4</span><span class=l>/24</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>gateway4</span><span class=p>:</span><span class=w> </span><span class=m>192.168.191.1</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>nameservers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>search</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=l>mydomain, otherdomain]</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>          </span><span class=nt>addresses</span><span class=p>:</span><span class=w> </span><span class=p>[</span><span class=m>1.1.1.1</span><span class=p>,</span><span class=w> </span><span class=m>8.8.8.8</span><span class=p>]</span></span></span></code></pre></td></tr></table></div></div><p><code>ens33</code>是网卡名，即之前使用<code>ifconfig</code>命令查到的ip最前面的字段。addresses下的ip是自定义的静态ip，根据子网ip自己选择设置即可，掩码是24位的。<code>gateway4</code>就是之前在<code>NAT设置</code>中看到的网关地址。<code>nameservers</code>下的<code>addresses</code>是域名服务器地址，这里写的两个是常用的。</p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64344981-13226f00-d022-11e9-93d2-d257b56a3ac9.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64344981-13226f00-d022-11e9-93d2-d257b56a3ac9.png?size=small, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64344981-13226f00-d022-11e9-93d2-d257b56a3ac9.png?size=medium 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20190906_64344981-13226f00-d022-11e9-93d2-d257b56a3ac9.png?size=large 2x" sizes=auto data-title=静态ip设置 data-alt=静态ip设置 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p></li><li><p>保存退出，使用<code>netplan</code>启用配置</p><div class=highlight id=id-3><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>$ sudo netplan apply</span></span></code></pre></td></tr></table></div></div><p>再次查询即可看到新的ip地址，为我们设置的静态ip，最后可以ping一下8.8.8.8和百度测一下网络是否可用。</p></li></ol><h2 id=桥接模式静态ip变动问题>桥接模式静态ip变动问题</h2><p>联网试验期间突然有设备连不上了，经查发现使用netplan编辑启用的静态ip已变更，但这种情况只发生在虚拟机中。使用<code>sudo netplan apply</code>命令重新启用，但一段时间后会再次变为其它ip。是虚拟机桥接模式的设置问题，还是Ubuntu18.04本身设置静态Ip的方式问题，暂时不清楚。</p><p>桥接模式存在“复制物理网络连接状态”的选项，用于笔记本电脑在有线和无线网络之间切换时的ip地址续订。未确认是否对ip地址变动有影响，鉴于连接无线网络不做变动，已取消勾选。</p><p><a href=https://docs.vmware.com/cn/VMware-Workstation-Pro/15.0/com.vmware.ws.using.doc/GUID-826323AD-D014-475D-8909-DFA73B5A3A57.html target=_blank rel="external nofollow noopener noreferrer">官方解释-为现有虚拟机配置桥接模式网络连接</a></p><blockquote><p>您可以为现有虚拟机配置桥接模式网络连接。</p><p>要为新虚拟机配置桥接模式网络连接，请在运行<strong>新建虚拟机</strong>向导时选择<strong>自定义硬件</strong>。</p><h2 id=过程>过程</h2><ol><li><p>选择虚拟机，然后选择<strong>虚拟机</strong> > <strong>设置</strong>。</p></li><li><p>在<strong>硬件</strong>选项卡中，选择<strong>网络适配器</strong>。</p></li><li><p>选择<strong>桥接模式: 直接连接物理网络</strong>。</p></li><li><p>如果在笔记本电脑或其他移动设备上使用虚拟机，请选择<strong>复制物理网络连接状态</strong>。</p></li></ol><p>当您在有线或无线网络之间进行移动时，该设置会导致 IP 地址续订。</p><ol start=5><li>单击<strong>确定</strong>保存所做的更改。</li></ol></blockquote><p>第一种解决思路是虚拟机直接连接无线网络，但囿于笔记本的虚拟机无法检测到无线网卡，作罢，同时也不知道最后是否真的能起作用</p><p>目前打算直接从路由器后台针对MAC地址设置静态ip，虚拟机的MAC地址可以使用<code>ifconfig</code>命令查看，虽然网上都称应查看<code>HWaddr</code>后的地址，但并没有这个标识，只在<code>ens33</code>的描述信息中存在如下描述，ether后的地址为MAC地址</p><div class=highlight id=id-4><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ether 00:0c:29:5d:1f:a1  txqueuelen <span class=m>1000</span>  <span class=o>(</span>Ethernet<span class=o>)</span></span></span></code></pre></td></tr></table></div></div><p>也可以从<code>虚拟机设置—>网络适配器—>高级</code>查看MAC地址，两者应是一致的。</p><p>然后在路由器后台选择<code>IP与MAC绑定—>静态ARP绑定设置</code>，绑定设备MAC和要使用的静态IP即可。这里使用的路由器是水星MW306R。</p><h2 id=ping出现dup>ping出现DUP！</h2><p>主机和树莓派都接入了路由器开启的WiFi网络，树莓派之间相互ping没有问题，但当树莓派ping虚拟机的系统，或者虚拟机的系统ping任何一个网址，返回的数据包都会出现<code>DUP！</code>错误。网上的解决办法是禁用然后重新启用VMnet8，但并没有起作用。</p><p>经测试，有线网卡和无线网卡都接入了路由器的网络，虚拟机桥接到了无线网卡上，可能因此造成了环路（并不确定）。当我将虚拟机直接桥接到有线网卡上，再次发起ping命令，并断开了无线网卡的连接，<code>DUP!</code>错误就消失了。没有明白原理，但确实解决了错误。</p><h2 id=重启后界面变小>重启后界面变小</h2><p>虚拟机重启后有时候窗口会变得只有中间一小块且没法放大，虽然可以通过重新安装vm-tools来修复，但经常重装也太麻烦了。实际上这种故障是由于vm-tools的服务没有正常启动造成的，可以通过执行下面的命令解决。</p><div class=highlight id=id-5><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sudo systemctl restart opoen-vm-tools</span></span></code></pre></td></tr></table></div></div><p>github上open-vm-tools项目的<a href=https://github.com/vmware/open-vm-tools/issues/253 target=_blank rel="external nofollow noopener noreferrer">#253</a>和<a href=https://github.com/vmware/open-vm-tools/issues/303 target=_blank rel="external nofollow noopener noreferrer">#303</a>两个issue都是讨论这个问题的。</p><h2 id=参考>参考</h2><p>[1] <a href=https://www.cnblogs.com/luxiaodai/p/9947343.html target=_blank rel="external nofollow noopener noreferrer">陆小呆-虚拟机网络NAT模式配置静态IP</a></p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="更新于 2019-11-17 00:00:00">更新于 2019-11-17&nbsp;</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md><span><a href=/2019/vmware-usage/index.md title=阅读原始文档 class=link-to-markdown>阅读原始文档</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Pocket" data-sharer=pocket data-url=https://shuzang.github.io/2019/vmware-usage/><i class="fa-brands fa-get-pocket fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://shuzang.github.io/2019/vmware-usage/ data-title=VMware虚拟机使用技巧><i class="fa-brands fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/tags/linux/ class=post-tag>linux</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/2019/%E6%A0%91%E8%8E%93%E6%B4%BE%E5%92%8C%E8%99%9A%E6%8B%9F%E6%9C%BA%E7%BB%84%E7%BD%91%E5%87%BA%E7%8E%B0%E7%9A%84%E9%97%AE%E9%A2%98%E5%8F%8A%E8%A7%A3%E5%86%B3%E6%80%9D%E8%B7%AF/ class=post-nav-item rel=prev title=树莓派和虚拟机组网出现的问题及解决思路><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>树莓派和虚拟机组网出现的问题及解决思路</a>
<a href=/2019/using-virtual-machine-to-build-experimental-platform/ class=post-nav-item rel=next title=研究记录4-利用虚拟机搭建实验平台(失败)>研究记录4-利用虚拟机搭建实验平台(失败)<i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div class=post-reward><div class=comment></div><input type=checkbox class=reward-input name=reward id=fi-reward hidden>
<label class=reward-button for=fi-reward>赞赏</label><div class=reward-ways data-mode=static><div><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/alipay.png data-title=" 支付宝" data-alt=" 支付宝" style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span>支付宝</span></div><div><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/wechatpay.png data-title=" 微信" data-alt=" 微信" style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span>微信</span></div></div></div></article></main><footer class=footer><div class=footer-container><div class="footer-line custom">Hava a great day !</div><div class="footer-line copyright" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2018 - 2024</span><span class=author itemprop=copyrightHolder>
<a href=/></a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label=回到顶部><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class="variant-numeric d-none">0%</span></div></div><a href=https://github.com/shuzang/shuzang.github.io title="View source on GitHub" target=_blank rel="external nofollow" class="github-corner right d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div id=mask></div><div class=reading-progress-bar style=left:0;top:0></div><noscript><div class=noscript-warning>FixIt 主题在启用 JavaScript 的情况下效果最佳。</div></noscript></div><link rel=stylesheet href=https://unpkg.com/lightgallery@2.6.1/css/lightgallery-bundle.min.css><link rel=preload href=https://unpkg.com/katex@0.16.2/dist/katex.min.css as=style onload='this.removeAttribute("onload"),this.rel="stylesheet"'><noscript><link rel=stylesheet href=https://unpkg.com/katex@0.16.2/dist/katex.min.css></noscript><link rel=stylesheet href=https://unpkg.com/pace-js@1.2.4/themes/blue/pace-theme-minimal.css><script src=https://unpkg.com/autocomplete.js@0.38.1/dist/autocomplete.min.js defer></script><script src=https://unpkg.com/fuse.js@6.6.2/dist/fuse.min.js defer></script><script src=https://unpkg.com/twemoji@14.0.2/dist/twemoji.min.js defer></script><script src=https://unpkg.com/lightgallery@2.6.1/lightgallery.min.js defer></script><script src=https://unpkg.com/lightgallery@2.6.1/plugins/thumbnail/lg-thumbnail.min.js defer></script><script src=https://unpkg.com/lightgallery@2.6.1/plugins/zoom/lg-zoom.min.js defer></script><script src=https://unpkg.com/sharer.js@0.5.1/sharer.min.js async defer></script><script src=https://unpkg.com/katex@0.16.2/dist/katex.min.js defer></script><script src=https://unpkg.com/katex@0.16.2/dist/contrib/auto-render.min.js defer></script><script src=https://unpkg.com/katex@0.16.2/dist/contrib/copy-tex.min.js defer></script><script src=https://unpkg.com/katex@0.16.2/dist/contrib/mhchem.min.js defer></script><script src=https://unpkg.com/pangu@4.0.7/dist/browser/pangu.min.js defer></script><script src=https://unpkg.com/pace-js@1.2.4/pace.min.js async defer></script><script>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:10},comment:{enable:!1},lightgallery:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},pangu:{enable:!0,selector:"article"},search:{distance:100,findAllMatches:!1,fuseIndexURL:"/index.json",highlightTag:"em",ignoreFieldNorm:!1,ignoreLocation:!1,isCaseSensitive:!1,location:0,maxResultLength:10,minMatchCharLength:2,noResultsFound:"没有找到结果",snippetLength:30,threshold:.3,type:"fuse",useExtendedSearch:!1},twemoji:!0}</script><script src=/js/theme.min.js defer></script></body></html>