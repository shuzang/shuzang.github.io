<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>系统移植1-移植相关知识 - Shuzang's Blog</title><meta name=author content="Shuzang"><meta name=author-link content><meta name=description content="1. Linux 操作系统组成 Linux 操作系统由 Linux 内核、shell 命令解释器和应用程序3部分构成 1.1 shell Linux的内核不能直接接受来自终端的用户命令，shell 为"><meta name=keywords content="linux"><meta itemprop=name content="系统移植1-移植相关知识"><meta itemprop=description content="1. Linux 操作系统组成 Linux 操作系统由 Linux 内核、shell 命令解释器和应用程序3部分构成 1.1 shell Linux的内核不能直接接受来自终端的用户命令，shell 为"><meta itemprop=datePublished content="2018-04-11T00:00:00+00:00"><meta itemprop=dateModified content="2018-04-11T00:00:00+00:00"><meta itemprop=wordCount content="5682"><meta itemprop=image content="https://shuzang.github.io/logo.png"><meta itemprop=keywords content="linux,"><meta property="og:title" content="系统移植1-移植相关知识"><meta property="og:description" content="1. Linux 操作系统组成 Linux 操作系统由 Linux 内核、shell 命令解释器和应用程序3部分构成 1.1 shell Linux的内核不能直接接受来自终端的用户命令，shell 为"><meta property="og:type" content="article"><meta property="og:url" content="https://shuzang.github.io/2018/migration-related-knowledge/"><meta property="og:image" content="https://shuzang.github.io/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-04-11T00:00:00+00:00"><meta property="article:modified_time" content="2018-04-11T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://shuzang.github.io/logo.png"><meta name=twitter:title content="系统移植1-移植相关知识"><meta name=twitter:description content="1. Linux 操作系统组成 Linux 操作系统由 Linux 内核、shell 命令解释器和应用程序3部分构成 1.1 shell Linux的内核不能直接接受来自终端的用户命令，shell 为"><meta name=application-name content="Shuzang's Blog"><meta name=apple-mobile-web-app-title content="Shuzang's Blog"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=https://shuzang.github.io/2018/migration-related-knowledge/><link rel=prev href=https://shuzang.github.io/2018/migration-of-debian-system/><link rel=next href=https://shuzang.github.io/2018/minimalism/><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"系统移植1-移植相关知识","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/shuzang.github.io\/2018\/migration-related-knowledge\/"},"genre":"posts","keywords":"linux","wordcount":5682,"url":"https:\/\/shuzang.github.io\/2018\/migration-related-knowledge\/","datePublished":"2018-04-11T00:00:00+00:00","dateModified":"2018-04-11T00:00:00+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Shuzang"},"description":""}</script></head><body data-header-desktop=sticky data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper data-page-style=normal><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper data-github-corner=right><div class=header-title><a href=/ title="Shuzang's Blog"><img loading=lazy src=/images/avatar.png srcset="/images/avatar.png, /images/avatar.png 1.5x, /images/avatar.png 2x" sizes=auto data-title="Shuzang's Blog" data-alt="Shuzang's Blog" class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>Shuzang's Blog</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 文章</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> 关于</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder=搜索文章标题或内容…… id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Shuzang's Blog"><img loading=lazy src=/images/avatar.png srcset="/images/avatar.png, /images/avatar.png 1.5x, /images/avatar.png 2x" sizes=auto data-title=/images/avatar.png data-alt=/images/avatar.png class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>Shuzang's Blog</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容…… id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></li><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> 文章</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> 分类</a></li><li class=menu-item><a class=menu-link href=/tags/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> 标签</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-info-circle fa-fw fa-sm" aria-hidden=true></i> 关于</a></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=container><aside class=toc id=toc-auto><h2 class=toc-title>目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>系统移植1-移植相关知识</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><span class=author><img loading=lazy src=/images/avatar.png srcset="/images/avatar.png, /images/avatar.png 1.5x, /images/avatar.png 2x" sizes=auto data-title=Shuzang data-alt=Shuzang class=avatar style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'>&nbsp;Shuzang</span></span>
<span class=post-category>收录于 <a href=/categories/%E7%88%B1%E7%BC%96%E7%A8%8B%E7%88%B1%E6%8A%80%E6%9C%AF%E7%9A%84%E5%AD%A9%E5%AD%90/><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> 爱编程爱技术的孩子</a></span></div><div class=post-meta-line><span title="发布于 2018-04-11 00:00:00"><i class="fa-regular fa-calendar-alt fa-fw me-1" aria-hidden=true></i><time datetime=2018-04-11>2018-04-11</time></span>&nbsp;<span title="更新于 2018-04-11 00:00:00"><i class="fa-regular fa-edit fa-fw me-1" aria-hidden=true></i><time datetime=2018-04-11>2018-04-11</time></span>&nbsp;<span><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden=true></i>约 5682 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden=true></i>预计阅读 12 分钟</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#1-linux-操作系统组成>1. Linux 操作系统组成</a><ul><li><a href=#11-shell>1.1 shell</a></li><li><a href=#12-linux-内核>1.2 Linux 内核</a></li></ul></li><li><a href=#2-u-boot>2. u-boot</a><ul><li><a href=#21-常用命令>2.1 常用命令</a></li><li><a href=#22-u-boot源代码目录结构>2.2 u-boot源代码目录结构</a></li><li><a href=#23-u-boot的编译>2.3 u-boot的编译</a><ul><li><a href=#配置头文件>配置头文件</a></li><li><a href=#编译>编译</a></li><li><a href=#u-boot工具>u-boot工具</a></li></ul></li><li><a href=#24-u-boot的移植>2.4 u-boot的移植</a></li><li><a href=#25-u-boot的使用>2.5 u-boot的使用</a></li></ul></li><li><a href=#3-交叉编译>3. 交叉编译</a><ul><li><a href=#31-交叉编译简介>3.1 交叉编译简介</a></li><li><a href=#32-交叉工具链简介>3.2 交叉工具链简介</a></li><li><a href=#33-交叉编译器>3.3 交叉编译器</a><ul><li><a href=#命名规则>命名规则</a></li><li><a href=#如何获得>如何获得</a></li><li><a href=#制作工具>制作工具</a></li></ul></li></ul></li></ul></nav></div></div><div class=content id=content><div class="details admonition warning open"><div class="details-summary admonition-title"><i class="icon fa-solid fa-exclamation-triangle fa-fw" aria-hidden=true></i>警告<i class="details-icon fa-solid fa-angle-right fa-fw" aria-hidden=true></i></div><div class=details-content><div class=admonition-content>本文最后更新于 2018-04-11，文中内容可能已过时。</div></div></div><h2 id=1-linux-操作系统组成>1. Linux 操作系统组成</h2><p>Linux 操作系统由 Linux 内核、shell 命令解释器和应用程序3部分构成</p><h3 id=11-shell>1.1 shell</h3><p>Linux的内核不能直接接受来自终端的用户命令，shell 为用户提供使用 Linux 操作系统的接口。在Linux 中几乎所有的操作都可以通过命令行来完成，使用 shell 编写的程序称为 shell 脚本。shell 可以作为命令语言、命令解释程序及程序设计语言，用户成功登录Linux时系统自动启用shell，当在终端输入正确的shell命令时，shell通过相应的命令和程序，通过内核执行用户需要的操作。更详细的知识可参考 <a href=https://www.ibm.com/developerworks/cn/linux/l-linux-shells/index.html target=_blank rel="external nofollow noopener noreferrer">评估Linux中的shell</a> 一文。</p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_41342748db2b.gif srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_41342748db2b.gif, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_41342748db2b.gif 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_41342748db2b.gif 2x" sizes=auto data-title="1977年以来的Linux shell" data-alt="1977年以来的Linux shell" style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><p>几种 shell 的比较表如下</p><table><thead><tr><th>Shell</th><th>介绍</th></tr></thead><tbody><tr><td>Bourne Shell</td><td>编程方式占优势，但在与用户交互方面比较差</td></tr><tr><td>Bourne - Again Shell</td><td>专为 Linux 而写，在 Bourne Shell 基础上增加了功能，是 Linux 默认内核</td></tr><tr><td>C Shell</td><td>语法类似于 C 语言，有较高的编程能力</td></tr><tr><td>Tcsh</td><td>C shell 的扩展</td></tr><tr><td>Korn Shell</td><td>集合了 C shell 和 Bourne shell 的优点</td></tr></tbody></table><h3 id=12-linux-内核>1.2 Linux 内核</h3><p>Linux 内核是操作系统的核心部分。它由进程管理、文件管理、存储管理、设备管理和网络管理五大部分组成。采用模块化的设计，它的功能也是通过增加和减少模块来实现的。这种设计保证系统封闭和开放与效率的平衡，避免在修剪功能时改变系统结构。</p><p>Linux 内核最注重的问题是实用和效率，其特点如下</p><ol><li>整个 Linux 内核由很多过程组成，每个过程可以独立编译，然后用连接程序将其连接在一起成为一个单独的目标程序。</li><li>Linux 的文件系统最大特点是实现了一种抽象文件模型——VFS。使用虚拟文件系统屏蔽了各种不同文件系统的内在差别，使得用户可以使用同样的方式访问各种不同格式的文件系统，可以毫无区别的在不同格式、不同介质的文件系统之间使用 VFS 提供的统一接口交换数据。</li><li>为了保证方便的支持新设备、新功能，又不会无限扩大内核规模，Linux 系统对设备驱动或新文件系统等采用了模块化方式，用户在需要时可以动态加载，使用完毕可以动态卸载。同时对内核，用户也可以定制，选择适合自己的功能，将不需要的部分剔除出内核。这两种技术都保证了内核的紧凑性和扩展性。</li></ol><h2 id=2-u-boot>2. u-boot</h2><p>u-boot是在 PPCBOOT 和 ARMBOOT 基础上发展而来的，是一个通用引导程序，支持很多架构，这一点上篇BootLoader已经很明白。u-boot的移植过程是一个对嵌入式系统包括软硬件及操作系统加深理解的一个过程，我们通过这个过程来一点点学习。</p><h3 id=21-常用命令>2.1 常用命令</h3><p>u-boot在下载模式下，提供了许多有用的命令</p><p><strong>环境变量类</strong></p><p>printenv：查看环境变量</p><p>saveenv：保存当前环境变量</p><p>setenv：设置当前环境变量</p><p>askenv：在标准输入获得环境变量</p><p><strong>存储类</strong></p><p>md：显示指定内存地址中的内容</p><p>mm：顺序显示指定地址往后内存中的内容，可同时修改，地址自动递增</p><p>mw：向内存地址写内容</p><p>nm：修改内存地址，地址不递增</p><p>mtest：简单的RAM检测</p><p><strong>下载类</strong></p><p>tftp：将内核镜像文件从PC中下载到SDRAM的指定地址，然后通过bootm来引导内核，前提是所用PC要安装设置TFTP服务</p><p>loadb：透过串口下载二进制格式的文件</p><p>loads：透过串口下载S-Record格式的文件</p><p><strong>启动类</strong></p><p>boot：预先设定的启动命令并且启动</p><p>bootm：从某个地址启动内核</p><p>bootp：通过网络使用bootp或者TFTP协议引导镜像文件</p><p>bootelf：默认从0x30008000引导elf格式的文件</p><p>bootd（=boot）：引导的默认命令，即运行u-boot中在“include/configs/”板子名.h”中设置的“bootcmd”中的命令</p><p><strong>Flash命令</strong></p><p>erase：擦除Flash内容，必须以扇区为单位进行擦除</p><p>flinfo：查看Flash的信息</p><p>help：帮助命令，用于查询u-boot支持的命令</p><p>bdinfo：查看目标系统参数和变量，目标板的硬件配置</p><p>coninfo：显示控制设备和信息</p><p>flinfo：获取Flash存储器的信息</p><p>iminfo：打印和校验内核镜像头，内核的起始地址由CFG_LOAD_ADDR指定</p><p><strong>Cache类命令</strong></p><p>icache：开启和关闭指令Cache</p><p>dcachd：开启和关闭数据Cache</p><p><strong>其他命令</strong></p><p>reset：复位CPU</p><p>run：运行已经定义好的u-boot命令</p><p>sleep：命令延时执行时间</p><p>autoscr：从内存运行脚本</p><p>base：打印或者设置当前指令与下载地址的地址偏移</p><p>cmp：对输入的两段内存地址进行比较</p><p>version：打印u-boot版本信息</p><p><strong>Nand相关命令</strong></p><p>Nand info：打印Nand Flash信息</p><p>Nand device <n>：显示某个Nand设备</p><p>Nand erase FLAddr size：FLAddr为Nand Flash起始地址，size为从中擦除数据块的大小</p><p>Nand write InAddr FLAddr size ：InAddr为写到Nand Flash中的数据在内存的起始地址</p><h3 id=22-u-boot源代码目录结构>2.2 u-boot源代码目录结构</h3><p>u-boot主要的源代码目录如下图：</p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_be4a61b7d1d7.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_be4a61b7d1d7.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_be4a61b7d1d7.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_be4a61b7d1d7.png 2x" sizes=auto data-title=u-boot源代码目录树 data-alt=u-boot源代码目录树 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><p>主要目录的作用列一个表如下：</p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_dab6588a58c1.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_dab6588a58c1.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_dab6588a58c1.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_dab6588a58c1.png 2x" sizes=auto data-title=主要目录作用 data-alt=主要目录作用 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><h3 id=23-u-boot的编译>2.3 u-boot的编译</h3><p>u-boot的源码是通过gcc和Makefile组织编译的。顶层目录下的Makefile首先可以设置开发板的定义，然后递归地调用各级子目录下的Makefile，最后把编译过的程序链接成u-boot镜像。</p><p>目录下的Makefile看不懂，等学完Makefile再回来看这个吧，这里是一篇<a href=https://hacker-yhj.github.io/resources/gun_make.pdf target=_blank rel="external nofollow noopener noreferrer">GNU make 中文手册</a></p><h4 id=配置头文件>配置头文件</h4><p>除了编译过程Makefile外，还要在程序中为开发板定义配置选项或者参数。这个头文件是include/configs&lt;board_name>.h。&lt;board_name>用相应的BOARD定义代替。</p><p>这个头文件中主要定义了两类变量：</p><ul><li><p>选项：前缀是CONFIG_，用来选择处理器、设备接口、命令、属性等</p></li><li><p>参数：前缀是CFG_，用来定义总线频率、串口波特率、Flash地址等参数</p></li></ul><h4 id=编译>编译</h4><p>根据对Makefile的分析，编译分为两步：</p><p>配置：make smdk2410_config</p><p>编译：make</p><p>编译完成后，可以得到u-boot各种格式的映像文件和符号表，如下：</p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_755481c360ac.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_755481c360ac.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_755481c360ac.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_755481c360ac.png 2x" sizes=auto data-title=编译完成得到的文件 data-alt=编译完成得到的文件 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><p>u-boot的3中映像格式都可以烧写到Flash中，但需要看加载器能否识别这些格式。u-boot.bin最为常用，直接按照二进制格式下载，并且按照绝对地址烧写到Flash中就可以。</p><h4 id=u-boot工具>u-boot工具</h4><p>还记得上面列到的tools目录吗，这个目录下存放有u-boot的一些工具，有的工具经常被用到，下面用一个表说明几种工具的用途：</p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_7fd06fbc33d3.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_7fd06fbc33d3.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_7fd06fbc33d3.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_7fd06fbc33d3.png 2x" sizes=auto data-title=u-boot工具 data-alt=u-boot工具 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><h3 id=24-u-boot的移植>2.4 u-boot的移植</h3><p>为了使u-boot支持新的开发板，一种简便的做法是在u-boot已经支持的开发板中选择一种和目标板接近的，并在其基础上进行修改，代码修改的步骤如下。</p><ol><li><p>在board目录下创建smdk2410目录，添加smdk2410.c、flash.c、memsetup.s、u-boot.lds和config.mk等；</p></li><li><p>在cpu目录下创建arm920t目录，主要包含start.s、interrupts.c、cpu.c、serial.c和speed.c等文件</p></li><li><p>在include/configs目录下添加smdk2410.h，它定义了全局的宏定义等。</p></li><li><p>修改u-boot根目录下的Makefile文件，如下：</p><p><code>smdk2410_config：$（@： _config=）arm arm920t smdk2410</code></p></li><li><p>运行 make smdk2410_config，如果没有错误，就可以开始进行与硬件相关的代码移植工作</p></li></ol><h3 id=25-u-boot的使用>2.5 u-boot的使用</h3><p>1）烧写u-boot到Flash</p><p>新开发板中没有任何程序可执行，也就不能启动，需要先将u-boot烧写到Flash中</p><p>如果主板上的EPROM或者Flash能够取下来，就可以通过编程器烧写。计算机BIOS就存储在一块256KB的Flash上，通过插座与主板相连。但是多数嵌入式单板使用贴片的Flash，不能取下来烧写。这种情况可以通过处理器的调试接口，直接对板上的Flash编程。</p><p>处理器调试接口是为处理器芯片设计的标准调试接口，包含BDM，JTAG和EJTAG 3中接口标准。这3种硬件接口标准定义有所不同，但是功能基本相同，下面都统称为JTAG接口。</p><p>JTAG接口需要专用的硬件工具来连接，无论从功能、性能角度，还是从价格角度，这些工具都有很大差异。最简单方式就是通过JTAG电缆，转接到计算机并口连接。这需要在主机端开发烧写程序，还需要有并口设备驱动程序。开发板上电或复位时，烧写程序探测到处理器并且开始通信，然后把BootLoader下载并烧写到Flash中。</p><p>烧写完成后，复位开发板，串口终端应该显示u-boot启动信息。</p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_5a239c8a9488.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_5a239c8a9488.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_5a239c8a9488.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_5a239c8a9488.png 2x" sizes=auto data-title=串口终端显示的u-boot启动信息 data-alt=串口终端显示的u-boot启动信息 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><p>2）u-boot的环境变量</p><p>可通过printenv命令查看环境变量设置，前面介绍过这些命令</p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_c5f55503ce10.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_c5f55503ce10.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_c5f55503ce10.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_c5f55503ce10.png 2x" sizes=auto data-title=查看环境变量 data-alt=查看环境变量 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><p>下表列出一些常用的环境变量的含义解释</p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_68caba4bb42c.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_68caba4bb42c.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_68caba4bb42c.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_68caba4bb42c.png 2x" sizes=auto data-title=img data-alt=img style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><p>u-boot的环境变量都可以有默认值，也可以修改并且保存在参数区。u-boot的参数区一般有EEPROM和Flash两种设备。</p><h2 id=3-交叉编译>3. 交叉编译</h2><p>因为对这方面可以说是完全不了解，所以凭现有的知识提出来的问题大概是这么几个，至于学习过程中产生的新的问题，就到时候再解决：</p><p>1、交叉编译是什么以及为什么需要交叉编译</p><p>2、怎么得到这个交叉编译环境</p><p>3、怎么使用这个交叉编译环境</p><h3 id=31-交叉编译简介>3.1 交叉编译简介</h3><p>交叉编译，就是在一种平台上（称为宿主机）开发编译，编译出来的程序，在别的平台上（称为目标机）运行，即编译的环境和运行的环境是不一样的、交叉的，而程序的调试需要通过宿主机和目标机之间的协作来交互进行。交叉编译这个概念，主要和嵌入式开发有关，英文称为cross compile。这和我们平常在X86的电脑上开发、编译可执行程序，然后直接在X86环境下运行是相对的。</p><p>一种最常见的例子就是：在进行嵌入式开发时，手上有个嵌入式开发板，CPU是arm的，然后在x86的平台下开发，比如Ubuntu环境，然后就需要在x86的平台上，（用交叉编译器）去编译写好的程序代码，生成的（可执行的）程序是放到目标开发板—arm的CPU上运行的，即在x86平台上编译，在ARM平台上运行。</p><p>至于为什么需要交叉编译，有两点</p><ol><li>嵌入式系统硬件资源的限制，比如cpu主频相对较低，内存容量较小等，相对来说，pc机的速度更快，硬件资源更加丰富，因此利用pc机进行开发会提高开发效率。这是一直以来的说法，不过，现在嵌入式的硬件主频和内存这些资源都不算小了，个人觉得可以直接放在开发板上做本地编译。</li><li>嵌入式系统MCU体系结构和指令集不同，因此需要安装交叉编译工具进行编译，这样编译的目标程序才能够在相应的平台上比如：ARM、MIPS、POWEPC上正常运行。</li></ol><h3 id=32-交叉工具链简介>3.2 交叉工具链简介</h3><p>我们要完成的目标是生成可执行程序或库文件，为了达成此目标，内部的执行过程和逻辑主要包括：</p><ol><li>编译：编译的输入是程序代码，输出是目标文件，使用的工具叫编译器，常见的编译器如gcc</li><li>链接：链接的输入为程序运行时所依赖的或者某个库所依赖的另外一个库（文件），链接的输出为程序的可执行文件，或者是可以被别人调用的完整的库文件。链接使用的工具叫链接器，最常见的链接器是ld</li></ol><p>实际上，ld只是处理目标文件（二进制文件）最主要的一个工具，相关的还有很多其他工具，如as, objcopy, strip, ar等，对此，GNU官网弄出一个binutils，即binary utils，二进制工具（包），集成了所有这些和操作二进制相关的工具集合。关于这个东西，详见<a href=https://www.crifan.com/files/doc/docbook/binutils_intro/release/html/binutils_intro.html target=_blank rel="external nofollow noopener noreferrer">GNU Binutils详解</a>，而对于常用的列一个表给大家看一下：</p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_f12ee86dc76e.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_f12ee86dc76e.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_f12ee86dc76e.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_f12ee86dc76e.png 2x" sizes=auto data-title=常用工具 data-alt=常用工具 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><p>把上面设计到的一系列工具，按照对应的逻辑功能，编译、链接、后期其它处理等等，串起来，就是工具链。</p><p>而用于交叉编译的工具链就是交叉工具链。里面包含了很多工具，但是最主要的是用于编译的gcc，所以常把交叉工具链称为交叉编译器。那我们平常说的交叉编译版本的gcc，比如arm-linux-gcc，实际上指代了包含一系列交叉编译版本的交叉工具链（arm-linux-gcc，arm-linux-ld，arm-linux-as等等）</p><h3 id=33-交叉编译器>3.3 交叉编译器</h3><h4 id=命名规则>命名规则</h4><p>在嵌入式开发用到交叉编译器的时候，常看到这样的名字：</p><div class=highlight id=id-1><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>arm-xscale-linux-gnueabi-gcc
</span></span><span class=line><span class=cl>arm-liunx-gnu-gcc</span></span></code></pre></td></tr></table></div></div><p>其对应的交叉编译器前缀为：</p><div class=highlight id=id-2><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>arm-xscale-linux-gnueabi-
</span></span><span class=line><span class=cl>arm-liunx-gnu-</span></span></code></pre></td></tr></table></div></div><p>命名规则为：$arch-vendor-kernel-system$，各部分解释如下</p><p><strong>arch</strong>：系统架构，表示交叉编译器是用于那个目标系统架构的，哪个平台的，即用此交叉编译器编译出来的程序运行在哪种CPU上，可能是arm，x86，mips等</p><p><strong>vendor</strong>：即生产厂家，提供商，表示谁做的这个交叉编译器，一般有这么几种情况，一是写成开发板的名字，比如cortex_a9；二是写成个人作者自己的名字；三是厂家的名字。</p><p><strong>kernel</strong>：即用此交叉编译器编译出来的程序所运行的目标系统，主要有两种：一种是<em>Linux</em>，表示有OS（主要是Linux）的环境；另一种是<em>bare-metal</em>，表示无操作系统的环境，比如编译u-boot，运行时还没OS，比如一些跑马灯之类的小程序。</p><p><strong>system</strong>：表示交叉编译器所选择的库函数和目标系统，最常见的值有gnu，gnueabi，uclibcgnueabi等。</p><ul><li><p>gnu：表示用的是glibc的意思</p></li><li><p>eabi：embedded application binary interface，应用程序二进制接口，作用是使得程序的二进制（级别）的兼容</p></li><li><p>uclibc：C库的一种，专门为嵌入式环境开发而编写的一个自由软件包，可以提供绝大多数标准C库的函数支持</p></li></ul><p>一个简单通俗的解释为：gnu 等价于 glibc+oabi，gnueabi 等价于 glibc+eabi，uclibc 等价于 uclibc+oabi（待确认）</p><h4 id=如何获得>如何获得</h4><p>1）在网上寻找并下载别人已经编译好的交叉编译器</p><p>2）购买开发板时厂家会直接提供相应的交叉编译器</p><p>3）自己动手从头开始制作一个交叉编译器</p><p>4）借助一些工具来制作交叉编译器</p><h4 id=制作工具>制作工具</h4><ol><li><a href=http://crosstool-ng.org/ target=_blank rel="external nofollow noopener noreferrer">crosstool-NG</a>：详细的可以看看这篇<a href=https://www.crifan.com/files/doc/docbook/crosstool_ng/release/html/crosstool_ng.html target=_blank rel="external nofollow noopener noreferrer">crosstool-ng详解</a></li><li><a href=http://www.buildroot.net/ target=_blank rel="external nofollow noopener noreferrer">Buildroot</a>不仅能制作交叉工具链，而且还可以制作根文件系统rootfs。而且还支持同时编译对应的Linux内核和Uboot。</li><li><a href=http://kegel.com/crosstool/ target=_blank rel="external nofollow noopener noreferrer">crosstool</a>现在用的最多的是0.43的版本：</li><li><a href=http://www.denx.de/wiki/DULG/ELDK target=_blank rel="external nofollow noopener noreferrer">Embedded Linux Development Kit (ELDK)</a>：也是和交叉编译相关的，提供编译好的东西供使用。</li><li><a href=http://www.openembedded.org/wiki/Main_Page target=_blank rel="external nofollow noopener noreferrer">OpenEmbedded</a>的<a href=http://en.wikipedia.org/wiki/BitBake target=_blank rel="external nofollow noopener noreferrer">BitBake</a>：OpenEmbedded是一个创建嵌入式Linux的整套框架，其中包括了制作对应的交叉编译器的工具，叫做BitBake。OpenEmbedded简称OE。</li><li>Crossdev</li><li><a href=http://www.pengutronix.de/oselas/toolchain/index_en.html target=_blank rel="external nofollow noopener noreferrer">OSELAS.Toolchain()</a></li></ol></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="更新于 2018-04-11 00:00:00">更新于 2018-04-11&nbsp;</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md><span><a href=/2018/migration-related-knowledge/index.md title=阅读原始文档 class=link-to-markdown>阅读原始文档</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Pocket" data-sharer=pocket data-url=https://shuzang.github.io/2018/migration-related-knowledge/><i class="fa-brands fa-get-pocket fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://shuzang.github.io/2018/migration-related-knowledge/ data-title=系统移植1-移植相关知识><i class="fa-brands fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/tags/linux/ class=post-tag>linux</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/2018/migration-of-debian-system/ class=post-nav-item rel=prev title=系统移植2-Debian系统的移植><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>系统移植2-Debian系统的移植</a>
<a href=/2018/minimalism/ class=post-nav-item rel=next title=极简主义>极简主义<i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div class=post-reward><div class=comment></div><input type=checkbox class=reward-input name=reward id=fi-reward hidden>
<label class=reward-button for=fi-reward>赞赏</label><div class=reward-ways data-mode=static><div><img loading=lazy src=/images/alipay.png srcset="/images/alipay.png, /images/alipay.png 1.5x, /images/alipay.png 2x" sizes=auto data-title="Shuzang 支付宝" data-alt="Shuzang 支付宝" style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span>支付宝</span></div><div><img loading=lazy src=/images/wechatpay.png srcset="/images/wechatpay.png, /images/wechatpay.png 1.5x, /images/wechatpay.png 2x" sizes=auto data-title="Shuzang 微信" data-alt="Shuzang 微信" style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span>微信</span></div></div></div></article></main><footer class=footer><div class=footer-container><div class="footer-line custom">Hava a great day !</div><div class="footer-line copyright" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2018 - 2023</span><span class=author itemprop=copyrightHolder>
<a href=/>Shuzang</a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label=回到顶部><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class="variant-numeric d-none">0%</span></div></div><a href=https://github.com/shuzang/shuzang.github.io title="View source on GitHub" target=_blank rel="external nofollow" class="github-corner right d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div id=mask></div><div class=reading-progress-bar style=left:0;top:0></div><noscript><div class=noscript-warning>FixIt 主题在启用 JavaScript 的情况下效果最佳。</div></noscript></div><link rel=stylesheet href=/lib/lightgallery/css/lightgallery-bundle.min.css><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/pace/themes/blue/pace-theme-minimal.css><script src=/lib/autocomplete/autocomplete.min.js defer></script><script src=/lib/fuse/fuse.min.js defer></script><script src=/lib/twemoji/twemoji.min.js defer></script><script src=/lib/lightgallery/lightgallery.min.js defer></script><script src=/lib/lightgallery/plugins/thumbnail/lg-thumbnail.min.js defer></script><script src=/lib/lightgallery/plugins/zoom/lg-zoom.min.js defer></script><script src=/lib/sharer/sharer.min.js async defer></script><script src=/lib/katex/katex.min.js defer></script><script src=/lib/katex/auto-render.min.js defer></script><script src=/lib/katex/copy-tex.min.js defer></script><script src=/lib/katex/mhchem.min.js defer></script><script src=/lib/pangu/pangu.min.js defer></script><script src=/lib/pace/pace.min.js async defer></script><script>window.config={code:{copyTitle:"复制到剪贴板",maxShownLines:10},comment:{enable:!1},lightgallery:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},pangu:{enable:!0,selector:"article"},search:{distance:100,findAllMatches:!1,fuseIndexURL:"/index.json",highlightTag:"em",ignoreFieldNorm:!1,ignoreLocation:!1,isCaseSensitive:!1,location:0,maxResultLength:10,minMatchCharLength:2,noResultsFound:"没有找到结果",snippetLength:30,threshold:.3,type:"fuse",useExtendedSearch:!1},twemoji:!0}</script><script src=/js/theme.min.js defer></script></body></html>