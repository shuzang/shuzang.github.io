<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-CN><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=2"><meta name=robots content="noodp"><title>系统移植2-Debian系统的移植 - Shuzang's Blog</title><meta name=author content="Shuzang"><meta name=author-link content><meta name=description content="Debian 系统的移植总分四部分：u-boot的编译与烧录，Linux内核的编译与烧录，Debian 基本根文件系统的制作、配置与烧录，开发板设置。 1. u"><meta name=keywords content="linux"><meta itemprop=name content="系统移植2-Debian系统的移植"><meta itemprop=description content="Debian 系统的移植总分四部分：u-boot的编译与烧录，Linux内核的编译与烧录，Debian 基本根文件系统的制作、配置与烧录，开发板设置。 1. u"><meta itemprop=datePublished content="2018-04-11T00:00:00+00:00"><meta itemprop=dateModified content="2020-04-27T00:00:00+00:00"><meta itemprop=wordCount content="5229"><meta itemprop=image content="https://shuzang.github.io/logo.png"><meta itemprop=keywords content="linux,"><meta property="og:title" content="系统移植2-Debian系统的移植"><meta property="og:description" content="Debian 系统的移植总分四部分：u-boot的编译与烧录，Linux内核的编译与烧录，Debian 基本根文件系统的制作、配置与烧录，开发板设置。 1. u"><meta property="og:type" content="article"><meta property="og:url" content="https://shuzang.github.io/2018/migration-of-debian-system/"><meta property="og:image" content="https://shuzang.github.io/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-04-11T00:00:00+00:00"><meta property="article:modified_time" content="2020-04-27T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://shuzang.github.io/logo.png"><meta name=twitter:title content="系统移植2-Debian系统的移植"><meta name=twitter:description content="Debian 系统的移植总分四部分：u-boot的编译与烧录，Linux内核的编译与烧录，Debian 基本根文件系统的制作、配置与烧录，开发板设置。 1. u"><meta name=application-name content="FixIt"><meta name=apple-mobile-web-app-title content="FixIt"><meta name=theme-color data-light=#f8f8f8 data-dark=#252627 content="#f8f8f8"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=canonical href=https://shuzang.github.io/2018/migration-of-debian-system/><link rel=prev href=https://shuzang.github.io/2018/android-system-migration/><link rel=next href=https://shuzang.github.io/2018/migration-related-knowledge/><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><meta name=google-site-verification content="UA-209130979-1"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"系统移植2-Debian系统的移植","inLanguage":"zh-CN","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/shuzang.github.io\/2018\/migration-of-debian-system\/"},"genre":"posts","keywords":"linux","wordcount":5229,"url":"https:\/\/shuzang.github.io\/2018\/migration-of-debian-system\/","datePublished":"2018-04-11T00:00:00+00:00","dateModified":"2020-04-27T00:00:00+00:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"Shuzang"},"description":""}</script></head><body data-header-desktop=sticky data-header-mobile=auto><script>(window.localStorage?.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("data-theme","dark")</script><div class=wrapper data-page-style=normal><header class="desktop animate__faster" id=header-desktop><div class=header-wrapper data-github-corner=right><div class=header-title><a href=/ title="Shuzang's Blog"><img loading=lazy src=/images/avatar.png srcset="/images/avatar.png, /images/avatar.png 1.5x, /images/avatar.png 2x" sizes=auto data-title="Shuzang's Blog" data-alt="Shuzang's Blog" class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>Shuzang's Blog</span></a><span class=header-subtitle></span></div><nav><ul class=menu><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> Posts</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> Categories</a></li><li class=menu-item><a class=menu-link href=/tags/>Tags</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> About</a></li><li class="menu-item delimiter"></li><li class="menu-item search" id=search-desktop><input type=text placeholder=搜索文章标题或内容…… id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></li><li class="menu-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></li></ul></nav></div></header><header class="mobile animate__faster" id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Shuzang's Blog"><img loading=lazy src=/images/avatar.png srcset="/images/avatar.png, /images/avatar.png 1.5x, /images/avatar.png 2x" sizes=auto data-title=/images/avatar.png data-alt=/images/avatar.png class=logo style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'><span class=header-title-text>Shuzang's Blog</span></a><span class=header-subtitle></span></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><nav><ul class=menu id=menu-mobile><li class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder=搜索文章标题或内容…… id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=搜索><i class="fa-solid fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=清空><i class="fa-solid fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fa-solid fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>取消</a></li><li class=menu-item><a class=menu-link href=/posts/><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden=true></i> Posts</a></li><li class=menu-item><a class=menu-link href=/categories/><i class="fa-solid fa-th fa-fw fa-sm" aria-hidden=true></i> Categories</a></li><li class=menu-item><a class=menu-link href=/tags/>Tags</a></li><li class=menu-item><a class=menu-link href=/about/><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden=true></i> About</a></li><li class="menu-item menu-system"><span class="menu-system-item theme-switch" title=切换主题><i class="fa-solid fa-adjust fa-fw" aria-hidden=true></i></span></li></ul></nav></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=container><aside class=toc id=toc-auto><h2 class=toc-title>目录&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden=true></i></h2><div class=toc-content id=toc-content-auto></div></aside><aside class=aside-custom></aside><article class="page single"><div class=header><h1 class="single-title animate__animated animate__flipInX"><span>系统移植2-Debian系统的移植</span></h1></div><div class=post-meta><div class=post-meta-line><span class=post-author><span class=author><i class="fa-solid fa-user-circle" aria-hidden=true></i>
Shuzang</span></span>
<span class=post-category>收录于 <a href=/categories/%E7%88%B1%E7%BC%96%E7%A8%8B%E7%88%B1%E6%8A%80%E6%9C%AF%E7%9A%84%E5%AD%A9%E5%AD%90/><i class="fa-regular fa-folder fa-fw" aria-hidden=true></i> 爱编程爱技术的孩子</a></span></div><div class=post-meta-line><span title="发布于 2018-04-11 00:00:00"><i class="fa-regular fa-calendar-alt fa-fw me-1" aria-hidden=true></i><time datetime=2018-04-11>2018-04-11</time></span>&nbsp;<span title="更新于 2020-04-27 00:00:00"><i class="fa-regular fa-edit fa-fw me-1" aria-hidden=true></i><time datetime=2020-04-27>2020-04-27</time></span>&nbsp;<span><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden=true></i>约 5229 字</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden=true></i>预计阅读 11 分钟</span>&nbsp;</div></div><div class="details toc" id=toc-static data-kept=false><div class="details-summary toc-title"><span>目录</span>
<span><i class="details-icon fa-solid fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#1-u-boot的编译>1. u-boot的编译</a><ul><li><a href=#11-下载源码>1.1 下载源码</a></li><li><a href=#12-分支切换>1.2 分支切换</a></li><li><a href=#13-安装依赖>1.3 安装依赖</a></li><li><a href=#14-开始编译>1.4 开始编译</a></li></ul></li><li><a href=#2-linux内核编译>2. Linux内核编译</a><ul><li><a href=#21-源码下载>2.1 源码下载</a></li><li><a href=#22-安装压缩工具lzop>2.2 安装压缩工具lzop</a></li><li><a href=#23-编译>2.3 编译</a></li></ul></li><li><a href=#3-debian-根文件系统的制作与配置>3. Debian 根文件系统的制作与配置</a><ul><li><a href=#31-基本说明>3.1 基本说明</a></li><li><a href=#32-工具软件安装>3.2 工具软件安装</a></li><li><a href=#33-根文件系统制作>3.3 根文件系统制作</a></li><li><a href=#34-qemu-配置>3.4 QEMU 配置</a></li></ul></li><li><a href=#4-新系统配置>4. 新系统配置</a></li><li><a href=#5-烧录工作>5. 烧录工作</a><ul><li><a href=#51-设置sd卡>5.1 设置SD卡</a><ul><li><a href=#格式化>格式化</a></li><li><a href=#删除原有分区>删除原有分区</a></li><li><a href=#重新分区>重新分区</a></li></ul></li><li><a href=#52-烧录>5.2 烧录</a><ul><li><a href=#u-boot>u-boot</a></li><li><a href=#内核>内核</a></li><li><a href=#根文件系统>根文件系统</a></li></ul></li></ul></li><li><a href=#6-开发板设置>6. 开发板设置</a></li><li><a href=#7-使用界面>7. 使用界面</a></li><li><a href=#8-参考>8. 参考</a></li></ul></nav></div></div><div class=content id=content><p>Debian 系统的移植总分四部分：u-boot的编译与烧录，Linux内核的编译与烧录，Debian 基本根文件系统的制作、配置与烧录，开发板设置。</p><h2 id=1-u-boot的编译>1. u-boot的编译</h2><p>对应于EMSYM的blurr开发板的u-boot项目使用GitHub进行开源维护，<a href=https://github.com/EMSYM/U-boot target=_blank rel="external nofollow noopener noreferrer">下载地址</a>，我的编译环境为Ubuntu16.04 LTS系统</p><h3 id=11-下载源码>1.1 下载源码</h3><p>方法一：在链接打开后的项目界面依次选择clone or download—>Download ZIP，将源码下载到PC中相应的文件夹（记得解压&mldr;..）</p><p>方法二：采用git命令（须事先安装git）</p><div class=highlight id=id-1><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ git clone https://github.com/EMSYM/U-boot.git</span></span></code></pre></td></tr></table></div></div><p>注：该链接在选中clone or download后可看到</p><h3 id=12-分支切换>1.2 分支切换</h3><p>在下载好的u-boot项目目录下打开虚拟终端，创建并切换分支</p><div class=highlight id=id-2><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ git checkout -b v4.1 origin/blurr-4.1.15</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_d1bb18bcb403.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_d1bb18bcb403.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_d1bb18bcb403.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_d1bb18bcb403.png 2x" sizes=auto data-title=创建并切换分支 data-alt=创建并切换分支 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><h3 id=13-安装依赖>1.3 安装依赖</h3><p>gcc-arm-linux-gnueabi是我们用到的交叉编译器</p><div class=highlight id=id-3><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sudo apt install gcc-arm-linux-gnueabi
</span></span><span class=line><span class=cl>$ sudo apt-get install build-essential gcc</span></span></code></pre></td></tr></table></div></div><p>注：Ubuntu缺省情况下，并没有提供C/C++的编译环境，因此还需要手动安装。如果单独安装gcc以及g++比较麻烦，幸运的是，为了能够编译Ubuntu的内核，Ubuntu提供了一个build-essential软件包。因为依赖关系的问题，安装了该软件包，编译c/c++所需要的软件包也都会被安装。因此如果想在Ubuntu中编译c/c++程序，只需要安装该软件包就可以了。</p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_8135c2d310f2.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_8135c2d310f2.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_8135c2d310f2.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_8135c2d310f2.png 2x" sizes=auto data-title=build-essential的依赖关系 data-alt=build-essential的依赖关系 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><h3 id=14-开始编译>1.4 开始编译</h3><p>指定核心类型</p><div class=highlight id=id-4><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nv>ARCH</span><span class=o>=</span>arm</span></span></code></pre></td></tr></table></div></div><p>生成配置文件（用到Makefile，参阅<a href=https://hacker-yhj.github.io/resources/gun_make.pdf target=_blank rel="external nofollow noopener noreferrer">GNU make中文手册</a>）</p><div class=highlight id=id-5><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ make mx6dl_blurr_defconfig</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_c22b1be42612.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_c22b1be42612.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_c22b1be42612.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_c22b1be42612.png 2x" sizes=auto data-title=生成配置文件 data-alt=生成配置文件 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><p>指定交叉编译前缀，编译u-boot</p><div class=highlight id=id-6><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ make <span class=nv>CROSS_COMPILE</span><span class=o>=</span>arm-linux-gnueabi- </span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_967c5a8d8bba.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_967c5a8d8bba.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_967c5a8d8bba.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_967c5a8d8bba.png 2x" sizes=auto data-title=编译通过 data-alt=编译通过 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><p>执行完上述步骤后，编译即可成功</p><h2 id=2-linux内核编译>2. Linux内核编译</h2><p>同样，对应于blurr开发板的Linux内核项目也在GitHub上开源维护，<a href=https://github.com/EMSYM/linux target=_blank rel="external nofollow noopener noreferrer">项目地址</a></p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_fd26ed77a3ab.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_fd26ed77a3ab.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_fd26ed77a3ab.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_fd26ed77a3ab.png 2x" sizes=auto data-title=github上的工程 data-alt=github上的工程 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><h3 id=21-源码下载>2.1 源码下载</h3><p>下载源码的手段与u-boot类似。这里要提醒的是，最好直接Download ZIP，不要clone，因为下载ZIP只有100多M，clone会有一个多G。而这两种手段得到的源码对之后的编译没有影响。（记得解压zip文件）</p><h3 id=22-安装压缩工具lzop>2.2 安装压缩工具lzop</h3><div class=highlight id=id-7><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sudo apt-get install lzop</span></span></code></pre></td></tr></table></div></div><p>lzop是最后生成时要用到的一个压缩工具，当没有安装此工具就开始编译，过程中会出现一个lozp：not found的错误</p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_5665b6610702.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_5665b6610702.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_5665b6610702.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_5665b6610702.png 2x" sizes=auto data-title="lozp：not fountd" data-alt="lozp：not fountd" style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><h3 id=23-编译>2.3 编译</h3><p>进入下载好的Linux项目主目录，逐步执行如下命令</p><div class=highlight id=id-8><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>export</span> <span class=nv>ARCH</span><span class=o>=</span>arm
</span></span><span class=line><span class=cl>$ <span class=nb>export</span> <span class=nv>CROSS_COMPILE</span><span class=o>=</span>arm-linux-gnueabi-
</span></span><span class=line><span class=cl>$ make blurr_defconfig
</span></span><span class=line><span class=cl>$ make</span></span></code></pre></td></tr></table></div></div><p>前两句的意思是指定芯片的架构以及交叉编译器前缀，然后就开始编译了（之前编译u-boot时已装好交叉编译器），可参考 <a href=http://blog.csdn.net/wl_fln/article/details/7258294 target=_blank rel="external nofollow noopener noreferrer">export命令的介绍</a></p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_57171204afb8.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_57171204afb8.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_57171204afb8.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_57171204afb8.png 2x" sizes=auto data-title=四条指令 data-alt=四条指令 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><p>会有一些warning，但不碍事</p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/ad7eeaabb67f.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/ad7eeaabb67f.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/ad7eeaabb67f.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/ad7eeaabb67f.png 2x" sizes=auto data-title=warning data-alt=warning style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><p>要等很久&mldr;..</p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_cc3a1d8404d3.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_cc3a1d8404d3.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_cc3a1d8404d3.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_cc3a1d8404d3.png 2x" sizes=auto data-title=编译成功 data-alt=编译成功 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><p>完成如上步骤后即可编译完成，我们需要编译得到的zImage文件和imx6dl-blurr.dtb文件位置如下：</p><ul><li><p>zImage：linux-blurr 4.1.15—>arch—>arm—>boot</p></li><li><p>imx6dl-blurr.dtb：linux-blurr 4.1.15—>arch—>arm—>boot—>dts</p></li></ul><p>zImage位置如下图</p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_beb1c3962a3d.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_beb1c3962a3d.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_beb1c3962a3d.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_beb1c3962a3d.png 2x" sizes=auto data-title=zImage data-alt=zImage style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><p>imx6dl-blurr.dtb直接从上面目录里的dts点进去</p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_6488bacf69de.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_6488bacf69de.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_6488bacf69de.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_6488bacf69de.png 2x" sizes=auto data-title=imx6dl-blurr.dtb data-alt=imx6dl-blurr.dtb style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><h2 id=3-debian-根文件系统的制作与配置>3. Debian 根文件系统的制作与配置</h2><p>该部分内容主要参考官方文档 <a href=https://wiki.debian.org/EmDebian/CrossDebootstrap target=_blank rel="external nofollow noopener noreferrer">EmDebian CrossDebootstrap</a>，方法为QEMU/debootstrap的方法。使用debootstrap工具完成根文件系统的制作，使用QEMU模拟器完成配置工作。</p><h3 id=31-基本说明>3.1 基本说明</h3><p>制作根文件系统的工具常用Debootstrap和Multistrap，制作流程大概分为四个步骤：</p><p>1、从源里下载需要的.deb软件包</p><p>2、解压它们到相应的目标目录</p><p>3、用chroot命令修改该目标目录为根目录</p><p>4、配置脚本，完成安装</p><p>通常，使用debootstrap、cdebootstrap或multistrap完成第一二阶段的工作，QEMU完成第三四阶段的工作。</p><h3 id=32-工具软件安装>3.2 工具软件安装</h3><p>使用如下的命令安装所需要工具软件</p><div class=highlight id=id-9><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sudo apt-get install binfmt-support qemu qemu-user-static debootstrap</span></span></code></pre></td></tr></table></div></div><p>debootstrap是根文件系统制作工具，qemu是模拟器，是为了在宿主机上模拟开发板的环境</p><p>接下来的步骤需要以root身份执行，因为debootstrap的工作以及chroot到建好的新系统的目录都需要root权限</p><h3 id=33-根文件系统制作>3.3 根文件系统制作</h3><p>首先选择要引导的目标架构和Debian版本（例如stable、testing或sid）,我们选择开发板对应的arm架构，版本选择Debian9.1,叫做stretch。</p><p>创建一个目录文件，制作好的根文件系统将放在这个目录下。需要提示以后所有对根文件系统的修改都局限在这个目录里，不会影响到宿主机，所以不用担心搞毁你的系统。为了介绍清楚，我们采用“debian_armhf_stretch”作为目录名，但它其实就是rootfs，如果你这样命名的话</p><div class=highlight id=id-10><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sudo mkdir debian_armhf_stretch</span></span></code></pre></td></tr></table></div></div><p>制作根文件系统，需要运行debootstrap</p><div class=highlight id=id-11><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sudo debootstrap --foreign --arch armhf stretch debian_armhf_stretch http://ftp.debian.org/debian/</span></span></code></pre></td></tr></table></div></div><p>其中<code>debian_armhf_stretch</code>是创建的目录，<code>armhf</code>是目标架构，<code>http://ftp.debian.org/debian</code>是Debian镜像，必需的.deb包将从这里下载。可以随意选择自己喜欢的镜像，只要它有我们要用于的目标架构。<a href=http://www.debian.org/mirror/list target=_blank rel="external nofollow noopener noreferrer">可用的Debian镜像列表</a>，<a href=https://linux.cn/man/man8/debootstrap.8.html target=_blank rel="external nofollow noopener noreferrer">debootstrap命令说明</a></p><p>会运行两次，第一次是从网上下载，第二次就是在debian_armhf_stretch目录下生成bin、sbin这些Linux文件系统目录了。</p><h3 id=34-qemu-配置>3.4 QEMU 配置</h3><p>根文件系统已经创建完成。默认情况下，debootstrap创建的是一个非常小的系统，所以可能需要扩展一下，这个放在后面的配置新系统。</p><p>先复制“qemu-arm-static” 到刚构建的根文件系统中。为了能chroot到目标文件系统，针对目标CPU的qemu模拟器需要从内部访问</p><div class=highlight id=id-12><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sudo cp /usr/bin/qemu-arm-static  debian_armhf_stretch/usr/bin</span></span></code></pre></td></tr></table></div></div><p>接下来运行debootstrap的第二个阶段来解压步骤3中安装的所有软件包</p><div class=highlight id=id-13><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sudo <span class=nv>DEBIAN_FRONTEND</span><span class=o>=</span>noninteractive <span class=nv>DEBCONF_NONINTERACTIVE_SEEN</span><span class=o>=</span><span class=nb>true</span> <span class=nv>LC_ALL</span><span class=o>=</span>C <span class=nv>LANGUAGE</span><span class=o>=</span>C <span class=nv>LANG</span><span class=o>=</span>C chroot debian_armhf_stretch debootstrap/debootstrap --second-stage</span></span></code></pre></td></tr></table></div></div><p>该命令意思是设置一些环境变量,然后切换根目录到debian_armhf_stretch（这个操作是chroot做的，这个命令很有意思），执行目录debian_armhf_stretch/debootstrap下的命令: debootstrap &ndash;second-stage。终端上最后会打印 <code>I: Base system installed successfully.</code>，就说明成功了。</p><p>切换到qemu</p><div class=highlight id=id-14><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>$sudo</span> chroot debian_armhf_stretch</span></span></code></pre></td></tr></table></div></div><p>不过如果这样的话之后的提示都是英文的，想显示中文需要把上面的命令这样输入</p><div class=highlight id=id-15><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sudo <span class=nv>LANG</span><span class=o>=</span>C.UTF-8 chroot debian_armhf_stretch</span></span></code></pre></td></tr></table></div></div><h2 id=4-新系统配置>4. 新系统配置</h2><p>刚刚创建的新系统需要一些简单的调整以便于你运用它做一些特殊的工作。下面的步骤需要以root权限执行</p><ol><li><p>手动在/etc/apt/sources.list里面添加如下条目</p><div class=highlight id=id-16><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>deb http://ftp.debian.org/debian/ stretch main contrib non-free
</span></span><span class=line><span class=cl>deb-src http://ftp.debian.org/debian/ stretch main contrib non-free</span></span></code></pre></td></tr></table></div></div><p>源的选择是随便的，只要它支持目标平台就行，不过国内<a href=https://lug.ustc.edu.cn/wiki/mirrors/help/debian target=_blank rel="external nofollow noopener noreferrer">中科大的源</a>好用一点，这时候就可以像往常一样使用apt-get install 命令安装其它软件包了。</p></li><li><p>安装xorg和KDE，KDE新版本叫plasma</p><div class=highlight id=id-17><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sudo apt-get install xorg
</span></span><span class=line><span class=cl>$ sudo apt-get install plasma-desktop</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_ff04dfdcef82.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_ff04dfdcef82.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_ff04dfdcef82.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_ff04dfdcef82.png 2x" sizes=auto data-title=plasma-desktop data-alt=plasma-desktop style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><p>这句执行也是真的久，不要着急，中间可能会自动进入一些配置界面，根据选项自己选就行，如果乱码的话可以选第一个，其实上面设置成中文就没乱码了。</p></li><li><p>安装终端konsole，安装浏览器qupzilla（这是因为Debian9以下不支持chrome），安装文件管理器dolphin，网络管理器plasma-nm</p><div class=highlight id=id-18><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sudo apt-get install konsole
</span></span><span class=line><span class=cl>$ sudo apt-get install qupzilla
</span></span><span class=line><span class=cl>$ sudo apt-get install dolphin
</span></span><span class=line><span class=cl>$ sudo apt-get install plasma-nm</span></span></code></pre></td></tr></table></div></div></li><li><p>打开etc文件夹中的fstab文件，在末尾添加</p><div class=highlight id=id-19><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>/dev/sda / ext4 defaults <span class=m>0</span> <span class=m>1</span></span></span></code></pre></td></tr></table></div></div></li><li><p>root用户下输入命令</p><div class=highlight id=id-20><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>chown root:root /usr/bin/sudo
</span></span><span class=line><span class=cl>chmod <span class=m>4755</span> /usr/bin</span></span></code></pre></td></tr></table></div></div></li></ol><h2 id=5-烧录工作>5. 烧录工作</h2><p>u-boot，Linux内核和根文件系统都是需要烧录的，下面介绍如何进行这部分工作。首先将SD卡格式化，准备好要烧录的文件</p><ul><li>u-boot：u-boot.imx</li><li>内核：zImage和imx6dl-blurr.dtb</li><li>根文件系统：debian_armhf_stretch</li></ul><h3 id=51-设置sd卡>5.1 设置SD卡</h3><p>SD卡需要创建2个分区，并且在第一个分区之前预留一段空间用于保存u-boot.imx；然后第一个分区设置为fat格式，用于保存内核编译成的两个文件；第二个分区设置为ext4格式，用于保存根文件系统。</p><h4 id=格式化>格式化</h4><p>在分区之前，先将SD卡格式化（可能Windows下格式化方便一点），首先在Linux系统下插入SD卡，查看挂载位置，使用<a href=http://www.linuxidc.com/Linux/2012-06/61872.htm target=_blank rel="external nofollow noopener noreferrer">fdisk</a>命令</p><div class=highlight id=id-21><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sudo fdisk -l</span></span></code></pre></td></tr></table></div></div><p>这个命令作用为查看磁盘使用情况的，最后那个即为我们新挂载的SD卡</p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_e2b342bb2c91.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_e2b342bb2c91.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_e2b342bb2c91.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_e2b342bb2c91.png 2x" sizes=auto data-title=查看挂载地址 data-alt=查看挂载地址 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><p>从结果输出中可以看到SD卡，挂载位置是/dev/sdb，输入命令</p><div class=highlight id=id-22><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sudo fdisk /dev/sdb</span></span></code></pre></td></tr></table></div></div><p>该命令含义为进入分割硬盘模式，这个命令执行结束就可以操作分区了。</p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_0b65803507c5.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_0b65803507c5.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_0b65803507c5.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_0b65803507c5.png 2x" sizes=auto data-title=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_0b65803507c5.png data-alt=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_0b65803507c5.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><h4 id=删除原有分区>删除原有分区</h4><p>输入m可以获取帮助，显示所有可用命令。先用d 命令删除原来的分区，提示Selected partition，在后面输入要删除的分区号，回车，分区即可删除成功</p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427153230942.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427153230942.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427153230942.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427153230942.png 2x" sizes=auto data-title=删除分区 data-alt=删除分区 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><p>输入命令p查看此时的分区信息，已变成一整块的磁盘未分区，接下来开始分区</p><h4 id=重新分区>重新分区</h4><p>n命令新建分区，第一次输入p分割为主分区，分区号为1，分区的起始位置和结束位置自己算好填上去，注意分区必以sector为单位，一个sector 为512 bytes，所以不要输不是512整数倍的数。</p><p>n命令新建分区，第二次输入e分割分区，分区号为2，起始位置接着上一个分区的结束位置。</p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_bd06ff3756c8.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_bd06ff3756c8.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_bd06ff3756c8.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_bd06ff3756c8.png 2x" sizes=auto data-title=分区 data-alt=分区 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><p>p命令查看分区信息，看是否符合预想。w命令保存退出。弹出重新插入SD卡或者重新启动Ubuntu系统，之后再次查看分区信息，这是为了更新分区表给内核，否则看不到分好的区。</p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_b3f7856930ad.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_b3f7856930ad.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_b3f7856930ad.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_b3f7856930ad.png 2x" sizes=auto data-title=再次查看 data-alt=再次查看 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><p>格式化新建的分区</p><div class=highlight id=id-23><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sudo mkfs.ext4 /dev/sdb2</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_81816c5f55ca.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_81816c5f55ca.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_81816c5f55ca.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_81816c5f55ca.png 2x" sizes=auto data-title=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_81816c5f55ca.png data-alt=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_81816c5f55ca.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><p>然后对两个分区格式化</p><p>输入t，选择分区1，将分区1格式化为fat，这里输入6为FAT16，c为FAT32</p><p>输入t，选择分区2，将分区2格式化为ext4格式，输入83即可</p><p>注：这里输入83格式化结束最后查看分区其实显示的是83 Linux，这就已经是ext4格式了，不要觉得自己错了，因为Linux的默认格式就是ext4</p><p>w命令保存</p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_823a55d4bfef.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_823a55d4bfef.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_823a55d4bfef.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_823a55d4bfef.png 2x" sizes=auto data-title=格式化分区 data-alt=格式化分区 style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><h3 id=52-烧录>5.2 烧录</h3><h4 id=u-boot>u-boot</h4><p>执行如下命令，把u-boot弄到SD卡开头预留的那段空间</p><div class=highlight id=id-24><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sudo dd <span class=k>if</span><span class=o>=</span>u-boot.imx <span class=nv>of</span><span class=o>=</span>/dev/sdb  <span class=nv>bs</span><span class=o>=</span><span class=m>512</span> <span class=nv>seek</span><span class=o>=</span><span class=m>2</span> <span class=p>;</span>sync</span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427154449772.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427154449772.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427154449772.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427154449772.png 2x" sizes=auto data-title=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427154449772.png data-alt=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427154449772.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><p><a href=http://blog.csdn.net/pugu12/article/details/47047341 target=_blank rel="external nofollow noopener noreferrer">dd命令的解释</a>，至于为什么要seek=2，跳过头两个块我现在也不懂</p><h4 id=内核>内核</h4><p>把编译好的内核的两个文件zImage和imx6dl-blurr.dtb复制到第一个分区，可以直接鼠标操作</p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427154551645.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427154551645.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427154551645.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427154551645.png 2x" sizes=auto data-title=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427154551645.png data-alt=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427154551645.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><h4 id=根文件系统>根文件系统</h4><p>先 fdisk -l 查看第二个分区的位置，是/dev/sdb2。把第二个分区挂载到/mnt下，这里执行成功后把文件放到/mnt下就相当于放到了U盘第二个分区</p><div class=highlight id=id-25><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sudo mount /dev/sdb2 /mnt</span></span></code></pre></td></tr></table></div></div><p>然后就在rootfs的当前目录用cp命令复制，意思是将根文件系统的所有内容复制到挂载的目录</p><div class=highlight id=id-26><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sudo cp -rf rootfs/.  /mnt</span></span></code></pre></td></tr></table></div></div><p>执行完有必要的话取消挂载</p><div class=highlight id=id-27><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ sudo umount /mnt</span></span></code></pre></td></tr></table></div></div><h2 id=6-开发板设置>6. 开发板设置</h2><p>确保zImage文件和imx6dl-blurr.dtb文件都已放入SD卡第一个分区，也就是FAT格式的分区中；文件系统解压到SD卡第二个分区，也就是ext4格式的分区中</p><p>注：若之前已经进行到屏幕上出现两只企鹅，此时只需要将解压好文件系统的SD卡插入开发板，上电即可进入命令行界面，若无法进入命令行界面则继续进行下列步骤，</p><ol><li><p>靠近 HDMI接口的地方有个开关，拨动开关到boot一端，设置八位红色开关为0100001</p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427155128647.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427155128647.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427155128647.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427155128647.png 2x" sizes=auto data-title=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427155128647.png data-alt=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427155128647.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p></li><li><p>将SD卡插入SD3插槽</p></li><li><p>下好窗口调试软件putty（windows或Linux下都可），其它串口调试软件也行，用数据线连接开发板和PC（调试），开发板与屏幕，开发板与电源，开发板与键盘</p></li><li><p>打开设备管理器，找到这个设备，这时候还没有驱动，所以右键更新驱动程序，在网络上查找，第一次可能一直是寻找中，那就关掉重新打开。直到驱动装好，从设备管理器里就可以看到相应的COM口。</p></li><li><p>打开putty，选择serial，将COM1改成上面设备管理器里看到的COM号，speed改为115200，然后最下面点open</p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427155359810.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427155359810.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427155359810.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427155359810.png 2x" sizes=auto data-title=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427155359810.png data-alt=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427155359810.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p></li><li><p>此时看到串口输出（若没有，请按开发板HDMI口旁边的RESET按钮），按回车进入调试模式，输入如下命令命令</p><div class=highlight id=id-28><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>setenv bootargs <span class=s1>&#39;console=ttymxc0,115200 root=/dev/mmcblk2p2 init=/sbin/init&#39;</span>
</span></span><span class=line><span class=cl>saveenv
</span></span><span class=line><span class=cl><span class=c1>#加载镜像</span>
</span></span><span class=line><span class=cl>fatload mmc 1:1 <span class=m>12000000</span> zImage<span class=p>;</span> <span class=c1>#将SD卡分区一的镜像加载到内存地址0x12000000</span>
</span></span><span class=line><span class=cl>fatload mmc 1:1 <span class=m>11000000</span> imx6dl-blurr.dtb<span class=p>;</span>
</span></span><span class=line><span class=cl><span class=c1>#加载Device Tree文件</span>
</span></span><span class=line><span class=cl><span class=c1>#启动镜像</span>
</span></span><span class=line><span class=cl>bootz <span class=m>12000000</span> - <span class=m>11000000</span></span></span></code></pre></td></tr></table></div></div><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427155557593.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427155557593.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427155557593.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427155557593.png 2x" sizes=auto data-title=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427155557593.png data-alt=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427155557593.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p></li></ol><p>开发板上电，如果SD卡中此时只有u-boot和内核，屏幕上会有两只企鹅，</p><img src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_stickpicture.png alt=显示企鹅 style=zoom:33%><p>如果根文件系统也已经放进去了，那就会出现登录选项，连接键盘与开发板，输入root，这个是拿到的这个根文件系统就是这个名字，之后即可使用键盘输入各种命令与开发板交互。在命令行使用如下命令可以启动 GUI，然后就进入KDE桌面环境了，Debian系统哦</p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427160233842.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427160233842.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427160233842.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427160233842.png 2x" sizes=auto data-title=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427160233842.png data-alt=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427160233842.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><p>注：开发板获得读写权限的方法如下，如果模拟器中已完成此工作则不需要</p><div class=highlight id=id-29><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ mount rw -o remount /</span></span></code></pre></td></tr></table></div></div><h2 id=7-使用界面>7. 使用界面</h2><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427160245617.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427160245617.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427160245617.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427160245617.png 2x" sizes=auto data-title=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427160245617.png data-alt=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427160245617.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><p><img loading=lazy src=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427160256212.png srcset="https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427160256212.png, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427160256212.png 1.5x, https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427160256212.png 2x" sizes=auto data-title=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427160256212.png data-alt=https://picped-1301226557.cos.ap-beijing.myqcloud.com/BC_20180411_image-20200427160256212.png style="background:url(/svg/loading.min.svg)no-repeat 50%" onload='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e);this.dataset.lazyloaded=""' onerror='this.title=this.dataset.title,this.alt=this.dataset.alt;for(const e of["style","data-title","data-alt","onerror","onload"])this.removeAttribute(e)'></p><h2 id=8-参考>8. 参考</h2><ol><li><p><a href=http://www.cnblogs.com/qiaoqiao2003/p/3738552.html target=_blank rel="external nofollow noopener noreferrer">debian下为arm开发板创建基于debian或emdebian的根文件系统</a></p><p>这篇文章主要是提供一个思路，用工具来制作Debian的根文件系统。</p></li><li><p><a href=http://blog.csdn.net/luoqindong/article/details/42737879 target=_blank rel="external nofollow noopener noreferrer">创建基于arm的debian文件系统</a></p><p>主要是因为上面制作的根文件系统直接弄到板子上没网，所以就没法用板子的命令行安装软件，只好借助模拟器在PC上装好一些东西，比如GUI和其它一些软件。这篇文章提供一些模拟器QWMU使用的借鉴</p></li><li><p><a href=http://www.emdebian.org/emdebian/flavours.html target=_blank rel="external nofollow noopener noreferrer">Emdebian</a></p><p>这个就没什么了，主要是区别一下我们用到的嵌入式Debian的源码版本</p></li></ol></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span title="更新于 2020-04-27 00:00:00">更新于 2020-04-27&nbsp;</span></div><div class=post-info-license><span><a rel="license external nofollow noopener noreferrer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div><div class=post-info-line><div class=post-info-md><span><a href=/2018/migration-of-debian-system/index.md title=阅读原始文档 class=link-to-markdown>阅读原始文档</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="分享到 Twitter" data-sharer=twitter data-url=https://shuzang.github.io/2018/migration-of-debian-system/ data-title=系统移植2-Debian系统的移植 data-hashtags=linux><i class="fa-brands fa-twitter fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 Facebook" data-sharer=facebook data-url=https://shuzang.github.io/2018/migration-of-debian-system/ data-hashtag=linux><i class="fa-brands fa-facebook-square fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); title="分享到 微博" data-sharer=weibo data-url=https://shuzang.github.io/2018/migration-of-debian-system/ data-title=系统移植2-Debian系统的移植><i class="fa-brands fa-weibo fa-fw" aria-hidden=true></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fa-solid fa-tags fa-fw me-1" aria-hidden=true></i><a href=/tags/linux/ class=post-tag>linux</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>返回</a></span>&nbsp;|&nbsp;<span><a href=/>主页</a></span></section></div><div class=post-nav><a href=/2018/android-system-migration/ class=post-nav-item rel=prev title=系统移植3-Android系统移植><i class="fa-solid fa-angle-left fa-fw" aria-hidden=true></i>系统移植3-Android系统移植</a>
<a href=/2018/migration-related-knowledge/ class=post-nav-item rel=next title=系统移植1-移植相关知识>系统移植1-移植相关知识<i class="fa-solid fa-angle-right fa-fw" aria-hidden=true></i></a></div></div></article></main><footer class=footer><div class=footer-container><div class="footer-line powered">由 <a href=https://gohugo.io/ target=_blank rel="external nofollow noopener noreferrer" title="Hugo 0.117.0">Hugo</a> 强力驱动 | 主题 - <a href=https://github.com/hugo-fixit/FixIt target=_blank rel=external title="FixIt v0.2.18"><img class=fixit-icon src=/fixit.min.svg alt="FixIt logo">&nbsp;FixIt</a></div><div class="footer-line copyright" itemscope itemtype=http://schema.org/CreativeWork><i class="fa-regular fa-copyright fa-fw" aria-hidden=true></i>
<span itemprop=copyrightYear>2018 - 2023</span><span class=author itemprop=copyrightHolder>
<a href=/>Shuzang</a></span><span class="license footer-divider"><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div><div class="footer-line statistics"></div><div class="footer-line visitor"><span id=busuanzi_container_site_uv title=总访客数><i class="fa-regular fa-user fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_site_uv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span><span id=busuanzi_container_site_pv class=footer-divider title=总访问量><i class="fa-regular fa-eye fa-fw" aria-hidden=true></i>&nbsp;<span id=busuanzi_value_site_pv><i class="fa-solid fa-spinner fa-spin fa-fw" aria-hidden=true></i></span></span></div></div></footer></div><div class=widgets><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role=button aria-label=回到顶部><i class="fa-solid fa-arrow-up fa-fw" aria-hidden=true></i><span class="variant-numeric d-none">0%</span></div></div><a href=https://github.com/shuzang title="View source on GitHub" target=_blank rel="external nofollow" class="github-corner right d-none-mobile"><svg viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115h15l12 27L250 250V0z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentcolor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4l13.9-13.8C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8z" fill="currentcolor" class="octo-body"/></svg></a><div id=mask></div><div class=reading-progress-bar style=left:0;top:0></div><noscript><div class=noscript-warning>FixIt 主题在启用 JavaScript 的情况下效果最佳。</div></noscript></div><link rel=stylesheet href=/lib/lightgallery/css/lightgallery-bundle.min.css><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><link rel=stylesheet href=/lib/pace/themes/blue/pace-theme-minimal.css><script src=/lib/autocomplete/autocomplete.min.js defer></script><script src=/lib/fuse/fuse.min.js defer></script><script src=/lib/twemoji/twemoji.min.js defer></script><script src=/lib/lightgallery/lightgallery.min.js defer></script><script src=/lib/lightgallery/plugins/thumbnail/lg-thumbnail.min.js defer></script><script src=/lib/lightgallery/plugins/zoom/lg-zoom.min.js defer></script><script src=/lib/sharer/sharer.min.js async defer></script><script src=/lib/katex/katex.min.js defer></script><script src=/lib/katex/auto-render.min.js defer></script><script src=/lib/katex/copy-tex.min.js defer></script><script src=/lib/katex/mhchem.min.js defer></script><script src=/lib/cookieconsent/cookieconsent.min.js defer></script><script src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js async defer></script><script src=/lib/pace/pace.min.js async defer></script><script>window.config={code:{copyTitle:"复制到剪贴板",editLockTitle:"锁定可编辑代码块",editUnLockTitle:"解锁可编辑代码块",editable:!0,maxShownLines:10},comment:{enable:!1},cookieconsent:{content:{dismiss:"同意",link:"了解更多",message:"本网站使用 Cookies 来改善您的浏览体验。"},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},lightgallery:!0,math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{distance:100,findAllMatches:!1,fuseIndexURL:"/index.json",highlightTag:"em",ignoreFieldNorm:!1,ignoreLocation:!1,isCaseSensitive:!1,location:0,maxResultLength:10,minMatchCharLength:2,noResultsFound:"没有找到结果",snippetLength:30,threshold:.3,type:"fuse",useExtendedSearch:!1},twemoji:!0}</script><script src=/js/theme.min.js defer></script></body></html>